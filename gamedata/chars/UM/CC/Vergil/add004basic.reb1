; ADD004 BASIC PIEs ReBuilded CNS (08/03/2023)





;51, 47, 46, 44, 38, 37, 35, 34,  26,   
 
;---------------------------------------------------------------------------
; ?????
;---------------------------------------------------------------------------
[Data]
life              = 850   ;???(?????)???
power             = 5000   ;?????????(?????ｷ??????3000=Lv.3)
attack            = 90    ;???(??????100%)
defence           = 80    ;???(??????100%)
fall.defence_up   = 50     ;???????????????????(%)
liedown.time      = 60     ;?????????(????)
airjuggle         = 100    ;???????????(????.txt???)
sparkno           = 2      ;?????????????(fightfx??)
guard.sparkno     = 40     ;?????????????(fightfx??)
KO.echo           = 0    ;KO????(11,0)???????????(0=????,1=???)
volume            = 255  ;?????????(??-255ｷ??255)
IntPersistIndex   = 48;58    ;?????????????Var?????????????(?1)
FloatPersistIndex = 40     ;?????????????FVar?????????????(?1)
; ???
;---------------------------------------------------------------------------
[Size]
xscale           = 0.5       ;?????????(???ｷfloat)
yscale           = 0.5      ;?????????(???ｷfloat)
ground.back      = 23    ;?????????????????
ground.front     = 15     ;?????????????????
air.back         = 24      ;?????????????????
air.front        = 25      ;?????????????????
height           = 60      ;??????????(????????????????)
attack.dist      = 160     ;????????????????
proj.attack.dist = 90      ;????Projectile?????????????????????
proj.doscale     = 0       ;xscale?yscale??Projectile???????????(0=????ｷ1=???)
head.pos         = -5,-90  ;???????????(Bind???????)
mid.pos          = -5,-60  ;?????????????(Bind???????)
shadowoffset     = 0       ;??Y????????
draw.offset      = 0,0     ;????????(X?,Y?)

;---------------------------------------------------------------------------
; ????
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2       ;????(X?ｷ[Statedef 20]??????)
walk.back    = -1.7        ;????(X?ｷ[Statedef 20]??????)
run.fwd      = 4.6,0       ;???????(X?,Y?ｷ[Statedef 100]??????)
run.back     = -4.5,-3.8   ;???????(X?,Y?ｷ[Statedef 105]??????)
jump.neu     = 0,-12.5      ;?????????(X?,Y?ｷ[Statedef 40]??????)
jump.back    = -3       ;?????????(X?ｷ[Statedef 40]??????)
jump.fwd     = 3         ;?????????(X?ｷ[Statedef 40]??????)
runjump.back = -4.5,-9.5  ;???????????????(X?,Y?ｷ[Statedef 40]??????)
runjump.fwd  = 4.5,-9.5     ;???????????????(X?,Y?ｷ[Statedef 40]??????)
airjump.neu  = 0,-10.1      ;??????????(X?,Y?ｷ[Statedef 45]??????)
airjump.back = -2.55       ;??????????(X?ｷ[Statedef 45]??????)
airjump.fwd  = 2.5         ;??????????(X?ｷ[Statedef 45]??????)

;---------------------------------------------------------------------------
; ????
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;????????????
airjump.height  = 35       ;???????????????(Y?)
yaccel          = .65   ;Y????(??)
stand.friction  = .85      ;???????????(?????Physics??S???)
crouch.friction = .82      ;?????????????(?????Physics??C???)
;-------------------------------------------------------------------------
 





[Statedef 800 - Throw]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800+var(10)
sprpriority = 2

[State 800, Tech Reset]
type = varset
trigger1 = 1
var(18) = 0

[State 800, Tech Set]
type = varset
trigger1 = numenemy > 0 
var(18) = 7

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10800
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 800
elem = animelemno(0)

[State 800, 声]
type = PlaySnd
trigger1 = AnimElem = 1
value = 700,0
channel = 0

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-  ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkno = -1+0*(var(12):=10)
p1sprpriority = 1
p1facing = ifelse(command = "holdback", -1, 1)
p2facing = 1
p1stateno = 801
p2stateno = 820
guard.dist = 0 ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1
givepower =0
getpower = 0

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 812 - Enemy Tech State]
type = S
physics = N
moveType = H
ctrl = 0
velSet = 0,0
sprPriority = 0

[State 895, PS]
type = PosSet
trigger1 = time = 0
y = 0

[State 895, CA]
type = ChangeAnim
trigger1 = time = 0
value = ifElse(SelfAnimExist(5940), 5940, 130)

[State 895, CA]
type = ChangeAnim
trigger1 = time = 0
trigger1 = !selfanimexist(5945)
trigger1 = selfanimexist(5940)
value = 5940

[State 895, CA]
type = ChangeAnim
trigger1 = time = 0
trigger1 = !selfanimexist(5945)
trigger1 = !selfanimexist(5940)
trigger1 = selfanimexist(5910)
value = 5910

[State 895, CA]
type = ChangeAnim
trigger1 = time >= 20
trigger1 = anim = 130
value = 140

[State 895, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 895, PP]
type = PlayerPush
trigger1 = 1
value = 0

[State 890, VS]
type = VelSet
trigger1 = time = 0
x = -8;-6.14
y = 0

[State 890, VM]
type = veladd;mul
trigger1 = time>=0
trigger1 = vel x < 0
x = 0.5;85

[State 895, CS]
type = SelfState
trigger1 = Time >= 27
value = 0
ctrl = 1

[StateDef 811 - Tech success]
type = S
physics = N
movetype = A;I
anim = 5945
ctrl = 0
velset = 0,0
sprPriority = 1

[State 890, PSND]
type = null;PlaySnd
trigger1 = AnimElemtime(2) = 0
value = 890,0
channel = 0

[State 890, PSND]
type = PlaySnd
trigger1= time = 0
value = 5,0

[State 890, T]
type = null;turn
trigger1 = time = 0

[State 890, PA]
type = PosAdd
trigger1 = time = 0
x = 24

[State 890, PS]
type = PosSet
trigger1 = time = 0
y = 0

[State 890, TB]
type = TargetBind
trigger1 = time = 0
trigger1 = numtarget
pos = 0,0

[State 890, TS]
type = TargetState
trigger1 = time = 0
trigger1 = numtarget
value = 812

[State 890, TF]
type = TargetFacing
trigger1 = time = 0
trigger1 = numtarget
value = -1

[State 890, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 890, PP]
type = PlayerPush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
persistent = 4
anim = 9302
ID = 8000
pos = 0,-70
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 1
ownpal = 1
removeongethit = 0
pausemovetime = 999999
supermovetime = 999999

[State 890, VS]
type = VelSet
trigger1 = time = 0
x = -8;-6.14
y = 0

[State 890, VM]
type = veladd;mul
trigger1 = time>=0
trigger1 = vel x < 0
x = 0.5;85

[State 890, PA]
type = posadd
triggerall = numtarget
trigger1 = target,frontedgebodydist <= abs(target,vel x + target,const(size.ground.front))
trigger1 = target,vel x > 0.0
trigger2 = target,backedgebodydist <= abs(target,vel x - target,const(size.ground.back))
trigger2 = target,vel x < 0.0
x = cond((target,pos x - pos x) * facing > 0, -abs(target,vel x), abs(target,vel x))


[State 890, CS]
type = ChangeState
trigger1 = time >= 27
value = 0
ctrl = 1
;---------------------------------------------------------------------------

[Statedef 801 - Throw State]
type    = S
movetype= A
physics = N
anim = 801+var(10)
poweradd = 0
sprpriority = 2

[state 0]
type = varset
trigger1 = time = 0
fvar(10) = 0.5

[State 801, Tech Success]
type = ChangeState
triggerall = NumTarget
triggerall = var(18)>0
trigger1 = (target,command = "holdfwd" || target,command = "holdback") && target,command != "holdup" && target,command != "holddown"
trigger1 = (target,AILevel=0)&&(target,command = "x" || target,command = "y" || target,command = "z")
trigger2 = (target,command = "holdfwd" || target,command = "holdback") && target,command != "holdup" && target,command != "holddown"
trigger2 = (target,AILevel=0)&&(target,command = "a" || target,command = "b" || target,command = "c")
value = 811

[State 810, Throw Escape]
type = VarAdd
trigger1 = var(18) > 0
var(13) = -1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10801
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 801
elem = animelemno(0)

[State 800, 声]
type = PlaySnd
trigger1 = AnimElem = 1
value = 800,1

[State 800, 声]
type = PlaySnd
trigger1 = time = 52
value = 800,0
channel = 0



[State 3001, 1]
type = Width
trigger1 = animelem = 3
edge = 75,0

[State -3, 3];腰
type = targetbind
trigger1 = animelem = 3
pos = 40,0

[State -3, 3];
type = targetstate
trigger1 = animelem = 3
value = 820


[State -3, 3];
type = targetstate
trigger1 = time = 95
value = 821

[State -3, 3];
type = targetlifeadd
trigger1 = time = 95
value = -90

[State -3, 3];
type = targetpoweradd
trigger1 = time = 95
value = 40

[State -3, 3];
type = poweradd
trigger1 = time = 95
value = 80

[State -3, 3]
type = hitadd
trigger1 = time = 95
value = 5

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 800

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 801

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 802

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 803

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 804

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 805

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 200 - X]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 200+var(10)
sprpriority = 2
facep2 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 200
elem = animelemno(0)

[State 200, 変数リセット]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 200, アニメ変更]
type = ChangeAnim
trigger1 = time = 0
value = 200
ignorehitpause = 1
persistent = 0


[State 200, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 5, 5

[State 200, 移動]
type = PosAdd
trigger1 = animelem = 2 || animelem = 4
x = 3

[State 200, 移動]
type = PosAdd
trigger1 = animelem = 3
x = 6

[State 200, ヒット定義]
type = HitDef
trigger1 = (var(24):=4)
trigger1 = time = 0
attr = S, NA 
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = 40, 0
pausetime = 8,8 
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-83)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = s5545,0
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 17
air.hittime = 12
guard.ctrltime = 15
ground.velocity = -2
guard.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
getpower= 30,30
givepower= 15,15
p2facing = 1
ID = 555
air.velocity = -1.4,-3
airguard.velocity = -3,-.8
yaccel = .35 

[State 200, 移動]
type = PosAdd
trigger1 = animelem = 7
x = -6

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.9
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(7) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

[state 0]
type = ctrlset
trigger1 = time >= 20
value = 1

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 201 - Y Attack]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = 2
facep2 = 1

[State 201, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, アニメ変更]
type = ChangeAnim
trigger1 = time = 0
value = 201
ignorehitpause = 1
persistent = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10201
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 201
elem = animelemno(0)

[State 201, 効果音]
type = PlaySnd
trigger1 = time = 6
value = 5, 5

[State 201, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 20, 1

[State 201, 効果音]
type = PlaySnd
trigger1 = animelem = 4
value = 20, 2

[State 201, 移動]
type = velset
trigger1 = time = 7
x = 5

[State 201, 移動]
type = velmul
trigger1 = time = 21
x = 0.3


[State 201, エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 321
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 201, ヒット定義]
type = HitDef
trigger1 = (var(24):=5)
trigger1 = AnimElem = 3
attr = S, NA 
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = 60, 0
pausetime = 8,8
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-76)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = s5545,0
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 20
guard.ctrltime = 10
ground.velocity = -3
guard.velocity = -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ID = 555
getpower= 50,50
givepower= 25,25
air.velocity = -1.4,-3
airguard.velocity = -3,-.8
yaccel = .35
fall.yvelocity = -4.5

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.85
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(6) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

[state 0]
type = ctrlset
trigger1 = time >= 25
value = 1

[State 201, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 210 - Z Attack]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 210+var(10)
sprpriority = -1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10210
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 210
elem = animelemno(0)

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, ぶつかり]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0 

[State 210, セリフ]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 3
channel = 0

[State 210, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 5, 0

[State 210, 効果音]
type = PlaySnd
trigger1 = animelem = 26
value = 5, 1

[State 200, 移動]
type = PosAdd
trigger1 = animelem = 4
x = 6
 
[State Explod]
Type=Explod
Trigger1=(AnimElem=5)
Anim=6007
PosType=P1
Pos=14,-72
Scale=0.65,0.75
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
ID=600
[State Explod]
Type=Explod
Trigger1=(AnimElem=5)
Anim=6007
PosType=P1
Pos=14,-72
Scale=0.65,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
ID=600

[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(5)>0;animelemtime(3)=0
trigger1 = animelemtime(7)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(5)>0;animelemtime(3)=0
trigger1 = animelemtime(7)<0
trigger1 = numhelper(20210)=0
helpertype = normal
name = "ProjAbsorb"
id = 20210
stateno = 20210
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1
 
[State 210, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage= 85
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 10,10
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-60)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,11
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 5
ground.velocity = -3
guard.velocity = -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ID = 555
getpower= 70,70
givepower= 35,35
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0
yaccel = .35
fall.yvelocity = -4.5

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.8
ignorehitpause = 1
persistent = 0

[State 210, コントロール]
type = statetypeSet
trigger1 = animelemtime(7) >= 0
movetype = I

[state 0]
type = ctrlset
trigger1 = time >= 28
value = 1

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 410 - Launcher]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
anim = 410+var(10)
sprpriority = 2
facep2 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10410
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 410
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10413
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 420
elem = animelemno(0)

[State 410, セリフ]
type = PlaySnd
trigger1 = Time = 5
value = 0, 0
channel = 0

[State 410, ステートタイプ]
type = StateTypeSet
trigger1 = animelemtime(4) = 0
statetype = S

[State 410, 効果音]
type = PlaySnd
trigger1 = Time = 5
value = 5, 0

[State 410, 移動]
type = PosSet
trigger1 = AnimElem = 1
y = 0

 
[State Explod]
Type=Explod
trigger1 = animelem = 5
Anim=6004
PosType=P1
Pos=20,-60
Scale=0.4,0.8
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = animelem = 5
Anim=6004
PosType=P1
Pos=20,-60
Scale=0.4,0.8
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
 

[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(5)>0;animelemtime(3)=0
trigger1 = animelemtime(7)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(5)>0;animelemtime(3)=0
trigger1 = animelemtime(7)<0
trigger1 = numhelper(20410)=0
helpertype = normal
name = "ProjAbsorb"
id = 20410
stateno = 20410
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1

[State 410, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = prevstateno != 450
trigger1 = time = 0
;trigger1 = prevstateno != 412
attr = S, NA
animtype = Hard
air.animtype = Back
fall.animtype = Back
damage= 90
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 10,10
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-100)
guard.sparkno = -1+0*(Var(23):=2)
sparkno = S6030
guard.sparkno = S8000
sparkxy = -10, -60
getpower = 0
hitsound = S1,11
guardsound = S6,0
ground.type = Low
air.type = High
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 10
ground.velocity = 0,-12.5
guard.velocity = -4
air.velocity = 0,-8.5
airguard.velocity = -7,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 70,70
givepower = 35,35
id = 215   
persistent = 0
yaccel = .35 

[State 410, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = prevstateno = 450
trigger1 = time = 0
;trigger1 = prevstateno != 412
attr = S, NA
animtype = Hard
air.animtype = Back
fall.animtype = Back
damage= 90
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 10,10
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
getpower = 0
hitsound = S1,11
guardsound = S6,0
ground.type = Low
air.type = High
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 10
ground.velocity = 0,-12.5
guard.velocity = -4
air.velocity = 0,-8.5
airguard.velocity = -7,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 70,70
givepower = 35,35
id = 215   
persistent = 0
yaccel = .35 

[State -2]
type = VarSet
trigger1 = movehit
var(39) =1
ignorehitpause = 1

[State 420, Custom Trip]
type = TargetState
triggerall = numtarget(215)
trigger1 = target,stateno!=[120,155]
trigger1 = movehit=1 && !movereversed
trigger1 = !target(215),ishelper
;trigger1 = target(215),time=0 && target(215),movetype=H
value = 6215
ID = 215
;ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(7) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1


[state 0]
type = ctrlset
trigger1 = time >= 37
value = 1

[State 420, 1]
type = ChangeState
triggerall = movehit
trigger1 = command = "holdup"
value = 700
ctrl = 1

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 411
ctrl = 1


[state 410, 追加入力]
type = varset
trigger1 =time = 0
var(7) = 0

[state 410, 追加入力]
type = varset
triggerall = var(59) = 0
trigger1 = Command = "z"
trigger1 = movecontact
var(7) = 1

[state 410, 追加入力]
type = varset
triggerall = var(59) != 0
trigger1 = movehit
trigger1 = var(31) = 0 
trigger1 = random <= 50
var(7) = 1

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.725
ignorehitpause = 1
persistent = 0

[State 410, ステート変更];追加入力
type = ChangeState
triggerall = var(59) = 0
triggerall = var(43) < 3
trigger1 = var(7) = 1
;trigger1 = Animelemno(0) >= 7
value = 412

[State 250, Launch Explod]
type = Explod
trigger1 = MoveHit
anim = 8520
id = 8520
pos = 0, enemyNear, Const(size.mid.pos.y) - 5
postype = p2
bindtime = 1
scale = Const(size.xscale), Const(size.yscale)
sprpriority = 2
ontop = 1
ownpal = 1
ignorehitpause = 1
trans = add
persistent = 0

[State 410, ステート変更];追加入力
type = ChangeState
triggerall = var(59) != 0
triggerall = var(43) < 3
trigger1 = var(7) = 1
trigger1 = Animelemno(0) >= 7
trigger1 = target,pos y = [-60,-10]
value = 412

[Statedef 412 - Upper Slash]
type    = S
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 412+var(10)
sprpriority = 2
facep2 = 1

[state 0]
type = varadd
trigger1 = time = 0
var(43) = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10412
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 412
elem = animelemno(0)

[State 412, セリフ]
type = PlaySnd
trigger1 = animelem = 8
value = 0, 5
channel = 0

[State 412, 効果音]
type = PlaySnd
trigger1 = animelem = 8
value = 5, 3

[State 412, 移動]
type = PosSet
trigger1 = AnimElem = 1
y = 0

 

[State 412, 移動]
type = Velset
trigger1 = time = 8
x = 15

[State 412, 移動]
type = Velset
trigger1 = time = 13
x = 0

[State Explod]
Type=Explod
trigger1 = animelemtime(8)=0
Anim=6026
PosType=P1
Pos=0,-38
Scale=0.5,0.75
BindTime=-1
Sprpriority=3
OwnPal=1
 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = animelemtime(8)=0
Anim=6026
PosType=P1
Pos=0,-38
Scale=0.5,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1

[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(8)>0;animelemtime(3)=0
trigger1 = animelemtime(10)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(8)>0;animelemtime(3)=0
trigger1 = animelemtime(10)<0
trigger1 = numhelper(20412)=0
helpertype = normal
name = "ProjAbsorb"
id = 20412
stateno = 20412
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1

[State 412, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = time = 0
attr = S, NA
animtype  = digup
damage= 75
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 10,10
getpower = 70,70
givepower = 35,35
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=75),(var(20):=-100)
guard.sparkno = -1+0*(Var(23):=2)
sparkxy = -10, -110
hitsound = S1,12
guardsound = S6,0
ground.type = High
ground.slidetime = 16
guard.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -3,5
guard.velocity = -5
air.velocity = -3,10
airguard.velocity = -5,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5  
fall.yvelocity = -9
id = 412

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.8
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(10) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

[state 641]
type = TargetState
trigger1 = movehit 
trigger1 = !target,ishelper
;trigger1 = var(31) = 0
trigger1 = target,statetype = A
trigger1 = target,movetype = H
value = 6180
ID = 412
persistent = 0

[state 641]
type = varset
trigger1 = movehit = 3
trigger1 = var(31) !=1
trigger1 = target(412),stateno = 6180
var(31) = 1

[state 410, 追加入力]
type = varset
trigger1 =time = 0
var(7) = 0

[state 410, 追加入力]
type = varset
triggerall = var(59) = 0
trigger1 = Command = "c"
trigger1 = movecontact
var(7) = 1

[state 410, 追加入力]
type = varset
triggerall = var(59) != 0
trigger1 = movehit = 1
var(7) = 1

[State 410, ステート変更];追加入力
type = ChangeState
triggerall = var(59) = 0 
trigger1 = var(7) = 1
trigger1 = Animelemno(0) >= 13
value = 410

[State 410, ステート変更];追加入力
type = ChangeState
triggerall = var(59) != 0 
trigger1 = var(7) = 1
trigger1 = Animelemno(0) >= 13
value = 410

[State 412, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 413
ctrl = 1

;Stinger
[Statedef 250]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = -2
facep2 = 1

[state 250,判定リセット]
type = varset
trigger1 = time <=1
var(19) = 0
ignorehitpause = 0

[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[State 1100, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, セリフ]
type = PlaySnd
trigger1 = AnimElemTime(2) = 2
value = 1100, 0
channel = 0

[State 1100, 速度]
type = velset
trigger1 = AnimElem = 3
x = 10

[State 1100, 速度]
type = velset
trigger1 = AnimElem = 4
x = 15

[State Explod]
Type=Explod
Trigger1=(AnimElem=3)
Anim=6029
PosType=P1
Pos=20,-76
Scale=0.5,0.5
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
Angle=90
Persistent=0
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
Trigger1=(AnimElem=3)
Anim=6029
PosType=P1
Pos=20,-76
Scale=0.5,0.5
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
Angle=90
Persistent=0
RemoveTime=-2
RemoveOnGetHit=1

[State 1100, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = animelem = 3 || animelem = 4
attr = S, NA
animtype  = hard
damage= 80
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,10
guardsound = S6,0
ground.type = low
getpower = 80,80
givepower = 40,40
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -5
guard.velocity = -8
air.velocity = -17,3
airguard.velocity = -6,-1
persistent = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
id = 1100

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.75
ignorehitpause = 1
persistent = 0

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,movetype = H
trigger1 = var(32) = 0
value = 3260
ID = 1100
ignorehitpause = 1
persistent = 0

[state 641]
type = varset
trigger1 = numtarget(1100)
trigger1 = movehit = 1
trigger1 = var(32) !=1 
var(32) = 1
ignorehitpause = 1
persistent = 0


[State 1100, ステート変更]
type = ChangeState
trigger1 = FrontEdgeBodyDist < 30
trigger1 = time > 12
trigger2 = time > 18
value = 251
ctrl = 0

[State 1100, ステート変更]
type = ChangeState
trigger1 = movecontact
value = 252
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 251 - Stinger]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = -2

[State 1110, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1110, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1110, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1


[State 1110, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1110, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1


[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[State 1110, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = animelem = 1
attr = S, NA
animtype  = heavy
damage= 80
priority  = 4, Hit
hitflag = MAF
guardflag = M
pausetime = 8,8
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,10
guardsound = S6,0
ground.type = low
getpower = 80,80
givepower = 40,40
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -17,0
airguard.velocity = -6,-1
persistent=0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
nochainID = 1100

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.75
ignorehitpause = 1
persistent = 0

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,movetype = H
trigger1 = var(32) = 0
value = 3260
ID = 1100
ignorehitpause = 1
persistent = 0

[state 641]
type = varset
trigger1 = numtarget(1100)
trigger1 = movehit = 1
trigger1 = var(32) !=1 
var(32) = 1
ignorehitpause = 1
persistent = 0

[State 1110, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[Statedef 252 - Stinger End]
type    = S
movetype= I
physics = S
juggle  = 6
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = -2

[State 1200, 効果音]
type = PlaySnd
trigger1 = target,stateno = 3261
trigger1 = target,time = 1
value = S1,2
abspan = target,pos x

[State 1120, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1120, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1120, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1

[state 0]
type = ctrlset
trigger1 = time >= 33
value = 1

[State 1120, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 460 - High Time]
type = S
movetype = A
anim = 2600
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 0

[State 2600,StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 10
statetype = A
physics = A

[State 2600, 速度]
type = VelSet
trigger1 = Animelem = 10
x = 1.5
y = -10


[State 2600, 速度]
type = VelAdd
trigger1 = AnimElem = 17
trigger2 = AnimElem = 18
trigger3 = AnimElem = 19
y = 1.5

[State 3650, Sonic Blade]
type=helper
trigger1= animelem=5
helpertype=normal
stateno=3655
ID=3650
name="Sonic Blade"
postype=p1
pos=-20,-75
size.xscale=.53
size.yscale=.44
supermovetime=5
ownpal=1
 
[State 1100, HitDef]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = AnimElemTime(5) >= 0 
attr = S, NA
animtype = Hard
air.animtype = Back
fall.animtype = Back
damage= 100
priority  = 4, Hit
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound   = S1,1
guardsound = S6,0
ground.type = Low
air.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -1,-15
guard.velocity = -8
air.velocity = -1,-15
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
getpower= 80,80
givepower= 40,40
envshake.time = 10
envshake.ampl = 3
yaccel = .5
persistent = 0
ID = 215

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.5
ignorehitpause = 1
persistent = 0

[State 420, Custom Trip]
type = TargetState
triggerall = numtarget(215)
trigger1 = target,stateno!=[120,155]
trigger1 = movehit=1 && !movereversed
trigger1 = !target(215),ishelper
;trigger1 = target(215),time=0 && target(215),movetype=H
value = 6215
ID = 215
;ignorehitpause = 1
persistent = 0

[state 2600]
type = varadd
trigger1 = movehit = 1
v = 33
value= 1

[state 2600]
type = varset
trigger1 = movehit = 1
v = 34
value= 1


[State 2600, セリフ]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2600,0
channel = 0

[state 2600]
type = changestate
trigger1 = command = "z"
trigger1 = animelemtime(13) >= 0
value = 2010

[State 2600, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 5
value = 2003

[Statedef 430 - d.X Attack]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 0
ctrl = 0
anim = 430+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10430
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 430
elem = animelemno(0)

[State 430, セリフ]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random = [0,499]
value = 0, 2

[State 430, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 3300, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 431
ID = 431
scale = 0.5,0.5
postype = p1
pos = 25,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1 

[State 430, ヒット定義]
type = HitDef
trigger1 = (var(24):=4)
trigger1 = Time = 0
attr = C, NA
damage    = 45
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 8,8
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-13)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = 5, 1
guardsound = s5545,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -2
air.velocity = -2,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
getpower= 30,30
givepower= 15,15
p2facing = 1
ID = 555
fall.yvelocity = -4.5

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.9
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(3) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[Statedef 440 - d.Y Attack]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 0
ctrl = 0
anim = 440+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10440
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 440
elem = animelemno(0)

[State 440, セリフ]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random = [0,600]
value = 0, 0

[State 440, 効果音]
type = PlaySnd
trigger1 = Time = 4
value = 2, 1

[State 3300, エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 441
ID = 441
scale = 0.5,0.5
postype = p1
pos = 15,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1
 

[State 440, ヒット定義]
type = HitDef
trigger1 = (var(24):=5)
trigger1 = Time = 0
attr = C, NA
damage    = 63
animtype  = mid
hitflag = MAF
guardflag = L
pausetime = 8,8
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=70),(var(20):=-10)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = 5, 1
guardsound = s5545,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -3
air.velocity = -1.2,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
getpower= 50,50
givepower= 25,25
p2facing = 1
ID = 555
fall.yvelocity = -4.5

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.85
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(5) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[Statedef 450 - d.Z Attack]
type = C
movetype = A
physics = S
anim = ifelse(numhelper(3800)=1,5951,450+var(10))
velset = 0,0
juggle  = 1
ctrl = 0
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10450
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value =450
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 300, 移動]
type = PosAdd
trigger1 = animelemtime(2) = 0
x = 15

[State 300, 移動]
type = PosAdd
trigger1 = animelemtime(3) = 0
x = 5

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 3
channel = 0
value = 0,0


[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 5,0

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 11
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0
 
[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(3)>0;animelemtime(3)=0
trigger1 = animelemtime(5)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(3)>0;animelemtime(3)=0
trigger1 = animelemtime(5)<0
trigger1 = numhelper(20450)=0
helpertype = normal
name = "ProjAbsorb"
id = 20450
stateno = 20450
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1

[State 1200, ヒット定義]
type = Hitdef
trigger1 = (var(24):=6)
trigger1 = time = 0
attr = C, NA
hitflag = MAF
guardflag = L
animtype = back
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=90),(var(20):=-30)
guard.sparkno = -1+0*(Var(23):=2)
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = 80
pausetime = 10,10
hitsound = S1, 11
guardsound = 1, 0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -3,-8.5
guard.velocity = -5.5
air.velocity = -3, -8
airguard.velocity = -5.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
getpower= 70,70
givepower= 35,35
p2facing = 1
ID = 420      
persistent = 0
fall = 1
yaccel = .5
fall.yvelocity = -4.5

[State 420, Custom Trip]
type = TargetState
triggerall = numtarget(420)
trigger1 = target,stateno!=[120,155]
trigger1 = movehit=1 && !movereversed
trigger1 = !target(420),ishelper
trigger1 = target(420),time=0 && target(420),movetype=H
value = 470
ID = 420
ignorehitpause = 1
persistent = 0

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.8
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(5) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

[State Explod]
Type=Explod
Trigger1=(AnimElem=3)
Anim=6011
PosType=P1
Pos=20,-48
Scale=0.5,0.65
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
Trigger1=(AnimElem=3)
Anim=6011
PosType=P1
Pos=20,-48
Scale=0.5,0.65
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
 
[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

[Statedef 600 - j.X Attack]
type    = A
movetype= A
physics = A
juggle  = 1
poweradd= 0
ctrl = 0
anim = 630+var(10)
sprpriority = 2

[state 0]
type = null;veladd
trigger1 = var(39) = 1
trigger1 = animelemtime(4) = 0
y = -1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10630
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 630
elem = animelemno(0)

[State 630, 大きさ]
type = AngleDraw
trigger1 = 1
scale = 0.94,0.94

[State 630, 大きさ]
type = AngleDraw
trigger1 = animelem = 7
scale = 1.06,1.06

[State 630, セリフ]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random%2 = 1
value = 0, 2

[State 630, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 2, 2 

[State 630, ヒット定義]
type = HitDef
trigger1 = (var(24):=4)
trigger1 = Time = 0
attr = A, NA
damage = 43
guardflag = HA
hitflag = MAF
priority = 4,Hit
pausetime = 8,8
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-13)
guard.sparkno = -1+0*(Var(23):=2)
hitsound   = s5545,0
guardsound = S6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 20
ground.velocity = -4
air.velocity = -1,-4.5
air.hittime = 15 
getpower = 30,30
givepower = 15,15
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
ID = 555

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.9
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(6) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

;-----------------------------------------
[Statedef 610 - j.Y Attack]
type    = A
movetype= A
physics = A
juggle  = 1
poweradd= 0
ctrl = 0
anim = 610+var(10)
sprpriority = 2

[state 0]
type = veladd
trigger1 = var(39) = 1
trigger1 = animelemtime(5) = 0
y = -1

[state 610]
type = varset
trigger1 = time = 0
var(6) = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10610
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 610
elem = animelemno(0)
 

[State 600, セリフ]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = random = [0,500]
value = 0, 0
channel = 0

[State 600, 効果音]
type = PlaySnd
trigger1 = animelem = 2
value = 5, 0

[State Explod]
Type=Explod
Trigger1=(AnimElem=6)
Anim=6007
PosType=P1
Pos=24,-62
Scale=0.5,0.75
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
ID=610
[State Explod]
Type=Explod
Trigger1=(AnimElem=6)
Anim=6007
PosType=P1
Pos=24,-62
Scale=0.5,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
ID=610

[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(6)>0;animelemtime(3)=0
trigger1 = animelemtime(9)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(6)>0;animelemtime(3)=0
trigger1 = animelemtime(9)<0
trigger1 = numhelper(20610)=0
helpertype = normal
name = "ProjAbsorb"
id = 20610
stateno = 20610
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1

[State 600, ヒット定義]
type = HitDef
trigger1 = (var(24):=4)
trigger1 = Time = 0
attr = A, NA
damage = 65
guardflag = HA
priority = 4, Hit
pausetime = 8,8
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=90),(var(20):=-40)
guard.sparkno = -1+0*(Var(23):=2)
sparkxy = -50,-55
hitsound   = S1,10
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = -5
air.velocity = -1,-4
air.cornerpush.veloff = 0
ground.hittime = 20
air.hittime = 20
getpower = 50,50
givepower = 25,25
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
ID = 555 

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.85
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(9) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

;[state 610]
;type = varset
;trigger1 = command = "y"
;var(6) = 1

[state 610]
type = Changestate
trigger1 = var(59) = 0
;trigger1 = var(6) = 1
trigger1 = command = "y"
trigger1 = animelemno(0) >= 7
value = 609

[state 610]
type = changestate
trigger1 = var(59) != 0
;trigger1 = var(6) = 1
trigger1 = movecontact
trigger1 = animelemno(0) = 7
value = 609

[State 600, StateTypeSet]
type = null;StateTypeSet
trigger1 = animelem = 9
physics = A

[Statedef 609 - j.Y Attack Follow Up]
type    = A
movetype= A
physics = A
juggle  = 1
poweradd= 0
ctrl = 0
anim = 610+var(10)
sprpriority = 2

[state 0]
type = veladd
trigger1 = var(39) = 1
trigger1 = animelemtime(5) = 0
y = -2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10610
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 610
elem = animelemno(0)

[State 600, セリフ]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = random = [0,500]
value = 0, 0
channel = 0

[State 600, 効果音]
type = PlaySnd
trigger1 = animelem = 2
value = 5, 0

[State Explod]
Type=Explod
Trigger1=(AnimElem=6)
Anim=6007
PosType=P1
Pos=24,-62
Scale=0.5,0.75
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
ID=609
[State Explod]
Type=Explod
Trigger1=(AnimElem=6)
Anim=6007
PosType=P1
Pos=24,-62
Scale=0.5,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
ID=609

[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(6)>0;animelemtime(3)=0
trigger1 = animelemtime(9)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(6)>0;animelemtime(3)=0
trigger1 = animelemtime(9)<0
trigger1 = numhelper(20610)=0
helpertype = normal
name = "ProjAbsorb"
id = 20610
stateno = 20610
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1

[State 600, ヒット定義]
type = HitDef
trigger1 = (var(24):=4)
trigger1 = Time = 0
attr = A, NA
damage = 65
guardflag = HA
priority = 4
pausetime = 8,8
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=90),(var(20):=-40)
guard.sparkno = -1+0*(Var(23):=2)
getpower = 40,40
givepower = 20,20 
hitsound   = S1,10
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = -5
air.velocity = -1,-4
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -5
numhits = 1
ground.hittime = 20
air.hittime = 20
fall.recovertime = 30
fall.yvelocity = -4.5

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.8
ignorehitpause = 1
persistent = 0

[State 600, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
physics = A

;---------------------------------------------------------------------------
[Statedef 620 - j.Z Attack]
type    = A
movetype= A
physics = A
juggle  = 1
poweradd= 0
ctrl = 0
anim = ifelse(numhelper(3800)=1,5952,611+var(10))
sprpriority = 2

[state 0]
type = veladd
trigger1 = var(39) = 1
trigger1 = animelemtime(4) = 0
y = -5

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10610
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 610
elem = animelemno(0)

[State 610, 効果音]
type = PlaySnd
trigger1 = animelem = 2
value = 5, 3
channel = 0

[State 610, セリフ]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 5

[State Explod]
Type=Explod
Trigger1=(AnimElem=4)
Anim=6011
PosType=P1
Pos=44,-88
Scale=0.5,0.85
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
Angle=360
RemoveTime=-2
RemoveOnGetHit=1
ID=620
ignorehitpause = 0
[State Explod]
Type=Explod
Trigger1=(AnimElem=4)
Anim=6011
PosType=P1
Pos=44,-88
Scale=0.5,0.85
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
Angle=360
RemoveTime=-2
RemoveOnGetHit=1
ID=620
ignorehitpause = 0

[State 1100, ProjInv]
type = nothitby
trigger1 = animelemtime(5)>0;animelemtime(3)=0
trigger1 = animelemtime(7)<0
value = ,AP 

[State 2000, Spellcard Effect]
type = helper
trigger1 = animelemtime(5)>0;animelemtime(3)=0
trigger1 = animelemtime(7)<0
trigger1 = numhelper(20610)=0
helpertype = normal
name = "ProjAbsorb"
id = 20620
stateno = 20620
pos = 0,0
postype = p1
ownpal = 1
facing = 1
supermovetime=999
ignorehitpause = 1
 
[State 610, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = Time = 0
attr = A, NA
damage = 88
guardflag = HA
priority = 4, Hit
pausetime = 10,10

sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=90),(var(20):=-60)
guard.sparkno = -1+0*(Var(23):=2)
hitsound   = S1,12
guardsound = S6,0
animtype = heavy
getpower = 70,70
givepower = 35,35
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
ID = 555
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.hittime = 22
air.velocity = -1,-2

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.8
ignorehitpause = 1
persistent = 0

[State -2, FLAG RECOVERY FRAMES]
type = statetypeset
trigger1 = animelemtime(8) >= 0
trigger2 = movecontact||movereversed
movetype = I
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------

[Statedef 630 - Star Fall]
type = A
movetype = A
physics = N
anim = 1500
ctrl = 0
poweradd = 0
velset = 0,0
juggle = 1

[state 0]
type = velset
triggerall = time = 0
trigger1 = var(39) = 1
trigger2 = var(25) = 1
y = -4

[State 1500, セリフ]
type = PlaySnd
trigger1 = time = 15
value = 1500,0

[State 1500, 速度]
type = velset
trigger1 = time = 18
x = 16
Y = 15

[State 1500, 幅]
type = Width
trigger1 = 1
edge = 5,0
 
[State Helper]
Type=Helper
trigger1 = time = 16
HelperType=Normal
ID=1770
Pos=0,0
OwnPal=1
PosType=P1
StateNo=1752
Persistent=0
 
[State 1500, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = var(39) = 1
trigger1 = AnimElem = 7
attr = A, NA
damage = 90
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 10,10
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=55),(var(20):=40)
guard.sparkno = -1+0*(Var(23):=2)
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -25, 15
airguard.velocity = -6.67,-1
getpower = 70,70
givepower = 35,35
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
envshake.time = 10
envshake.ampl = 3
forcestand = 1
fall.xvelocity = -6
fall.yvelocity = -8 
p2stateno = 7715
id = 630


[State 1500, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = var(39) = 0
trigger1 = AnimElem = 7
attr = A, NA
damage = 90
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 10,10
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=55),(var(20):=40)
guard.sparkno = -1+0*(Var(23):=2)
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = -16, 15
airguard.velocity = -6.67,-1
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 70,70
givepower = 35,35
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
envshake.time = 10
envshake.ampl = 3
forcestand = 1
fall.xvelocity = -2
fall.yvelocity = -8 
ID = 1500

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.8
ignorehitpause = 1
persistent = 0

[state 641]
type = TargetState
trigger1 = movehit = 2
trigger1 = !target,ishelper
trigger1 = var(31) = 0
trigger1 = target,movetype = H
value = 6180
ID = 1500

[state 641]
type = varset
trigger1 = movehit = 3
trigger1 = var(31) !=1
trigger1 = target(1500),stateno = 6180
var(31) = 1

[State 1500, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 631

 
;---------------------------------------------------------------------------
;流星脚
[Statedef 634]
type = A
movetype = A
physics = N
anim = 21500
ctrl = 0
poweradd = 0
velset = 0,0
juggle = 1
 
[State 1500, セリフ]
type = PlaySnd
trigger1 = time = 3
value = 1500,0

[State 1500, 速度]
type = velset
trigger1 = time = 6
x = 16
Y = 15

[State 1500, 幅]
type = Width
trigger1 = 1
edge = 5,0

[State 1500, エフェクト]
type = Explod
trigger1 = time = 4
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 1500, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
damage = 45
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -16, 15
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 70,70
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1
fall.xvelocity = -2
fall.yvelocity = -8 
ID = 1500

[state 641]
type = TargetState
trigger1 = movehit = 2
trigger1 = !target,ishelper
trigger1 = var(31) = 0
trigger1 = target,statetype = A
trigger1 = target,movetype = H
value = 6180
ID = 1500
persistent = 0

[state 641]
type = varset
trigger1 = movehit = 3
trigger1 = var(31) !=1
trigger1 = target(1500),stateno = 6180
var(31) = 1
 
[State 1500, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 631
;---------------------------------------------------------------------------

[Statedef 631 - Dive Kick Recover]
type    = S
physics = S
ctrl = 0
anim = 1510
velset = 0,0

[state 0]
type = varset
trigger1 = time = 0
var(39) = 0

[State 1510, 移動]
type = PosSet
trigger1 = Time = 0
y = 0
 

[State 1510, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

[Statedef 640 - Helmet Breaker]
type = A
movetype = A
physics = N
anim = ifelse(numhelper(3800)=1,5953,1300)
ctrl = 0
poweradd = 0
velset = 0,0
juggle = 1

[State 1300, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,2

[State 1300, 変数];高さ
type = Varset
trigger1 = time = 0
v = 11
value = ceil(pos Y)

[State 1300, セリフ]
type = PlaySnd
trigger1 = time = 3
value = 1300,1+var(13)
channel = 0

[State 1300, 速度]
type = velset
trigger1 = animelem = 1
x = 0
Y = 0

[State 1300, 速度]
type = velset
trigger1 = animelem = 2
x = 0
Y = 9

[State 1300, 速度]
type = velset
trigger1 = animelem = 4
x = 0
Y = 16

[State 1300, 速度]
type = VelAdd
trigger1 = animelem = 3
y = .4 

[State 1300, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = time = 0
attr = A, NA
damage = 70
animtype = Heavy
guardflag = HA
hitflag = MAFD
air.animtype = back
fall.animtype = back
hitsound = s1,12
guardsound = S6,0
pausetime = 10,10
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = 0,15
guard.velocity = -8
air.velocity = 0, 15
airguard.velocity = -6.67,-1
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30,30
givepower = 15,15
envshake.time = 10
envshake.ampl = 3
forcestand = 1
ID = 640

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.9
ignorehitpause = 1
persistent = 0

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,movetype = H
value = 6080
ID = 640

[State 1300, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 641

;---------------------------------------------------------------------------

[Statedef 641 - Helmet Breaker]
type    = S
physics = S
movetype = A
ctrl = 0
anim = ifelse(numhelper(3800)=1,5954,1301)
velset = 0,0 

[State 1301, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = animelem = 1
attr = A, NA
damage = 40
animtype = Heavy
guardflag = HA
hitflag = MAFD
air.animtype = back
fall.animtype = back
hitsound = s1,12
guardsound = S6,0
pausetime = 10,10
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=0)
guard.sparkno = -1+0*(Var(23):=2)
ground.type = High
ground.slidetime = 20
ground.hittime  = 60
guard.ctrltime = 20
ground.velocity = 0,8
guard.velocity = -8
air.velocity = 0, 8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30,30
givepower = 15,15
air.hittime = 24
down.bounce = 1
fall = 1
fall.recover = 0
air.fall = 1
yaccel = .5
envshake.time = 10
envshake.ampl = 3
forcestand = 1
ID = 641

[State 200, Damage Dampen]
type = varset
trigger1 = movehit
fvar(10) = fvar(10)*0.9
ignorehitpause = 1
persistent = 0

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = ((var(30) = [0,1]) || palno >= 11)
trigger1 = target(641),movetype = H
value = 6080
ID = 641

[state 641]
type = varadd
trigger1 = movehit = 1
trigger1 = var(30) < 2
trigger1 = target(641),stateno = 6080
var(30) = 1

[State 1301, StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 2
movetype = I

[State 1301, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300,4

[State 1301, 効果音]
type = PlaySnd
trigger1 = time = 1
value = 1300,0

[State 1301, 効果音]
type = PlaySnd
trigger1 = animelem = 15
value = 5,1

[State 1301, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, FX]
type = Explod
trigger1 = time = 0
anim = 1150
ID = 1460
pos = 65,-75
postype = p1
scale = 0.4,0.4
sprpriority = 2
ontop = 1
ownpal = 1
 
[State -1, エフェクト画像];石礫1
type = Explod
trigger1 = time = 0
anim = 14000
pos = 60, 10
postype = p1
scale = 0.7,0.7
bindtime = 1
sprpriority = -1
ownpal = 0
pausemovetime = 9999999
removeongethit = 1
vel = 0,0
facing = 1
vfacing = 1

[State -1, エフェクト画像];衝撃波
type = Explod
trigger1 = time = 0
anim = 14520
pos = 60, 10
postype = p1
scale = 0.5,0.2
bindtime = 1
sprpriority = -2
ownpal = 0
pausemovetime = 9999999
removeongethit = 1
vel = 0,0
facing = 1
vfacing = 1

[State 1301, コントロール]
type = CtrlSet
trigger1 = Animelem = 14
value = 1

[State 1301, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
;ジャンプ開始
[Statedef 40]
type    = S
physics = S
anim = 40+var(10)
ctrl = 0
velset = 0,0

[State 40, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP


[State 40, 1]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 1]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = Random = [0,200]
sysvar(1) = 0

[State 40, 2]
type = VarSet
Trigger1 = var(59) = 0
Trigger1 = command = "holdfwd"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType != L || P2BodyDist X >= 30
Trigger2 = Random <= 333 || EnemyNear,StateType = L
sysvar(1) = 1

[State 40, 3]
type = VarSet
Trigger1 = var(59) = 0
Trigger1 = command = "holdback"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType != L
Trigger2 = EnemyNear,MoveType != H
Trigger2 = BackEdgeBodyDist>60
Trigger2 = Random <= 200
sysvar(1) = -1


[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 4];ハイジャンプ判定
type = VarSet
triggerall = Time = 0
triggerall = var(59) = 0
trigger1 = (PrevStateNo = 100 || PrevStateNo = 101) && sysvar(1) = 1
trigger2 = Command = "longjump"
trigger3 = Command = "longjump" && Command = "holdfwd"
trigger4 = Command = "longjump" && Command = "holdback"
var(3) = 1

[State 40, 4]
type = VarSet
triggerall = var(59) = 1
triggerall = Time = 0
trigger1 = PrevStateNo = 100 || PrevStateNo = 101
trigger2 = Random = [0,300]
var(3) = 1


[State 40, 4];小ジャンプ判定
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 5]
type = VarSet
triggerall = var(59) = 0
trigger1 = command != "holdup"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = var(59)
trigger1 = Random = [0,50]
var(4) = 1

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(3)
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x) * (1 + (.6*numhelper(3803))), const(velocity.jump.back.x) * (1 + (.6*numhelper(3803)))))

[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(3)
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x) * (1 + (.6*numhelper(3803))), const(velocity.runjump.back.x) * (1 + (.6*numhelper(3803)))))

[State 40, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(4)
y = ifelse(Var(3) && !SysVar(1), const(velocity.jump.y)*1.15* (1 + (.6*numhelper(3803))), const(velocity.jump.y)* (1 + (.6*numhelper(3803))))

[State 40, 9]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(4)
y = ifelse(Var(3) && !SysVar(1), const(velocity.jump.y)*1.15* (1 + (.6*numhelper(3803)))*.75, const(velocity.jump.y)* (1 + (.6*numhelper(3803)))*.75)

[State 40, 5]
type = PlaySnd
trigger1 = time = 1
value = 41, 0
volume = 255

[State 40, 10]
type = veladd
trigger1 = vel y > 0
y = const(movement.yaccel) * (.75*numhelper(3803))

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ
[Statedef 50]
type    = A
physics = N
facep2 = 1

[State 40, 10]
type = veladd
trigger1 = 1
y = const(movement.yaccel) * (.75*numhelper(3803))

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10040
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 40
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10041
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10042
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 42
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10050
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 50
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10051
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 51
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10052
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 52
elem = animelemno(0)

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !Var(4)
value = ifelse((vel x)=0, 41+var(10), ifelse((vel x)>0, 42+var(10), 43+var(10)))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Var(4)
value = ifelse((vel x)=0, 51+var(10), ifelse((vel x)>0, 52+var(10), 53+var(10)))


[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3


[State 50, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------------------------
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10170
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 170
elem = animelemno(0)

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S

[State 180, ステート変更]
type = ChangeState
trigger1 = prevstateno = 3509
value = 182

[State 180, ステート変更]
type = ChangeState
trigger1 = 1
value = 183;ifelse(random%2=0,181,183)

;---------------------------------------------------------------------------

;勝利ポーズ１
[Statedef 181]
type = S
ctrl = 0
anim = 182+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10182
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 182
elem = animelemno(0)

[State 181, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 181, セリフ]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = p2name = "dante"
trigger1 = var(48) >= 1
value = 180,3

[State 181, セリフ]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = P2name != "dante"
trigger2 = animelem = 2
trigger2 = p2name = "dante"
trigger2 = var(48) = 0
value = 181,ifelse(var(13),0,3)

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;勝利ポーズ２
[Statedef 183]
type = S
ctrl = 0
anim = 183+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10183
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 183
elem = animelemno(0)


[state 180]
type = varset
trigger1 = time = 0
var(48) = 1

[State 181, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 181, セリフ]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = p2name = "dante"
value = 180,3

[State 181, セリフ]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = p2name != "dante"
value = 181,ifelse(var(13),0,4)

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;---------------------------------------------------------------------------
;勝利ポーズ（絶刀後）
[Statedef 182]
type = S
ctrl = 0
anim = 3507
velset = 0,0

[State 182, 大きさ]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 182, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;イントロ
[Statedef 191]
type = S
ctrl = 0
velset = 0,0
anim = 0

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, 1]
type = Changestate
trigger1 = p2name = "dante"
trigger1 = p2stateno = 193
value = 193

[State 191, 1]
type = Changestate
trigger1 = p2name = "dante"
trigger1 = p2stateno = 194
value = 194

[State 191, 1]
type = Changestate
trigger1 = time > 1
value = 192

;---------------------------------------------------------------------------
; Introduction
[Statedef 192]
type = S
ctrl = 0
velset = 0,0
anim = 191

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0


[State 100, 1]
type = playsnd
trigger1 = anim = 191
trigger1 = animelemtime(1)=30
trigger1 = !p2name = "dante"
value = 181,ifelse(random%2=0,3,5)

[State 100, 1]
type = playsnd
trigger1 = anim = 191
trigger1 = animelemtime(1)=30
trigger1 = p2name = "dante"
value = 180,1

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 193]
type = S
ctrl = 0
velset = 0,0
anim = 0

[State 191, 1]
type = Width
trigger1 = 1
edge = 43,43

[State 191, 1]
type = posadd
trigger1 = time = 0
x = 117

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, 1]
type = Turn
trigger1 =p2dist X < 0
trigger1 = time = 0
persistent = 0

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 0
trigger1 = time = 25
value = 300

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 4
anim = 301
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 10
anim = 302
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 4
value = 300, 2
channel = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 21
value = 300, 1

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 3 || animelem = 4
x = 5

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = time = 4 || time = 6
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 10
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 11
x = 6

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 12
x = 3


[State 191, 1]
type = ChangeAnim
trigger1 = anim = 300
trigger1 = animelemtime(17) = 1
value = 900

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 900
trigger1 = animelemtime(5) = 1
value = 901

[State 210, 1]
type = PlaySnd
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
value = 1300, 4

[State 300, エフェクト]
type = Explod
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
anim = f3
postype = p1
pos = 50,-50
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 191, 1]
type = Changeanim
trigger1 = anim = 901
trigger1 = animelemtime(5) = 1
value = 1200

[State 1200, セリフ]
type = PlaySnd
trigger1 = anim = 1200
trigger1 = AnimElem = 7
channel = 0
value = 1200,1

[State 1200, 効果音]
type = PlaySnd
trigger1 = anim = 1200
trigger1 = AnimElem = 8
value = 190,2

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, 速度]
type = veladd
trigger1 = anim = 1200
trigger1 = animelemtime(1) >= 5
trigger1 = animelemtime(9) < 5
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = anim = 1200
trigger1 = animelem = 4
x = 1

[State 1200, 速度]
type = velset
trigger1 = anim = 1200
trigger1 = animelemTime(8) = 2
x = 20

[State 1200, 速度]
type = velset
trigger1 = anim = 1200
trigger1 = FrontEdgeBodyDist < 40
x = 0

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 191, 1]
type = Turn
triggerall = anim = 1200
trigger1 = animtime = 0

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 1200
trigger1 = animtime = 0
value = 195

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 195
value = 700,0
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 20
trigger1 = anim = 195
value = 800,0
channel = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 195
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 194]
type = S
ctrl = 0
velset = 0,0
anim = 0

[State 191, 1]
type = Width
trigger1 = 1
edge = 43,43

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 0
trigger1 = time = 25
value = 300

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 4
anim = 301
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 10
anim = 302
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 4
value = 300, 2
channel = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 21
value = 300, 1

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 3 || animelem = 4
x = 5

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = time = 4 || time = 6
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 10
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 11
x = 6

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 12
x = 3


[State 191, 1]
type = ChangeAnim
trigger1 = anim = 300
trigger1 = animelemtime(17) = 1
value = 900

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 900
trigger1 = animelemtime(5) = 1
value = 901

[State 210, 1]
type = PlaySnd
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
value = 1300, 4

[State 300, エフェクト]
type = Explod
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
anim = f3
postype = p1
pos = 50,-50
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, 移動]
type = velset
trigger1 = anim = 901
trigger1 = animelemtime(1) = 1
x = -5

[State 300, 移動]
type = velmul
trigger1 = anim = 901 || anim = 192
x = 0.82

[State 191, 1]
type = Changeanim
trigger1 = anim = 901
trigger1 = animelemtime(5) = 1
value = 192

[State 950, 効果音]
type = PlaySnd
trigger1 = anim = 192
trigger1 = animelem = 4
value = 1400, 0
channel = 2

[State 950, 効果音]
type = StopSnd
trigger1 = anim = 192
trigger1 = animelem = 30
channel = 2

[State 950, エフェクト]
type = Explod
trigger1 = anim = 192
trigger1 = animelem = 10
anim = 952
ID = 952
scale = 0.6,0.6
postype = p1
pos = -25,10
sprpriority = 5
ownpal = 1
bindtime = -1
removetime = 42


[State 950, エフェクト]
type = Explod
trigger1 = anim = 192
trigger1 = animelem = 29
anim = 953
ID = 953
scale = 0.6,0.6
postype = p1
pos = -25,10
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1
persistent = 0

[State 951, 効果音]
type = PlaySnd
trigger1 = anim = 192
trigger1 = animelem = 33
value = 5, 1

[State 951, エフェクト]
type = Explod
trigger1 = anim = 192
trigger1 = animelem = 34
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -7,-67
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 192
trigger1 = animtime = 0
value = 195

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 195
value = 700,0
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 20
trigger1 = anim = 195
value = 800,0
channel = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 195
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2

[state 50, 1]
type = changeanim
trigger1 = time = 0
value = ifelse(random%2=0,195+var(10),182+var(10))

[State 195, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10182
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 182
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10195
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 195
elem = animelemno(0)

[State 195, コントロール]
type = CtrlSet
trigger1 = animelem = 24 
trigger1 = anim = 182 || anim = 10182
trigger2 = animelem = 33
trigger2 = anim = 195 || anim = 10195
value = 1     

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 8
trigger1 = anim = 195 || anim = 10195
trigger1 = var(13) = 0
value = 181,4
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 195 || anim = 10195
trigger1 = var(13) = 1
value = 700,0
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 20
trigger1 = anim = 195 || anim = 10195
trigger1 = var(13) = 1
value = 800,0
channel = 0


[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 1
trigger1 = anim = 182 || anim = 10182
value = 190,0
channel = 0

[State 195, 効果音]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 182 || anim = 10182
value = 20,0

[State 195, 効果音]
type = PlaySnd
trigger1 = AnimElem = 12
trigger1 = anim = 182 || anim = 10182
value = 5,4

[State 195, 効果音]
type = PlaySnd
trigger1 = AnimElem = 22
trigger1 = anim = 182 || anim = 10182
value = 190,2

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラン
[Statedef 100]
type    = S
physics = S
anim = 100+var(10)
sprpriority = 1
 

[State 100, 移動]
type = VelSet
trigger1 = numhelper(3800)=0
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 移動]
type = VelSet
trigger1 = numhelper(3800)=1
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)*1.5

[state 100, アニメ変更];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10100
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 100
elem = animelemno(0)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoturn

[State 100, ステート変更]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 効果音]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = 100,0
channel = 20


[State 100, ステート変更]
type = ChangeState
triggerall = var(59) = 0
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101
ctrl = 1

[State 100, ステート変更]
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(2) >= 1
trigger1 = P2BodyDist X <= 45 && Random <= 700
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
trigger3 = roundstate != 2
value = 101
ctrl = 1

;---------------------------------------------------------------------------
;ラン停止
[Statedef 101]
type = S
physics = N
ctrl = 1
anim = 101+var(10)

[State 101, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "holdup"
value = 40

[State 101, 効果音止め]
type = StopSnd
trigger1 = time = 0
channel = 20

[State 101, 摩擦]
type = VelMul
trigger1 = 1
x = .5

[State 101, 止まる]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 101, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
;===========================================================================

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;納刀
[Statedef 411]
type    = s
movetype= I
physics = C
juggle  = 0
ctrl = 0
anim = 411+var(10)
sprpriority = 2
movehitpersist = 1

[State 330, コントロール]
type = null;CtrlSet
triggerall = var(59) = 0
trigger1 = time = 0
value = 1

[State 210, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = time > 0
trigger1 = enemynear,movetype = A
value = 1

[State 410, エフェクト]
type = Explod
trigger1 = animelemtime(1) = 0
anim = 419
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1
ID = 419

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10411
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 411
elem = animelemno(0)

[State 411, 効果音]
type = PlaySnd
trigger1 = Time = 35
value = 5, 1
 
[State 411, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------
;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 5400]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[state 5400]
type = hitby
trigger1 = time <= 60
time = 1
value = SCA,AA

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5400

[State 5051, veladd]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
y = .50

[State 5051, VelSet]
type = VelSet
trigger1 = AnimElem = 2
y = ifelse(pos y <=-30,-13,-14)

[State 5051, ChangeState]
type = SelfState
triggerall = alive = 1
trigger1 = Time > 27
trigger1 = Vel Y >= 0
value = 5040
ctrl = 1

[State 5051, ChangeState]
type = SelfState
triggerall = !alive
trigger1 = Time > 27
trigger1 = Vel Y >= 0
value = 5050
;------------------------------------------------------------


;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;納刀
[Statedef 413]
type    = s
movetype= I
physics = C
juggle  = 0
ctrl = 0
anim = 413+var(10)
sprpriority = 2
movehitpersist = 1

[State 330, コントロール] 
type = null;CtrlSet
triggerall = var(59) = 0
trigger1 = time = 0
value = 1

[State 210, コントロール]
type = null;CtrlSet
triggerall = var(59)
trigger1 = time > 0
trigger1 = enemynear,movetype = A
value = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10413
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 413
elem = animelemno(0)

[State 413, 効果音]
type = PlaySnd
trigger1 = animelem = 14
value = 5, 1
 

[State 413, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

;---------------------------------------------------------------------
[Statedef 6080]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 速度増減] ;重力
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 5030, HitDefの速度]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 5030, ステート変更]
type = ChangeState
trigger1 = hitover
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 6050 ;HITA_FALL

;------------------------------------------
[Statedef 6050]
type    = A
movetype= H
physics = N

[State 5050, アニメ変更] ;Change anim when done with transition
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = Anim = 5035
trigger2 = time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, アニメ変更] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 速度増減] ;重力
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 5050, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 6100 ;HIT_BOUNCE
;----------------------------------------
[Statedef 6100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = time = 0
trigger1 = gethitvar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = time = 0
sysvar(1) = floor(vel y)

[State 5100, アニメ変更] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, アニメ変更] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = time = 0
y = 0

[State 5100, 速度乗算] ;Reduce speed
type = VelMul
trigger1 = time = 0
x = 0.75

[State 5100, ステート変更]
type = ChangeState
trigger1 = time = 0
trigger1 = gethitvar(fall.yvel) = 0
value = 6110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, ステート変更]
type = changeState
trigger1 = animtime = 0
value = 6101
;-----------------------------------------------
[Statedef 6101]
type    = A
movetype= H
physics = N

[State 5101, アニメ変更] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, アニメ変更] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = time = 0

[State 5101, 4]
type = PosSet
trigger1 = time = 0
y = 20

[State 5101, 速度増減] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, ステート変更] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
value = 6110
;-------------------------------
[Statedef 6110]
type    = L
movetype= H
physics = N

[state 6110]
type = posset
trigger1 = time = 0
y = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = time = 0

[State 5110, アニメ変更] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, アニメ変更] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, アニメ変更] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = time = 0

[State 5110, 5]
type = PosSet
trigger1 = time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = time = 0
trigger1 = gethitvar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = time = 0
y = 0

[State 5110, アニメ変更] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = animtime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, アニメ変更] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = animtime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, ステート変更] ;If just died
type = selfState
triggerall = !alive
trigger1 = animtime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, ステート変更] ;If just died
type = selfState
triggerall = alive
trigger3 = time = 11
trigger1 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger2 = Anim = [5110,5119]
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = time = 0
sysvar(0) = 0

[State 5110, 速度乗算] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;-----------------------------------------------------------------------

[Statedef 702]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
anim = 702+var(10)
sprpriority = 2
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10702
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 702
elem = animelemno(0)

[state 702, 移動]
type = posset
trigger1 = time = 0
y = 0

[State 702, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 702, ぶつかり]
type = playerpush
trigger1 = 1
value = 0

[State 702, セリフ]
type = PlaySnd
trigger1 = Time = 1
value = 700, ifelse(random < 700,0,ifelse(random <850 ,1,2))


[State 702, 移動]
type = Velset
trigger1 = AnimElemTime(2) > 0
x = -1

[State 702, 摩擦]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = 0.8


[State 702, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
[Statedef 6180]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 速度増減] ;重力
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 5030, HitDefの速度]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1

[State 5030, ステート変更]
type = ChangeState
trigger1 = hitover
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 6150 ;HITA_FALL

;------------------------------------------
[Statedef 6150]
type    = A
movetype= H
physics = N

[State 5050, アニメ変更] ;Change anim when done with transition
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = Anim = 5035
trigger2 = time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, アニメ変更] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 速度増減] ;重力
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 5050, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 6200 ;HIT_BOUNCE
;----------------------------------------
[Statedef 6200]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = time = 0
trigger1 = gethitvar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = time = 0
sysvar(1) = floor(vel y)

[State 5100, アニメ変更] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, アニメ変更] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = time = 0
y = 0

[State 5100, 速度乗算] ;Reduce speed
type = VelMul
trigger1 = time = 0
x = 0.75

[State 5100, ステート変更]
type = ChangeState
trigger1 = time = 0
trigger1 = gethitvar(fall.yvel) = 0
value = 6110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, ステート変更]
type = changeState
trigger1 = animtime = 0
value = 6201
;-----------------------------------------------
[Statedef 6201]
type    = A
movetype= H
physics = N

[State 5101, アニメ変更] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, アニメ変更] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = time = 0

[State 5101, 4]
type = PosSet
trigger1 = time = 0
y = 10

[State 5101, 速度増減] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, ステート変更] ;Hit ground
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
value = 5110

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;AI起動ヘルパー
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Statedef 10000]
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 10000,立ったら消失]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = root,var(59)||var(59)=-1
trigger2=command="up"&&root,command="up"
trigger3=command="down"&&root,command="down"
trigger4=command="back"&&root,command="back"
trigger5=command="fwd"&&root,command="fwd"
trigger6=command="a"&&root,command="a"
trigger7=command="b"&&root,command="b"
trigger8=command="c"&&root,command="c"
trigger9=command="x"&&root,command="x"
trigger10=command="y"&&root,command="y"
trigger11=command="z"&&root,command="z"
trigger12=command="start"&&root,command="start"

[State 10000,ﾌﾗｸﾞON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1



[Statedef 1400 - Round Trip]
type = S
movetype = A
physics = N
anim = 1400
ctrl = 0
velset = 0,0
poweradd = 15

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time=0
id = 30000
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time=0
id = 30001

[state 0]
type = varset
trigger1 = time = 0
var(21) = 0

[state 1400]
type = changeanim
trigger1 = time = 0
trigger1 = (prevstateno = 200 ||prevstateno = 201 ||prevstateno = 210 ||prevstateno = 410 ||prevstateno = 412 ||prevstateno = 430 ||prevstateno = 440 ||prevstateno = 450 ||prevstateno = 252)
value = 1400
elem = 21

[State wep ]
type = varset
trigger1 = time = 0
v=53
value=2
ignorehitpause=1

[state 1400]
type = changeanim
trigger1 = !numhelper(1401)
trigger1 = !(prevstateno = 200 ||prevstateno = 201 ||prevstateno = 210 ||prevstateno = 410 ||prevstateno = 412 ||prevstateno = 430 ||prevstateno = 440 ||prevstateno = 450 ||prevstateno = 252)
value = 1400
elem = animelemno(0) +1


[State 1400, 効果音]
type = PlaySnd
trigger1 = animelem = 18
value = 1400, 0
channel = 2

[State 1400, ヘルパー]
type = Helper
trigger1 = animelem = 23
helpertype = normal
name = "trip"
ID = 1401
postype = p1
pos = 20,-80
facing = 0
stateno = 1401
keyctrl = 0
ownpal = 1 
IgnoreHitPause = 1

[State -2, ?k1] 
type = Varset
trigger1 = time=0
var(22) = 0
ignorehitpause=1

[State 7000, VarSet]
type = VarSet
trigger1 = animelem = 23
var(10) = 10000

[State 1400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 2010 - Trick (Follow up)]
type = A
movetype = I
physics = A
anim = ifelse(numhelper(3800)=1,5949,2040+var(10))
ctrl = 0

[state 2020]
type = varset
trigger1 = time = 0
var(16) = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12040
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2040
elem = animelemno(0)

[State 2010, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2010, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 0, Teleport]
type = Helper
trigger1 = time = 5
helpertype = normal
name = "Teleport"
ID = 580
stateno = 580
pos = 2+random%40,-40
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6

[State 2010, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.75

[State 2010, 摩擦]
type = velmul
trigger1 = 1
y = 0.3

[State 2010, 移動]
type = posset
trigger1 = animtime = 0
y = 0


[State 2010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2003
ctrl = 0

[Statedef 2020 - Trick]
type = S
movetype = I
physics = N
anim = ifelse(numhelper(3800)=1,5947,2000+var(10))
ctrl = 0
velset = 0,0

[state 0]
type = PlaySnd
trigger1 = random < 100
trigger1 = time = 0
value = 3000,3003
channel = 1

[state 2020]
type = varset
trigger1 = time = 0
trigger1 = var(59) = 0
trigger1 = command = "x" || command = "a"
var(16) = 0


[state 2020]
type = varset
trigger1 = time = 0
trigger1 = var(59) = 0
trigger1 = command = "y" || command = "b"
var(16) = 1

[state 2020]
type = varset
trigger1 = time = 0
trigger1 = var(59) = 0
trigger1 = command = "z" || command = "c"
var(16) = 2

[state 25501]
type = ScreenBound
trigger1 = time = [0,1]
trigger2 = var(16) <= 1
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2000
elem = animelemno(0)

[State 2020, ぶつかり]
type = playerpush
trigger1 = time >= 0
trigger1 = animtime < 0
value = 0

[State 2020, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 0, Teleport]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Teleport"
ID = 580
stateno = 580
pos = 2+random%40,-40
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .6
size.yscale = .6

[state 2020]
type = Screenbound
trigger1 = animtime =0
value = 0

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = -1
triggerall = enemynear(0),alive = 1
trigger1 = var(16) = 0
trigger2 = var(16) = 2
x = enemynear(0),pos x+65

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = 1
triggerall = enemynear(0),alive = 1
trigger1 = var(16) = 0
trigger2 = var(16) = 2
x = enemynear(0),pos x-65

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = -1
triggerall = enemynear(0),alive = 1
trigger1 = var(16) = 1
x = enemynear(0),pos x - 80

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = 1
triggerall = enemynear(0),alive = 1
trigger1 = var(16) = 1
x = enemynear(0),pos x + 80

[State 2020, 移動]
type = PosAdd
trigger1 = var(16) = 2
trigger1 = animtime = 0
triggerall = enemynear(0),alive = 1
y = enemynear(0),pos y - 120


[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = -1
triggerall = enemynear(0),alive = 0
trigger1 = var(16) = 0
trigger2 = var(16) = 2
x = enemynear(1),pos x+65

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = 1
triggerall = enemynear(0),alive = 0
trigger1 = var(16) = 0
trigger2 = var(16) = 2
x = enemynear(1),pos x-65

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = -1
triggerall = enemynear(0),alive = 0
trigger1 = var(16) = 1
x = enemynear(1),pos x - 80

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = 1
triggerall = enemynear(0),alive = 0
trigger1 = var(16) = 1
x = enemynear(1),pos x + 80

[State 2020, 移動]
type = PosAdd
trigger1 = var(16) = 2
trigger1 = animtime = 0
triggerall = enemynear(0),alive = 0
y = enemynear(1),pos y -120

[State 610, StateTypeSet]
type = StateTypeSet
trigger1 = var(16) = 2
trigger1 = animtime = 0
statetype = A


[State 2020, ステート変更]
type = ChangeState
trigger1 = var(16) = [0,1]
trigger1 = AnimTime = 0
value = 2003
ctrl = 0

[State 2020, ステート変更]
type = ChangeState
trigger1 = var(16) = 2
trigger1 = AnimTime = 0
value = 2013
ctrl = 0

[Statedef 1200 - Rapid Slash]
type = S
movetype = I
physics = S
anim = ifelse(numhelper(3800)=1,5955,1200+var(10))
velset = 0,0
ctrl = 0
sprpriority = 2
poweradd = 30 

[state 1200]
type = playerPush
trigger1 = 1
value = 0

[state 1200]
type = varset
trigger1 = !numhelper(3800)
trigger1 = time = 0
var(36) = 0

[state 1200]
type = varset
trigger1 = numhelper(3800)
trigger1 = time = 0
var(36) = 1

[state 25501]
type = ScreenBound
trigger1 = FrontEdgeBodyDist <= 50
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 0, FX]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal
name = "FX"
ID = 1252
stateno = 1250
pos = 80 ,-25 
postype = p1
ownpal = 1
size.xscale = .5 
size.yscale = .75 

[State 0, Viento]
type = Explod
trigger1 = AnimElem = 8
anim = 7022
ID = 7022
pos = 0,10
postype = p1
scale = 1,1
sprpriority = 3
ontop = 1
ownpal = 1

[State 0, FX]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal
name = "FX"
ID = 1251
stateno = 1250
pos = 80 ,-45 
postype = p1
ownpal = 1
size.xscale = .5 
size.yscale = .75 

[State 0, FX]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal
name = "FX"
ID = 1250
stateno = 1250
pos = 80 ,-35 
postype = p1
ownpal = 1
size.xscale = .5 
size.yscale = .75 

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1300,1+var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlaySnd
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 1,9

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 3
ID = 7103
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7103
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 6
ID = 7104
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7103
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 9
ID = 7105
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7103
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 12
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7103
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 15
ID = 7107
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7103
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 1
x = 40

[State 1200, 速度]
type = veladd
trigger1 = time = [22,33]
trigger1 = (pos x <= 159 || pos x >= 159)
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
trigger1 = (pos x >= 160 || pos x <= -160)
x = 0

[state 1200]
type = posset
trigger1 = pos x >= 160
x = 160

[state 1200]
type = posset
trigger1 = pos x <= -160
x = -160

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1 

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1
 

[State Explod]
Type=Explod
trigger1 = animelem = 14
Anim=6011
PosType=P1
Pos=20,-48
Scale=0.5,0.65
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = animelem = 14
Anim=6011
PosType=P1
Pos=20,-48
Scale=0.5,0.65
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [15,50]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

[Statedef 2610 - Rising Sun]
type = S
movetype = A
physics = N
anim = 2610 + (numhelper(3800) * 10000)
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 1
poweradd = 30

[State 2610, 無敵]
type = NotHitBy
trigger1 = animelemno(0) < 17
value = SCA
time = 2

[state 2610, StatetypeSet]
type = StatetypeSet
trigger1 = Animelem = 10
statetype = A
physics = A

[State 2610, 速度]
type = VelSet
trigger1 = Animelem = 10
x = 2
y = -12

[State 2610, 速度]
type = VelSet
trigger1 = Animelem = 17
x = 2.3
y = -11

[State 2610, 摩擦]
type = Velmul
trigger1 = Animelem = 23
x = 0.4

[State 2610, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
trigger1 = AnimElemTime(9) >= 0
damage = 50,5
guardflag = M
hitflag = MAF
attr = A, SA
animtype = up
;animtype = hard
air.animtype = up
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
getpower = 30,30
givepower = 15,15
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
ground.velocity = 0,-12
;ground.velocity = 0,0
air.velocity = 0,-12
ground.hittime = 20
air.hittime = 20
ground.type = high
ground.slidetime = 17
airguard.velocity = -3,-1
guard.hittime = 12
guard.velocity = -4
guard.ctrltime = 20
air.fall = 0
fall = 0
yaccel = .5
persistent = 0
forcestand = 1
fall.recovertime = 30

[State 2610, ヒット定義]
type = HitDef
trigger1 = (var(24):=6)
triggerall = !movecontact
trigger1 = animelem = 10
damage = 80,5
guardflag = MA
hitflag = MAF
attr = A, SA
;animtype = up
animtype = hard
air.animtype = up
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
ground.velocity = 0,-12
;ground.velocity = 0,0
air.velocity = 0,-12
ground.hittime = 20
ground.type = high
ground.slidetime = 17
airguard.velocity = -3,-1
guard.hittime = 12
air.hittime = 20
guard.velocity = -4
guard.ctrltime = 20
air.fall = 0
fall = 0
yaccel = .5
forcestand = 1
fall.recovertime = 30
getpower = 30,30
givepower = 15,15

[State 2610, ヒット定義]
type = HitDef
trigger1 = !var(25)
trigger1 = (var(24):=6)
trigger1 = animelem = 17||animelem = 18
damage = 80,5
guardflag = MA
hitflag = MAF
attr = A, SA
animtype = diagup
air.animtype = up
getpower = 30,30
givepower = 15,15
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
ground.velocity = -2,-7.5
air.velocity = -1,-10
ground.hittime = 25
ground.type = high
ground.slidetime = 17
airguard.velocity = -6.67,-1
guard.hittime = 12
guard.velocity = -8
guard.ctrltime = 20
air.fall = 1
fall = 1
yaccel = .4
persistent=0
id = 2610

[State 2610, ヒット定義]
type = HitDef
trigger1 = var(25)
trigger1 = (var(24):=6)
trigger1 = animelem = 17||animelem = 18
damage = 80,5
guardflag = MA
hitflag = MAF
attr = A, SA
animtype = diagup
air.animtype = up
getpower = 30,30
givepower = 15,15
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
ground.velocity = -2,-7.5
air.velocity = -1,-10
ground.hittime = 25
ground.type = high
ground.slidetime = 17
airguard.velocity = -6.67,-1
guard.hittime = 12
guard.velocity = -8
guard.ctrltime = 20
air.fall = 1
fall = 1
yaccel = .4
persistent=0
id = 555

[state 0]
type = varset
trigger1 = numtarget(2610)
trigger1 = movehit
trigger1 = animelemtime(19) >= 0
var(25) = 1

[State 200, Damage Dampen]
type = varset
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.825

[State 3650, Sonic Blade]
type=helper
trigger1= animelem=10
trigger2 = animelem = 17
helpertype=normal
stateno=3655
ID=3650
name="Sonic Blade"
postype=p1
pos=-20,-75
size.xscale=.53
size.yscale=.44
supermovetime=5
ownpal=1

[state 2600]
type = changestate
trigger1 = command = "z"
trigger1 = animelemtime(19) >= 0
trigger1 = animelemtime(24) <= 0
value = 2010

[State 2600, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2600,0
channel = 0

[State 2600, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 5
value = 2003

[Statedef 2500 - Lunar Phase]
type = S
movetype = A
physics = S
anim = 2505
poweradd = 30
velset = 0
juggle = 1
ctrl = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,0
channel = 0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,2
channel = 0

[State 2505, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2506

[Statedef 2506 - Lunar Phase]
type = A
movetype = A
physics = N
anim = 2506 + (10000 * numhelper(3800))
velset = 0
juggle = 1
ctrl = 0


[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = time <= 5

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2506, 音を止める]
type = stopSnd
trigger1 = AnimElem = 28
channel = 0

[State 2506, 効果音]
type = PlaySnd
trigger1 = AnimElem = 28
value = 3000,3001
channel = 0

[State 3650, Sonic Blade]
type=helper
trigger1 = animelem = 5
helpertype=normal
stateno=36550
ID=3650
name="Sonic Blade"
postype=p1
pos=-20,-75
size.xscale=.53
size.yscale=.44
supermovetime=5
ownpal=1
ignorehitpause = 1
persistent = 0
facing = -1

[State 2506, 速度]
type = Velset
trigger1 = time = 0
y = -5.5

[State 2506, 速度]
type = velset
trigger1 = time = 5
x = 5

[State 2506, 速度]
type = velmul
trigger1 = animelem = 5
x = 0.8

[State 2506, 速度]
type = velmul
trigger1 = animelem = 19
x = 0.4

[State 2506, 速度]
type = Velset
trigger1 = animelem = 4
y = -1


[State 2506, 速度]
type = Velset
trigger1 = animelem = 28
x = 1.5
y = 9.5

[State 2506, 速度]
type = Velset
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
x = 0
y = 0
  
[State 2506, ヒット定義]
type = HitDef
triggerall = (var(24):=5)
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
attr = A, SA
damage = 25,3
animtype = hard
priority  = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-53)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 10
fall.recover = 0
getpower = 15,15
givepower = 8,8

[State 2506, ヒット定義]
type = HitDef
triggerall = (var(24):=5)
trigger1 = animelem = 7
trigger2 = animelem = 10
trigger3 = animelem = 12
trigger4 = animelem = 16
attr = A, SA
damage = 25,3
animtype = hard
priority  = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-53)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 20
fall.recover = 0
getpower = 15,15
givepower = 8,8

[State 2506, ヒット定義]
type = HitDef
triggerall = (var(24):=5)
trigger1 = animelem = 15
attr = A, SA
damage = 25,3
animtype = hard
priority  = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-53)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
getpower = 15,15
givepower = 8,8
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime = 33
air.hittime = 33
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 30
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
triggerall = (var(24):=5)
trigger1 = animelem = 28
trigger2 = animelem = 29
attr = A, SA
animtype = back
damage = 50,10
priority  = 4, Hit
hitflag = MAFD
guardflag = MA
pausetime = 4,4
sparkno = -1+0*(var(12):=1)
sparkxy = -1+0*(var(17):=60),(var(20):=-53)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,1
guardsound = S6,0
ground.type = high
getpower = 15,15
givepower = 8,8
ground.slidetime = 17
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -2,10
guard.velocity = -8
air.velocity = -2,10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent=0
fall.yvelocity = -10
ID = 2506

[State 200, Damage Dampen]
type = varset
trigger1 = movehit = 1
fvar(10) = fvar(10)*0.95

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,statetype = A
trigger1 = target,movetype = H
trigger1 = var(31) = 0
value = 6180
ID = 2506

[state 641]
type = varset
trigger1 = movehit = 2
trigger1 = var(31) !=1
trigger1 = target(2506),stateno = 6180
var(31) = 1

[State 2506, ステート変更]
type = ChangeState
trigger1 = Pos Y >= -10
trigger1 = vel Y > 0
value = 2507

[Statedef 2507 - Lunar Phase End]
type = S
movetype = A
physics = S
anim = 2507
velset = 0,0 
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2507, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1,2

[State 2507, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 1460
ID = 1460
pos = 65,-95
postype = p1
scale = .4,.4
sprpriority = 2
ontop = 1
ownpal = 1

[State -1, エフェクト画像];石礫1
type = Explod
trigger1 = time = 0
anim = 14000
pos = 60, 10
postype = p1
scale = 0.7,0.7
bindtime = 1
sprpriority = -1
ownpal = 0
pausemovetime = 9999999
removeongethit = 1
vel = 0,0
facing = 1
vfacing = 1

[State -1, エフェクト画像];衝撃波
type = Explod
trigger1 = time = 0
anim = 14520
pos = 60, 10
postype = p1
scale = 0.5,0.2
bindtime = 1
sprpriority = -2
ownpal = 0
pausemovetime = 9999999
removeongethit = 1
vel = 0,0
facing = 1
vfacing = 1


[State 2507, 移動]
type = posset
trigger1 = time = 0
y = 0

[State 2507, ステート変更]
type = ChangeState
trigger1 = AnimTime = -1
value = 0
ctrl = 1

[Statedef 1000 - Jugdement Cut]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 15
velset = 0,0
anim = 1000+var(10)
ctrl = 0
sprpriority = 2

[state 0]
type = varset
trigger1 = time = 0
trigger1 = fvar(10) < 1
fvar(10) = fvar(10)*0.9

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1000
elem = animelemno(0)

[State 1000, セリフ]
type = PlaySnd
trigger1 = Time = 1
value = 1000, 3

[State 1000, 効果音]
type = PlaySnd
trigger1 = Time = 15
channel = 0
value = 1000, 0

[State 1000, 移動]
type = velset
trigger1 = AnimElem = 3
x = -3

[State 1000, 移動]
type = velset
trigger1 = AnimElem = 4
x = -3

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 5
x = -4.5

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 6
x = -3

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 7
x = -2.4

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 9
x = -1.2

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 11
x = 0

[State 1010, 幅]
type = Width
trigger1 = 1
value = 20,30

[State 1000, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 7000
scale = 0.5,0.5
postype = p1
pos = -40,-50
sprpriority = 4
;supermove = 1
ownpal = 1
bindtime = -1
removeongethit = 1
 
[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "x" || command = "a"
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "y" || command = "b"
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "z" || command = "c"
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [0,110]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [111,180]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [181,260]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [0,110]
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [111,180]
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [181,260]
v = 7                   
value = 3

[State 1000, ヘルパー]
type = Helper
trigger1 = time = 20
helpertype = normal
name = "zigen1"
ID = 7003
pos = -15 + var(7)*100, -22
postype = p1
facing = 1
stateno = 7003
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45 * (1 + (.3 * numhelper(3800)))
size.yscale = 0.45 * (1 + (.3 * numhelper(3800)))


[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1002
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 1002]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1002+var(10)
ctrl = 0
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11002
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1002
elem = animelemno(0)

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;空中次元斬
[Statedef 1003 - Jugdement Cut (Air)]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 15
velset = 0,0
anim = 610+var(10)
ctrl = 0
sprpriority = 2

[state 1003]
type = varset
trigger1 = var(19)
var(19) = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10610
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 610
elem = animelemno(0)

[State 1000, セリフ]
type = PlaySnd
trigger1 = Time = 1
value = 0, 3

[State 1000, 効果音]
type = PlaySnd
trigger1 = Time = 5
channel = 0
value = 1000, 0



[State 1000, エフェクト]
type = Explod
trigger1 = animelem = 6
anim = 7000
scale = 0.5,0.5
postype = p1
pos = -40,-50
sprpriority = 4
;supermove = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = null;Helper
trigger1 = time = 5
helpertype = normal
name = "zigeneffect"
ID = 7005
pos = 10,-55
postype = p1
facing = 1
stateno = 7005
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.1+var(7)*0.3
size.yscale = 0.5+var(7)*0.1

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "x" || command = "a"
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "y" || command = "b"
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "z" || command = "c"
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [0,110]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [111,180]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [181,260]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [0,110]
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [111,180]
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [181,260]
v = 7                   
value = 3

[State 1000, ヘルパー]
type = Helper
trigger1 = time = 8
helpertype = normal
name = "zigen1"
ID = 7003
pos = -5 + var(7)*80, -22
postype = p1
facing = 1
stateno = 7003
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45 * (1 + (.3 * numhelper(3800)))
size.yscale = 0.45 * (1 + (.3 * numhelper(3800)))

[state 2610, StatetypeSet]
type = StatetypeSet
trigger1 = Animelem = 15
statetype = A
physics = A

;[State 1000, ステート変更]
;type = ChangeState
;trigger1 = Animelem = 15
;value = 50
;ctrl = 0


;---------------------------------------------------------------------------

;--------------------------------------------------
;---------------------------------------------------------------------------
;スティンガー
[Statedef 253]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = -2

[state 200]
type = poweradd
trigger1 = time = 0
value = 50 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))

[state 200]
type = poweradd
trigger1 = movecontact = 1
value = 25 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))


[state 200]
type = poweradd
trigger1 = movehit = 1
value = 45 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))
 

[state 250,判定リセット]
type = varset
trigger1 = time <=1
var(19) = 0
ignorehitpause = 0

[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[State 1100, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, セリフ]
type = PlaySnd
trigger1 = AnimElemTime(2) = 2
value = 1100, 0
channel = 0

[State 1100, 速度]
type = velset
trigger1 = AnimElem = 3
x = 10

[State 1100, 速度]
type = velset
trigger1 = AnimElem = 4
x = 15

[State 1100, ヒット定義]
type = HitDef
trigger1 = animelem = 3 || animelem = 4
attr = S, NA
animtype  = hard
damage= 45
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 0,11
sparkno = S9302
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = low
getpower = 0
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -17,-1
airguard.velocity = -6,-1
persistent = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
id = 1100

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,movetype = H
trigger1 = var(32) = 0
value = 3260
ID = 1100

[state 641]
type = varset
trigger1 = movehit = 1
trigger1 = var(32) !=1
trigger1 = target(1100),stateno = 3260
var(32) = 1


[State 1100, ステート変更]
type = ChangeState
trigger1 = FrontEdgeBodyDist < 30
trigger1 = time > 12
trigger2 = time > 18
value = 254
ctrl = 0

[State 1100, ステート変更]
type = ChangeState
trigger1 = movecontact
value = 255
ctrl = 0

;---------------------------------------------------------------------------
;スティンガー終わり
[Statedef 254]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 1.5,0
anim = 1110
ctrl = 0
sprpriority = -2
 

[State 1110, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1110, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1110, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1


[State 1110, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1110, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1


[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[State 1110, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = S, NA
animtype  = heavy
damage= 45
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 5,10
sparkno = S9302
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = low
getpower = 0
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -17,-1
airguard.velocity = -6,-1
persistent=0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
nochainID = 1100

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,movetype = H
trigger1 = var(32) = 0
value = 3260
ID = 1100

[state 641]
type = varset
trigger1 = movehit = 1
trigger1 = var(32) !=1
trigger1 = target(1100),stateno = 3260
var(32) = 1

[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[state 200]
type = poweradd
trigger1 = movecontact = 1
value = 15 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))


[state 200]
type = poweradd
trigger1 = movehit = 1
value = 45 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))

[State 1110, ステート変更]
type = ChangeState
trigger1 = Animelem = 6
value = 50
ctrl = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;スティンガーヒット後
[Statedef 255]
type    = A
movetype= I
physics = N
juggle  = 6
velset = 1.5,0
anim = 1110
ctrl = 0
sprpriority = -2

[State 1200, 効果音]
type = PlaySnd
trigger1 = target,stateno = 3261
trigger1 = target,time = 1
value = S1,2
abspan = target,pos x

[State 1120, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1120, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1120, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1

[State 1120, ステート変更]
type = ChangeState
trigger1 = Animelem = 6
value = 50
ctrl = 0
;--------------------------------------------------
;-------------------------------------------------
;---------------------------------------------------------------------------
;やられ
[Statedef 3260]
movetype = H
physics = N
ctrl = 0
velset = 0,0

[state 0]
type = playerPush
trigger1 = 1
value = 0

[State 120, 状態変更]
type = StateTypeSet
trigger1 = pos y >= 0
trigger1 = time = 0 && statetype = S
physics = S

[State 120, 状態変更]
type = StateTypeSet
trigger1 = pos y >= 0
trigger1 = time = 0 && statetype = C
physics = C

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = statetype = S
trigger1 = Time = 0
value = 5002

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Statetype = C
trigger1 = Time = 0
value = 5022

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = pos y < 0 
trigger1 = Time = 0
value = 5012

[state 3260]
type = selfstate
trigger1 = time = 0
trigger1 = statetype = C
value = 5010

[state 3260]
type = selfstate
trigger1 = time = 0
trigger1 = pos y >= 0
trigger1 = statetype = S
value = 5000

[State 1223, 速度]
type = velset
trigger1 = pos y < 0
trigger1 = HitShakeOver
x = gethitvar(xvel) * facing
y = 0
persistent = 0

[State 1223, 自分のステートへ]
type = changeState
triggerall = pos y < 0
trigger1 = backedgedist <= -vel x
trigger2 = frontedgedist <= vel x
value = 3261

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3261]
type    = A
movetype= H
physics = N
anim = 5030
ctrl = 0

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = SelfAnimExist(5400)
value = 5400

[State 1223, 速度]
type = velset
trigger1 = time < 11
x = 0
y = 0

[State 1223, 速度]
type = velset
trigger1 = time = 11
trigger1 = backedgedist <= 20
x = 1
y = -10.5
persistent = 0

[State 1223, 速度]
type = velset
trigger1 = time = 11
trigger1 = frontedgedist <= 20
x = -1
y = -10.5
persistent = 0

[state 1223]
type = veladd
trigger1 = time >=11
y = 0.34


[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time >= 11
trigger1 = anim = 5400
value = 5030
persistent = 0

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = anim = 5030
trigger1 = animtime = 0
value = 5050
persistent = 0

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5101, 6] ;Hit ground
triggerall = time >= 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -vel y
type = ChangeState
value = 3262

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3262]
type    = L
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = time =  30
value = 5120

;===========================================================================
;疾走居合い
[Statedef 1210]
type = S
movetype = A
physics = S
anim = 1200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 200]
type = poweradd
trigger1 = time = 0
value = 50 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))

[state 200]
type = poweradd
trigger1 = movecontact = 1
value = 15 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))


[state 200]
type = poweradd
trigger1 = movehit = 1
value = 25 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))

 

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヒット定義]
type = HitDef
trigger1 = 1
trigger1 = movecontact = 0
attr = S, HA
animtype  = hard
priority = 6, miss
damage    = 1,1
hitflag = MAF
guardflag = M
guard.sparkno = 6
pausetime = 0,0
guard.pausetime = 0,34
getpower = 0
sparkno = S904
sparkxy = -10,-70
hitsound   = -1;S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
p2stateno = 1222
p2facing = 1
kill = 0
ID = 1200

[State -3, 3];
type = targetlifeadd
triggerall = NumTarget(1200) >= 1
trigger1 = target(1200),stateno = 1222
trigger1 = target(1200),time = 2
trigger2 = target(1200),stateno = 1222
trigger2 = target(1200),time = 4
trigger3 = target(1200),stateno = 1222
trigger3 = target(1200),time = 6
trigger4 = target(1200),stateno = 1222
trigger4 = target(1200),time = 8
ID = 1200
value = -26
absolute = 0

[State 1200, ヒット定義]
type = Hitdef
trigger1 = animelemtime(12) = 0|| animelemtime(13) = 0
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = back
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 80
pausetime = 3,5
hitsound = S1, 11
guardsound = 1, 0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10,-2
guard.velocity = -8.5
air.velocity = -8, -3
airguard.velocity = -6.67,-1
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 10
givepower = 35, 35               
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5

[State 1200, ヘルパー]
type = Helper
trigger1 = movehit = 1
trigger1 = p2stateno = 1222
trigger1 = numhelper(1020) = 0
ID = 1020
name = "sissou"
sprpriority = 4
postype = p2
pos = 0,0
postype = back
stateno = 1224
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 2
x = 35

[State 1200, 速度]
type = veladd
trigger1 = time = [22,33]
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
x = 0

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [15,50]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1
 
;疾走居合い
[Statedef 1201]
type = S
movetype = A
physics = S
anim = 41200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
getpower = -1000
sprpriority = 2

[state 1200]
type = varset
trigger1 = !numhelper(3800)
trigger1 = time = 0
var(36) = 0

[state 1200]
type = varset
trigger1 = numhelper(3800)
trigger1 = time = 0
var(36) = 1

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 25501]
type = ScreenBound
trigger1 = FrontEdgeBodyDist <= 50
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 51200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 3
ID = 7103
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 5
ID = 7104
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 7
ID = 7105
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 9
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 11
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 1
x = 60

[State 1200, 速度]
type = veladd
trigger1 = time = [18,25]
trigger1 = (pos x <= 159 || pos x >= 159)
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
trigger1 = (pos x >= 160 || pos x <= -160)
x = 0

[state 1200]
type = posset
trigger1 = pos x >= 160
x = 160

[state 1200]
type = posset
trigger1 = pos x <= -160
x = -160

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = 0,-15;-190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [15,50]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animelem = 17
value =1202

;===========================================================================
;疾走居合い
[Statedef 1202]
type = A
movetype = A
physics = S
anim = 41200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 1400]
type = changeanim
trigger1 = time = 0
value = 41200+var(10)
elem = 7

[state 1400]
type = changeanim
trigger1 =animelem <= 7
value = 41200+var(10)
elem = animelemno(0) +1

[state 1200]
type = turn
trigger1 = time = 0

[state 1200]
type = varset
trigger1 = !numhelper(3800)
trigger1 = time = 0
var(36) = 0

[state 1200]
type = varset
trigger1 = numhelper(3800)
trigger1 = time = 0
var(36) = 1

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 25501]
type = ScreenBound
trigger1 = FrontEdgeBodyDist <= 50
value = 0


[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 51200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 3
ID = 7103
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 5
ID = 7104
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 7
ID = 7105
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 9
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 11
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 1
x = 60
y = -5

[State 1200, 速度]
type = veladd
trigger1 = time = [18,25]
trigger1 = (pos x <= 159 || pos x >= 159)
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
trigger1 = (pos x >= 160 || pos x <= -160)
x = 0
y = 0

[state 1200]
type = posset
trigger1 = pos x >= 160
x = 160

[state 1200]
type = posset
trigger1 = pos x <= -160
x = -160

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = 0,-15;-190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [8,31]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animelem = 17
value = 1203

;===========================================================================
;疾走居合い
[Statedef 1203]
type = A
movetype = A
physics = S
anim = 41200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 1400]
type = changeanim
trigger1 = time = 0
value = 41200+var(10)
elem = 7

[state 1400]
type = changeanim
trigger1 =animelem <= 7
value = 41200+var(10)
elem = animelemno(0) +1

[state 1200]
type = turn
trigger1 = time = 0

[state 1200]
type = varset
trigger1 = !numhelper(3800)
trigger1 = time = 0
var(36) = 0

[state 1200]
type = varset
trigger1 = numhelper(3800)
trigger1 = time = 0
var(36) = 1

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 25501]
type = ScreenBound
trigger1 = FrontEdgeBodyDist <= 50
value = 0


[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 51200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 3
ID = 7103
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 5
ID = 7104
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 7
ID = 7105
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 9
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 11
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 1
x = 60

[State 1200, 速度]
type = veladd
trigger1 = time = [18,25]
trigger1 = (pos x <= 159 || pos x >= 159)
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
trigger1 = (pos x >= 160 || pos x <= -160)
x = 0
y = 0

[state 1200]
type = posset
trigger1 = pos x >= 160
x = 160

[state 1200]
type = posset
trigger1 = pos x <= -160
x = -160

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = 0,-15;-190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [8,31]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animelem = 17
value = 1204

;===========================================================================
;疾走居合い
[Statedef 1204]
type = A
movetype = A
physics = S
anim = 41200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 1400]
type = changeanim
trigger1 = time = 0
value = 41200+var(10)
elem = 7

[state 1400]
type = changeanim
trigger1 =animelem <= 7
value = 41200+var(10)
elem = animelemno(0) +1

[state 1200]
type = turn
trigger1 = time = 0

[state 1200]
type = varset
trigger1 = !numhelper(3800)
trigger1 = time = 0
var(36) = 0

[state 1200]
type = varset
trigger1 = numhelper(3800)
trigger1 = time = 0
var(36) = 1

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 25501]
type = ScreenBound
trigger1 = FrontEdgeBodyDist <= 50
value = 0


[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 51200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 3
ID = 7103
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 5
ID = 7104
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 7
ID = 7105
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 9
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 11
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 1
x = 60
y = 5

[State 1200, 速度]
type = veladd
trigger1 = time = [18,25]
trigger1 = (pos x <= 159 || pos x >= 159)
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
trigger1 = (pos x >= 160 || pos x <= -160)
x = 0
y = 0

[state 1200]
type = posset
trigger1 = pos x >= 160
x = 160

[state 1200]
type = posset
trigger1 = pos x <= -160
x = -160

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = 0,-15;-190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [8,31]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animelem = 17
value = 1205

;===========================================================================
;疾走居合い
[Statedef 1205]
type = S
movetype = A
physics = S
anim = 4200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 1400]
type = changeanim
trigger1 = time = 0
value = 41200+var(10)
elem = 7

[state 1400]
type = changeanim
trigger1 =animelem <= 7
value = 41200+var(10)
elem = animelemno(0) +1

[state 1200]
type = turn
trigger1 = time = 0

[state 1200]
type = varset
trigger1 = !numhelper(3800)
trigger1 = time = 0
var(36) = 0

[state 1200]
type = varset
trigger1 = numhelper(3800)
trigger1 = time = 0
var(36) = 1

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 25501]
type = ScreenBound
trigger1 = FrontEdgeBodyDist <= 50
value = 0


[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 51200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 3
ID = 7103
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 5
ID = 7104
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 7
ID = 7105
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 9
ID = 7106
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 11
ID = 7107
name = "sissou"
sprpriority = 4
postype = p1
pos = 0,5
stateno = 7104
helpertype = normal
keyctrl = 0
ignorehitpause = 1
size.xscale = 0.45 * (1 + (.3 * var(36)))
size.yscale = 0.45 * (1 + (.3 * var(36)))

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 1
x = 60

[State 1200, 速度]
type = veladd
trigger1 = time = [18,25]
trigger1 = (pos x <= 159 || pos x >= 159)
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
trigger1 = (pos x >= 160 || pos x <= -160)
x = 0

[state 1200]
type = posset
trigger1 = pos x >= 160
x = 160

[state 1200]
type = posset
trigger1 = pos x <= -160
x = -160

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = 0,-15;-190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [8,31]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------
;疾走居合い相手喰らい１
[Statedef 1222]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 1222, アニメ変更]
type = Changeanim2
trigger1 = Time = 0
value = 1222


[State 1222, ステート変更]
type = ChangeState
trigger1 = AnimTime = -5
value = 1223

;--------------------------------------
;疾走居合い相手喰らい２
[Statedef 1223]
type = A
physics = N
movetype = H
ctrl = 0

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052) 
value = 5050

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) 
value = 5052

[State 1223, 速度]
type = velset
trigger1 = time = 0
x = -2
y = -4

[State 1223, 速度]
type = VelAdd
trigger1 = Time > 4
y = 0.5

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;疾走居合いヒット時ヘルパー
[Statedef 1224]
type = S
physics = N
anim = 1223
ctrl = 0
velset = 0,0

[State 1224, ゲージ]
type = poweradd
trigger1 = time = 1
trigger2 = time = 9
trigger3 = time = 17
trigger4 = time = 25
trigger5 = time = 33
value = 32

[State 1224, ヒットカウント]
type = hitadd
triggerall = p2stateno = 1222
trigger1 = time = 12
trigger2 = time = 16
trigger3 = time = 21
trigger4 = time = 26
value = 1

[State 1224, 効果音]
type = playsnd
triggerall = p2stateno = 1222
trigger1 = time = 12
trigger2 = time = 16
trigger3 = time = 21
trigger4 = time = 26
value = S1,11

[State 1224, 効果音]
type = playsnd
triggerall = p2stateno = 1223
trigger1 = time = 48
value = S1,12

[State 1224, ヒットエフェクト]
type = Explod
trigger1 = time = 16
trigger2 = time = 21
trigger3 = time = 26
trigger4 = time = 31
anim = 9302
scale = 1,1
postype = p2
pos = 0,-60 + random%20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1224, 消す]
type = destroyself
trigger1 = Time = 50
value = 0
;---------------------------------------------------------------------------
[Statedef 1230];ガードヘルパー
type = S
physics = N
movetype = A
anim = 9741
ctrl = 0
velset = 0,0

[State 1230, ヒット定義]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
attr = S, SA
animtype  = hard
damage    = 35,20
getpower = 40,40
hitflag = M
guardflag = M
guard.sparkno = -1
pausetime = 9,3
guard.pausetime = 9,40
guard.hittime = 30
guard.ctrltime = 30
sparkno = 6
sparkxy = -10,-70
hitsound   = S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 1.8,-9
air.velocity = 0,0
fall = 1
fall.recover = 0
;ignorehitpause = 1

[State 1230, 消す]
type = destroyself
trigger1 = animtime = 0
value = 0


;===========================================================================



;===========================================================================
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------

[Statedef 2510]
type = A
movetype = A
physics = A
anim = 2507
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2507, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1,2

[State 2507, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 2512
ID = 2512
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

;[State 2507, 移動]
;type = posset
;trigger1 = time = 0
;y = 0

[State 2507, ステート変更]
type = ChangeState
trigger1 = animelem = 8
value = 50
ctrl = 0

;---------------------------------------------------------------------------

[Statedef 2509]
type = S
movetype = A
physics = S
anim = 2507
velset = 0,0
posset = 0,0
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2507, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1,2

[State 2507, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 2512
ID = 2512
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 2507, 移動]
type = posset
trigger1 = time = 0
y = 0

[State 2507, ステート変更]
type = ChangeState
trigger1 = time = 14
value = 2610
;===========================================================================

;===========================================================================
;月輪脚（強） 空中
[Statedef 2501]
type = S
movetype = A
physics = S
anim = 2505
poweradd = 0
velset = 0
juggle = 1
ctrl = 0

[state 1003]
type = varset
trigger1 = var(19)
var(19) = 0

[state 200]
type = poweradd
trigger1 = time = 0
value = 50 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))


[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,0
channel = 0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,2
channel = 0

[State 2505, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2505
;---------------------------------------------------------------------------

;===========================================================================
;月輪脚（強）　DT-EX
[Statedef 2502]
type = S
movetype = A
physics = S
anim = 2505
poweradd = 0
velset = 0
juggle = 1
ctrl = 0

[state 200]
type = poweradd
trigger1 = time = 0
value = -1000

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,0
channel = 0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,2
channel = 0

[State 2505, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2508

;-----------------------------------------------------------------------
[Statedef 2505]
type = A
movetype = A
physics = N
anim = 2506 + (10000 * numhelper(3800))
velset = 0
juggle = 1
ctrl = 0


[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = time <= 5

[state 200]
type = poweradd
trigger1 = movecontact = 1
value = 5 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))


[state 200]
type = poweradd
trigger1 = movehit = 1
value = 15 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))

 
[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2506, 音を止める]
type = stopSnd
trigger1 = AnimElem = 28
channel = 0

[State 2506, 効果音]
type = PlaySnd
trigger1 = AnimElem = 28
value = 0,7
channel = 0

[State 2506, エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 2510
ID = 2510
pos = -90, -10
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 2506, エフェクト]
type = Explod
trigger1 = animelem = 29
anim = 2511
ID = 2511
pos = -90, -20
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 2506, 速度]
type = Velset
trigger1 = time = 0
y = -5.5

[State 2506, 速度]
type = velset
trigger1 = time = 5
x = 5

[State 2506, 速度]
type = velmul
trigger1 = animelem = 5
x = 0.8

[State 2506, 速度]
type = velmul
trigger1 = animelem = 19
x = 0.4

[State 2506, 速度]
type = Velset
trigger1 = animelem = 4
y = -1


;[State 2506, 速度]
;type = changestate
;trigger1 = animelem = 28
;value = 634

[State 2506, 速度]
type = Velset
trigger1 = animelem = 28
x = 0
y = 0

[state 2610, StatetypeSet]
type = StatetypeSet
trigger1 = Animelem = 28
statetype = A
physics = A

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
attr = A, SA
damage = 15,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-55
hitsound = S1,1
getpower = 0
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 10
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 7
trigger2 = animelem = 10
trigger3 = animelem = 12
attr = A, SA
damage = 15,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-80
hitsound = S1,1
getpower = 0
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 20
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 15
trigger2 = animelem = 16
attr = A, SA
damage = 15,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
getpower = 0
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime = 33
air.hittime = 33
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-4
air.hittime = 30
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 28
trigger2 = animelem = 29
attr = A, SA
animtype = back
damage = 25,10
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = 3
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
getpower = 0
ground.slidetime = 17
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -2,10
guard.velocity = -8
air.velocity = -2,10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent=0
fall.yvelocity = -10
ID = 2506

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,statetype = A
trigger1 = target,movetype = H
trigger1 = var(31) = 0
value = 6180
ID = 2506

[state 641]
type = varset
trigger1 = movehit = 2
trigger1 = var(31) !=1
trigger1 = target(2506),stateno = 6180
var(31) = 1

[State 2506, ステート変更]
type = ChangeState
trigger1 = time = 60
value = 2510
ctrl = 0

;[State 2506, ステート変更]
;type = ChangeState
;trigger1 = Pos Y >= -10
;trigger1 = vel Y > 0
;value = 2507
;---------------------------------------------------------------------------



;---------------------------------------------------------------------------

[Statedef 2508]
type = A
movetype = A
physics = N
anim = 2506 + (10000 * numhelper(3800))
velset = 0
juggle = 1
ctrl = 0


[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = time <= 5

[state 200]
type = poweradd
trigger1 = movecontact = 1
value = 5 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))


[state 200]
type = poweradd
trigger1 = movehit = 1
value = 15 * (1-ifelse(var(56),1,0)) * (1 - numhelper(3800)) * (1 + (fvar(15) * var(27) * numhelper(3803)))

 
[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2506, 音を止める]
type = stopSnd
trigger1 = AnimElem = 28
channel = 0

[State 2506, 効果音]
type = PlaySnd
trigger1 = AnimElem = 28
value = 0,7
channel = 0

[State 2506, エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 2510
ID = 2510
pos = -90, -10
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 2506, エフェクト]
type = Explod
trigger1 = animelem = 29
anim = 2511
ID = 2511
pos = -90, -20
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 2506, 速度]
type = Velset
trigger1 = time = 0
y = -5.5

[State 2506, 速度]
type = velset
trigger1 = time = 5
x = 5

[State 2506, 速度]
type = velmul
trigger1 = animelem = 5
x = 0.8

[State 2506, 速度]
type = velmul
trigger1 = animelem = 19
x = 0.4

[State 2506, 速度]
type = Velset
trigger1 = animelem = 4
y = -1


[State 2506, 速度]
type = Velset
trigger1 = animelem = 28
x = 1.5
y = 9.5

[State 2506, 速度]
type = Velset
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
x = 0
y = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
attr = A, SA
damage = 15,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-55
hitsound = S1,1
getpower = 0
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 10
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 7
trigger2 = animelem = 10
trigger3 = animelem = 12
trigger4 = animelem = 16
attr = A, SA
damage = 15,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-80
hitsound = S1,1
getpower = 0
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 20
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 15
attr = A, SA
damage = 15,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
getpower = 0
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime = 33
air.hittime = 33
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 30
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 28
trigger2 = animelem = 29
attr = A, SA
animtype = back
damage = 25,10
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = 3
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
getpower = 0
ground.slidetime = 17
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -2,10
guard.velocity = -8
air.velocity = -2,10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent=0
fall.yvelocity = -10
ID = 2506

[state 641]
type = TargetState
trigger1 = movehit = 1
trigger1 = !target,ishelper
trigger1 = target,statetype = A
trigger1 = target,movetype = H
value = 6180
ID = 2506

[State 2506, ステート変更]
type = ChangeState
trigger1 = Pos Y >= -10
trigger1 = vel Y > 0
value = 2509

;===========================================================================

;===========================================================================
;===========================================================================

;-----------------------------------------------------------------------
;トリックアップ地上、AI用特別型
[Statedef 2021]
type = S
movetype = I
physics = N
anim = 2000+var(10)
ctrl = 0
velset = 0,0

[state 25501]
type = ScreenBound
trigger1 = 1
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2000
elem = animelemno(0)

[State 2020, ぶつかり]
type = playerpush
trigger1 = time >= 0
trigger1 = animtime < 0
value = 0

[State 2020, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2020, エフェクト]
type = Explod
trigger1 = animelem = 3
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[state 2020]
type = Screenbound
trigger1 = animtime =0
value = 0

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = -1
trigger1 = enemynear(0),alive = 1
x = enemynear(0),pos x+65

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = 1
trigger1 = enemynear(0),alive = 1
x = enemynear(0),pos x-65


[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = -1
trigger1 = enemynear(0),alive = 0
x = enemynear(1),pos x+65

[State 2020, 移動]
type = posset
triggerall = animtime = 0
Triggerall = Facing = 1
trigger1 = enemynear(0),alive = 0
x = enemynear(1),pos x-65

[State 2020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2004
ctrl = 0

;===========================================================================
;ワープ後地上
[Statedef 2003 - Trick X]
type    = S
physics = S
ctrl = 0
anim = ifelse(numhelper(3800)=1,5948,2010+var(10))
velset = 0,0

[state 2003]
type = turn
trigger1 = time = 0
trigger1 = var(16) = 1

[state 25501]
type = ScreenBound
trigger1 = time <=1
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12010
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2010
elem = animelemno(0)

[State 2003, 効果音]
type = playsnd
trigger1 = prevstateno = [2600,2610]
trigger1 = Time = 0
value = 47, 0

[State 2003, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2003, コントロール]
type = CtrlSet
triggerall = var(59) = 0 
trigger1 = animtime = -13
value = 1

[State 2003, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = animtime = -13
value = 1

[State 2003, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;===========================================================================
;ワープ後地上
[Statedef 2004]
type    = S
physics = S
ctrl = 0
anim = 2010+var(10)
velset = 0,0

[state 25501]
type = ScreenBound
trigger1 = time <=1
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12010
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2010
elem = animelemno(0)

[State 2003, 効果音]
type = playsnd
trigger1 = prevstateno = [2600,2610]
trigger1 = Time = 0
value = 47, 0

[State 2003, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2003, コントロール]
type = CtrlSet
triggerall = var(59) = 0 
trigger1 = animtime = -13
value = 1

[State 2003, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = animtime = -13
value = 1

[State 2003, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;ワープ後空中
[Statedef 2013]
type    = A
physics = A
ctrl = 0
anim = 2030
velset = 0,-3

[State 2013, コントロール]
type = CtrlSet
trigger1 = time = 4
value = 1

[State 2013, 変数]
type = VarSet
trigger1 = time = 0
var(16) = 1

[State 2013, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0
value = 52
ctrl = 1

[Statedef 820 - Throw State (Enemy)]
type    = S
movetype= H
physics = N
juggle  = 4
poweradd = 0
velset = 0,0
ctrl = 0
sprpriority = 3

[State 821, 4]
type = changeanim2
trigger1 = time = 0
value = 820

[State 821, 相手ステートに戻す]
type = SelfState
trigger1 = time > 200
value = 5100

;---------------------------------------------------------------------------
;カンフースルー：相手側２（放り投げられた）
[Statedef 821 - Throw State (Enemy)]
type    = A
movetype= H
physics = N
velset = -2.8,-4
poweradd = 0

[State 821, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .4 ;現在のＹ軸方向の移動速度を「0.4ポイント」ずつ増やしていく

[State 821, 4]
type = changeanim2
trigger1 = time = 0
value = 822

[State 821, ステート変更]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive      ;生きている時
triggerall = CanRecover ;空中受け身が可能な時
trigger1 = Command = "recovery"
value = 5200

[State 821, 相手ステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 821, 相手ステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------------
;Guard Push Stand
[Statedef 8011]
type = S
movetype = I
physics =  N
poweradd = 0
velset = 10,0
ctrl = 0
anim = 150 + var(10)
sprpriority = 2


[State 8011, VelMul]
type =  VelMul
trigger1 = 1
x = 0.75

[State 8011, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[state 8011]
type = velset
trigger1 = time = 1
trigger1 = frontedgedist <= 80
x = -15

[State 8011, Width]
type = Width
trigger1 = 1
value = 10,0

[State 8011, NotHitBy]
type = NotHitBY
trigger1 = time = 0
value = SCA
ignorehitpause = 1
time = 25

[State 8011, Push Effect]
type = Explod
trigger1 = time = 0
anim = 9102
ID = 8010
pos = 15,-65
postype = p1
bindtime = -1
removetime = -2
sprpriority = 3
ownpal = 1
ignorehitpause = 1




[State 8011, Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "Guard Push"
postype = P1
pos = -50,0
stateno = 165
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30


[State 8011, End]
type = ChangeState
trigger1 = Time = 20
value = 0
ctrl = 1

;---------------------------------------------------------------------------------
;Guard Push crouch
[Statedef 8012]
type = C
movetype = I
physics =  N
poweradd = 0
velset = 10,0
ctrl = 0
anim = 151 + var(10)
sprpriority = 2

[State 8012, VelMul]
type =  VelMul
trigger1 = 1
x = 0.75

[State 8012, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[state 8011]
type = velset
trigger1 = time = 1
trigger1 = frontedgedist <= 80
x = -15

[State 8012, Width]
type = Width
trigger1 = 1
value = 10,0

[State 8012, NotHitBy]
type = NotHitBY
trigger1 = time = 0
value = SCA
ignorehitpause = 1
time = 25

[State 8012, Push Effect]
type = Explod
trigger1 = time = 0
anim = 9102
ID = 8010
pos = 15,-65
postype = p1
bindtime = -1
removetime = -2
sprpriority = 3
ownpal = 1
ignorehitpause = 1


[State 8012, Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "Guard Push"
postype = P1
pos = -50,0
stateno = 165
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30


[State 8012, End]
type = ChangeState
trigger1 = Time = 20
value = 11
ctrl = 1

;---------------------------------------------------------------------------------
;Guard Push air
[Statedef 8013]
type = A
movetype = I
physics =  N
poweradd = 0
velset = 10,0
ctrl = 0
anim = 152 + var(10)
sprpriority = 2

[State 8012, VelMul]
type =  VelMul
trigger1 = 1
x = 0.75

[State 8012, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[state 8011]
type = velset
trigger1 = time = 1
trigger1 = frontedgedist <= 80
x = -15

[State 8012, Width]
type = Width
trigger1 = 1
value = 10,0

[State 8012, NotHitBy]
type = NotHitBY
trigger1 = time = 0
value = SCA
ignorehitpause = 1
time = 25

[State 8012, Push Effect]
type = Explod
trigger1 = time = 0
anim = 9102
ID = 8010
pos = 15,-65
postype = p1
bindtime = -1
removetime = -2
sprpriority = 3
ownpal = 1
ignorehitpause = 1


[State 8012, Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "Guard Push"
postype = P1
pos = -50,0
stateno = 165
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 162, Fim]
type = ChangeState
trigger1 =Time = 20
value = 50
ctrl = 1





[Statedef 3010 - Dimension Slash P2]
movetype = H
physics = N
anim = 5030
ctrl = 0
velset = 0,0

[State 1223, 速度]
type = velset
trigger1 = HitShakeOver
trigger1 =  enemynear,Pos X > 0
x = -2
y = -3
persistent = 0

[State 1223, 速度]
type = velset
trigger1 = HitShakeOver
trigger1 = enemynear,Pos X <= 0
x = 2
y = -3
persistent = 0

[State 1223, 速度]
type = VelAdd
trigger1 = time > 10
y = .4

[State 5030, 4]
type = Changeanim
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5050

[State 1223, 自分のステートへ]
type = changeState
trigger1 = Vel Y > 5
trigger1 = Pos Y >= 0
value = 3011

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3011]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3012

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3012]
type    = L
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = time = 100
value = 5120

; aerial raved a
[statedef 7715]
movetype= h
physics = n
velset = 0,0
ctrl = 0

[state 710,1]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command != "holddown"
value = 5000

[state 710,2]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command = "holddown"
value = 5010

[state 710,3]
type = statetypeset
trigger1 = time = 1
statetype = a

[state 710,4]
type = changeanim
trigger1 = 1
value = 5012

[state 710,5]
type = changestate
trigger1 = hitshakeover
value = 7716
;---------------------------------------------------------------------------
; aerial raved b
[statedef 7716]
type    = a
movetype= h
physics = n
ctrl = 0

[state 711, 1]
type = veladd
trigger1 = 1
y = 0.5

[state 711, 2]
type = hitvelset
trigger1 = time = 0
x = 1
y = 1

[state 711, 3]
type = changestate
trigger1 = animtime = 0 || time >= 10
value = 7717

[state 711, 4]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,1

[state 711, 2]
type = changeanim
trigger1 = selfanimexist(5060) && anim != 5060
value = 5060

[state 711, 6]
type = changestate
trigger1 = pos y >= 10 && vel y > 0
value = 328
;---------------------------------------------------------------------------
; aerial raved c
[statedef 7717]
type    = a
movetype= h
physics = n
ctrl = 0

[state 712, 1]
type = veladd
trigger1 = 1
y = 0.5

[state 712, 2]
type = changeanim
trigger1 = selfanimexist(5060) && anim != 5060
value = 5060

[state 712, 3]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,1

[state 712, 3]
type = changestate
trigger1 = pos y >= 10 && vel y > 0
value = 328

; trip liedown
[statedef 328]
type    = l
movetype= h
physics = n

[state 328, envshake]
type = Fallenvshake
trigger1 = time = 0

[state 328, 1] ;for hit Up/Up-diag type (from state 5081)
type = changeanim
persistent = 0
trigger1 = selfanimexist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[state 328, 2] ;hit ground anim (normal)
type = changeanim
triggerall = time = 0
triggerall = anim != [5110,5119] ;not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !selfanimexist(5170 + (anim % 10))
value = 5170

[state 328, 3] ;hit ground anim (for hit Up)
type = changeanim
triggerall = time = 0
triggerall = anim != [5110,5119] ;not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = selfanimexist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[state 328, 4]
type = hitfalldamage
trigger1 = time = 0

[state 328, 5]
type = posset
trigger1 = time = 0
y = 0

[state 328, var]
type = varset
trigger1 = time = 0
trigger1 = gethitvar(fall.yvel) != 0
sysvar(1) = Floor(vel y)

[state 328, 6]
type = playsnd
triggerall = prevstateno != [715,720]
trigger1 = time = 0 && !sysvar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[state 328, 6]
type = playsnd
triggerall = prevstateno = 720
trigger1 = time = 0 && !sysvar(0)
value = s20, 7

[state 328, 8]
type = velset
trigger1 = 1
x = 0
y = 0

[state 328, 9] ;for hit Up type
type = changeanim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = selfanimexist(5110 + (anim % 10))
trigger1 = animtime = 0
trigger2 = sysvar(0) ;sysvar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[state 328, 10] ;for normal
type = changeanim
persistent = 0
triggerall = anim != [5111,5119]
trigger1 = animtime = 0
trigger2 = sysvar(0) ;sysvar(0) = 1 avoids hit ground Frame
value = 5110

[state 328, 11] ;if just Died
type = selfstate
triggerall = !alive
trigger1 = animtime = 0
trigger2 = sysvar(0) ;sysvar(0) = 1 avoids hit ground Frame
trigger3 = anim = [5110,5119]
value = 5150

[state 328, 12]
type = varset
trigger1 = sysvar(0)
trigger1 = time = 0
sysvar(0) = 0

[state 328, 13] ;friction
type = velmul
trigger1 = 1
x = 0.85

[state 328, 14]
type = ForcefeeDBack
trigger1 = alive
trigger1 = time = 0
time = 8
ampl = 240
waveform = sine

[state 328, 15]
type = ForcefeeDBack
trigger1 = !alive
trigger1 = time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 328,16]
type = playerpush
trigger1 = 1
value = 0

[state 328,17]
type = nothitby
trigger1 = time = 0
value = sca, aa, ap, at, na, np, nt, sa, sp, st, ha, hp, ht
time = 0
ignorehitpause = 1

[state 250,13]
type = envshake
trigger1 = time = 0 && prevstateno = 720
persistent = 0
time = 15
freq = 70
ampl = -4

[state 328,18]
type = selfstate
trigger1 = alive && time = 60
value = 5120

[Statedef 2901]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 2901
ctrl = 1
sprpriority = 2

[state 0]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 470]
type    = A
movetype= H
physics = N
velset = 0,0
     
[State 5070, 1]
type = ChangeAnim
trigger1 = 1
value = 5070
     
[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 471
     
;---------------------------------------------------------------------------
; CUSTOM TRIP2 (fall through air) (Modded)
[Statedef 471]
type    = A
movetype= H
physics = N
     
[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1
     
[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = 0.7;GetHitVar(yaccel)
     
[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = Changestate;SelfState
value = 6110;5110

[Statedef 6110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56))

[State 5110, 7]
type = Explod
trigger1 = Time = 0
trigger1 = !SysVar(0)
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = ifelse (sysvar(1) <= Const720p(56), -10, 10)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0

[State 5110, 15]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 16]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 6110, SS]
type = selfstate
trigger1 = alive
trigger1 = time >= 11
value = 5120

[Statedef 700 - Superjump]
physics = S
type = S
ctrl = 0
anim = 40

[State -3, エフェクト]
type = Explod
trigger1 = NumExplod(6010) = 0
anim = 6010
pos = 0,-10
postype = p1
id = 6010
ignorehitpause = 1
persistent = 0
sprpriority = 6
ownpal = 1
ontop = 1
scale = 0.5,0.5

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 40
trigger1 = Time = 0
value = 40

[state 700, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 700, 2]
type = varset
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 700, 3]
type = varset
trigger1 = command = "holdback"
sysvar(1) = -1

[state 700, 5]
type = velset
trigger1 = (animtime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[state 700, 4]
type = velset
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)*1.3

[State 91, VelAdd]
type = VelAdd
trigger1 = 1
y= .53

[state 700, 6]
type = changestate
trigger1 = animtime = 0
value = 701
ctrl = 1



[Statedef 701]
physics = a
type = a
ctrl = 1

[State 1200, ???]
type = PlaySnd
trigger1 = time = 1
value = S105,0

[State 0, ]
type = explod
trigger1 = vel y <= -0.5 && numexplod(701) <= 5 && timemod = 3,1
anim = F701
id = 701
postype = p1
pos = const(size.mid.pos.x),const(size.mid.pos.y)-20
random = 20+const(size.air.back)+const(size.air.front),15
vel = 0,1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, ]
type = PlaySnd
trigger1 = time = 1
persistent = 0
value = S8,0

[State 0, ]
type = explod
trigger1 = time = 0
anim = F700
postype = p1
pos = 0,0 ;const(size.head.pos.y)-40
vel = 0,1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 41
trigger1 = Time = 0
value = 41

[State 91, VelAdd]
type = null;VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[state 701, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
trigger1 = vel x <= 0
trigger1 = vel x > -2
x = -0.1

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = vel x < 5
trigger1 = time >= 0
x = 0.05

[state 701, 5]
type = velset
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = time >= 0
trigger1 = vel x = 0
x = 0

[State 180, Varset]
type = VarSet
trigger1 = 1
var(8) = 1

[State X, VelSet for Superjump]
type = VarSet
trigger1 = AnimElemNo(0) = 1
fvar(4) = -14

[State X, VelSet for Superjump]
type = VelSet
trigger1 = AnimElemNo(0) != 1
trigger1 = Time = 0
Y = FVar(4)



[Statedef 602 - Super Jump Fwd]
physics = S
type = S
ctrl = 0
anim = 40

[State -3, エフェクト]
type = Explod
trigger1 = NumExplod(6010) = 0
anim = 6010
pos = 0,-10
postype = p1
id = 6010
ignorehitpause = 1
persistent = 0
sprpriority = 6
ownpal = 1
ontop = 1
scale = 0.5,0.5

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 40
trigger1 = Time = 0
value = 40

[state 700, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 700, 2]
type = varset
triggerall = var(54) <=0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 700, 3]
type = varset
triggerall = var(54) <=0
trigger1 = command = "holdback"
sysvar(1) = -1

[state 700, 2]
type = varset
triggerall = var(54)>0
trigger1 = 1
sysvar(1) = 1

[state 700, 5]
type = velset
trigger1 = (animtime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[state 700, 4]
type = velset
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)*1.2

[State 91, VelAdd]
type = VelAdd
trigger1 = 1
y= .53

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[state 700, 6]
type = changestate
trigger1 = animtime = 0
value = 703
ctrl = 1



[Statedef 703]
physics = a
type = a
ctrl = 1

[State 1200, ???]
type = PlaySnd
trigger1 = time = 1
value = S105,0

[State 0, ]
type = explod
trigger1 = vel y <= -0.5 && numexplod(701) <= 5 && timemod = 3,1
anim = F701
id = 701
postype = p1
pos = const(size.mid.pos.x),const(size.mid.pos.y)-20
random = 20+const(size.air.back)+const(size.air.front),15
vel = 0,1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, ]
type = PlaySnd
trigger1 = time = 1
persistent = 0
value = S8,0

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5

[State 91, VelAdd]
type = null;VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 41
trigger1 = Time = 0
value = 41

[state 701, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
trigger1 = vel x <= 0
trigger1 = vel x > -2
x = -.05

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = vel x < 5
trigger1 = time >= 0
x = .10

[state 701, 5]
type = velset
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = time >= 0
trigger1 = vel x = 0
x = 0

[State 180, Varset]
type = VarSet
trigger1 = 1
var(8) = 1


[Statedef 704 - Super Jump Back]
physics = S
type = S
ctrl = 0
anim = 40

[State -3, エフェクト]
type = Explod
trigger1 = NumExplod(6010) = 0
anim = 6010
pos = 0,-10
postype = p1
id = 6010
ignorehitpause = 1
persistent = 0
sprpriority = 6
ownpal = 1
ontop = 1
scale = 0.5,0.5

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 40
trigger1 = Time = 0
value = 40

[state 700, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 700, 2]
type = varset
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 700, 3]
type = varset
trigger1 = command = "holdback"
sysvar(1) = -1

[state 700, 5]
type = velset
trigger1 = (animtime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[state 700, 4]
type = velset
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)*1.2

[State 91, VelAdd]
type = VelAdd
trigger1 = 1
y= .53

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[state 700, 2]
type = PlaySnd
trigger1 = time = 0
value = 710,0
volumescale = 190

[state 700, 6]
type = changestate
trigger1 = animtime = 0
value = 705
ctrl = 1



[Statedef 705]
physics = a
type = a
ctrl = 1

[State 1200, ???]
type = PlaySnd
trigger1 = time = 1
value = S105,0

[State 0, ]
type = explod
trigger1 = vel y <= -0.5 && numexplod(701) <= 5 && timemod = 3,1
anim = F701
id = 701
postype = p1
pos = const(size.mid.pos.x),const(size.mid.pos.y)-20
random = 20+const(size.air.back)+const(size.air.front),15
vel = 0,1
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, ]
type = PlaySnd
trigger1 = time = 1
persistent = 0
value = S8,0

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5


[State 91, VelAdd]
type = null ;VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 41
trigger1 = Time = 0
value = 41

[state 701, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
trigger1 = vel x <= 0
trigger1 = vel x > -4
x = -.05

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = vel x < 5
trigger1 = time >= 0
x = .05

[state 701, 5]
type = velset
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = time >= 0
trigger1 = vel x = 0
x = 0

[State 180, Varset]
type = VarSet
trigger1 = 1
var(8) = 1

[State X, VelSet for Superjump]
type = Null
trigger1 = AnimElemNo(0) = 1
fvar(4) = -14

[State X, VelSet for Superjump]
type = Null
trigger1 = AnimElemNo(0) != 1
trigger1 = Time = 0
Y = FVar(4)

[Statedef -2]

;#ADD004BASIC PIEs#
;##[a4b_-2_start.v20200523]##
;//==========================
;// add004-sctrls-start
;//==========================
;sys::-2::partners_standby ; ???????
[state 0]
	type=selfstate
	value=190190
	ctrl=0
	;;---
	triggerall=!ishelper && numpartner && roundstate=2 && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	triggerall=(stateno!=[190190,190199]) && playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	;;---// switch / change ;(??)
	trigger1=sysfvar(4)<1 && ( ctrl || (time<2 && stateno<600) ) && playerid(floor(sysfvar(0))),var(48)=11
	trigger1=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
	;;---// assist ;(??)
	trigger2=sysfvar(4)=1 && ( ctrl || (stateno-playerid(floor(sysfvar(0))),var(53+id-playerid(floor(sysfvar(0))),sysvar(0))!=[0,999]) )
	trigger2=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
	;;---// switch-canceling ;(??????)
	trigger3=sysfvar(4)=2 && ( ctrl || stateno<160 )
	trigger3=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
	;;---// player-priority ;(??)
	trigger4=sysfvar(4)<1 && playerid(floor(sysfvar(0))),var(15)!=id
	;;---
	ignorehitpause=1

;sys::-2::partners_change_interrupted ; ??????
[state 0]
	type=varset
	trigger1=!ishelper && numpartner && roundstate=2 && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(48)=21 && sysfvar(4)<1
	sysfvar(4)=2 ;; (0:main / 1:assist / 2:switch-canceling)

;sys::-2::helper::bar004 ; ?????
[state 0]
	type=helper
	triggerall=!ishelper && !numhelper(90900)
	trigger1=numpartner
	trigger1=id<(partner,id) && partner,numhelper(90900)=0
	trigger2=!numpartner
	id=90900
	stateno=90900
	helpertype=normal
	ownpal=1
;op;	size.ground.front=###
;op;	size.ground.back=###
	size.air.front=2108130 ;; <<-version
;op;	size.air.back=###
	size.height=0 ;; 1;; <<-powerbar off mode
	ignorehitpause=1
	supermovetime=88888
	pausemovetime=88888
	;---
;op;	size.xscale=0
;op;	size.yscale=0
	;---
	pos=0,88888

;sys::-2::get_helper::bar004_id ; ID??
[state 0]
	type=varset
	trigger1=!ishelper && numhelper(90900)
	trigger1=(helper(90900),var(0)=90900) && (sysfvar(0)!=helper(90900),id)
	sysfvar(0)=(helper(90900),id)

;sys::-2::get_players_id2
[state 0]
	type=varset
	trigger1=!ishelper && numpartner
	trigger1=!numhelper(90900) && (partner,numhelper(90900)) && (sysfvar(0)!=(partner,sysfvar(0)))
	sysfvar(0)=(partner,sysfvar(0))

;sys::-2::bk/jd_system ; ?????/????D
[state 0]
	type=hitoverride
	triggerall=!ishelper && roundstate=2 && alive && (ctrl || stateno=52)
	trigger1=numprojid(195502)||numprojid(195503)
	trigger2=numpartner
	trigger2=partner,numprojid(195502)||partner,numprojid(195503)
	attr=sca,na,sa,ha,np,sp,hp
	stateno=195500
	time=1
	ignorehitpause=1


;//==========================
;//==========================
;;>>@Config.Face>>
;sys::-2::face_d_mod
[state 0]
	type=removeexplod
	trigger1=roundstate!=2 || (stateno=5150 && time=5 && !alive)
	trigger2=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger2=(playerid(floor(sysfvar(0))),var(0)=90900)
	trigger2=!(playerid(floor(sysfvar(0))),var(9)&4) || (playerid(floor(sysfvar(0))),var(9)&262144)
	id=490600
	ignorehitpause=1

;sys::-2::face_d_main ; portrait (?)
[state 0]
	type=explod
	trigger1=!ishelper && alive && !numexplod(490600) && selfanimexist(909002)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && roundstate=2
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490600)
	trigger1=id=playerid(floor(sysfvar(0))),var(15)
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909002
	space=screen
	postype=left
	facing=ifelse(teamside=1,1,-1)
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(20))), floor(const240p(playerid(floor(sysfvar(0))),fvar(22)))
	scale=playerid(floor(sysfvar(0))),fvar(24), playerid(floor(sysfvar(0))),fvar(26)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(32))
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(28))/1000, floor(playerid(floor(sysfvar(0))),fvar(28))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;;sys::-2::face_d_partner_#+option
[state 0]
	type=explod
	trigger1=numpartner
	trigger1=!ishelper && alive && !numexplod(490600) && selfanimexist(909001)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && roundstate=2
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490601+(gametime%numpartner))
	trigger1=(id+numpartner+1-playerid(floor(sysfvar(0))),var(15))%(numpartner+1)=(gametime%numpartner)+1
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909001
	space=screen
	postype=left
	facing=ifelse(teamside=1,1,-1)
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(21) +playerid(floor(sysfvar(0))),fvar(34)*(gametime%numpartner) )), floor(const240p(playerid(floor(sysfvar(0))),fvar(23) +playerid(floor(sysfvar(0))),fvar(35)*(gametime%numpartner) ))
	scale=playerid(floor(sysfvar(0))),fvar(25) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner), playerid(floor(sysfvar(0))),fvar(27) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(33))+(gametime%numpartner)*10
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(29))/1000, floor(playerid(floor(sysfvar(0))),fvar(29))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;#Options_Char_Name
;sys::-2::name_d_main_left&right
[state 0]
	type=explod
	trigger1=numexplod(490600)=1 && selfanimexist(909010+teamside)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && id=playerid(floor(sysfvar(0))),var(15)
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909010+teamside
	space=screen
	postype=left
	facing=1
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(10))), floor(const240p(playerid(floor(sysfvar(0))),fvar(12)))
	scale=playerid(floor(sysfvar(0))),fvar(14), playerid(floor(sysfvar(0))),fvar(16)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(32))+2
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(18))/1000, floor(playerid(floor(sysfvar(0))),fvar(18))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;;sys::-2::name_d_partner_#left&right
[state 0]
	type=explod
	trigger1=numpartner
	trigger1=numexplod(490600)=1 && selfanimexist(909010+teamside)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490601+(gametime%numpartner))
	trigger1=(id+numpartner+1-playerid(floor(sysfvar(0))),var(15))%(numpartner+1)=(gametime%numpartner)+1
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909010+teamside
	space=screen
	postype=left
	facing=1
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(11) +playerid(floor(sysfvar(0))),fvar(34)*(gametime%numpartner) )), floor(const240p(playerid(floor(sysfvar(0))),fvar(13) +playerid(floor(sysfvar(0))),fvar(35)*(gametime%numpartner) ))
	scale=playerid(floor(sysfvar(0))),fvar(15) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner), playerid(floor(sysfvar(0))),fvar(17) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(33))+(gametime%numpartner)*10+3
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(19))/1000, floor(playerid(floor(sysfvar(0))),fvar(19))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;//==========================
;;>>@Config.Camera>>
;sys::-2::camera_nc ; ????
[state 0]
	type=screenbound
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	movecamera=0,0
	ignorehitpause=1
;sys::-2::camera_np
[state 0]
	type=playerpush
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	ignorehitpause=1
;sys::-2::camera_nc2
[state 0]
	type=screenbound
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && (playerid(floor(sysfvar(0))),var(7)&65536) ;; system_switch
	value= ((numpartner && sysfvar(4)<1) || !numpartner) ;; [def=0]
	movecamera=0,0 ;; [x,y]
	ignorehitpause=1

;//==========================
;sys::-2::add.option2-noko
[state 0] ;; opt-noko
	type=assertspecial
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	trigger1=id=playerid(floor(sysfvar(0))),var(15) && (playerid(floor(sysfvar(0))),var(9)&65536) ;; opt-noko
	flag=noko
	ignorehitpause=1
;sys::-2::add.option3-life-mod
[state 0] ;; opt-life-mod
	type=lifeadd
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	trigger1=id=playerid(floor(sysfvar(0))),var(15) && playerid(floor(sysfvar(0))),var(23)!=0 ;; opt-mod-life
	value=playerid(floor(sysfvar(0))),var(23)
	kill=0
	ignorehitpause=1

;//==========================
;// optional settings
;sys::-2::guard_crush_fx ; ????????
[state 0]
	type=palfx
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (gametime%5=0) && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(36)>=800
	time=2
	add=200,0,0
;sys::-2::guard_crush_cs
[state 0]
	type=changestate
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(36)>=1000
	value=190010
	ignorehitpause=1
;;--- dizzy
;sys::-2::goto-dizzy_s/c
[state 0] ;[.03-2d1]
	type=selfstate
	trigger1=(stateno=5001 || stateno=5011) && hitover      && alive && !ishelper && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
	value=195201;; (goto-dizzy:190116)
;sys::-2::goto-dizzy_a/l
[state 0] ;[.03-2d2]
	type=selfstate
	trigger1=(stateno=5030 || stateno=5071) && hitshakeover && alive && !ishelper && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
	value=195050
;sys::-2::goto-dizzy_fd
[state 0] ;[.03-2e1]
	type=selfstate
	trigger1=(stateno=[5110,5111]) && alive && !ishelper && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
	value=195110
;;--- fadeout when KOed ; KO????
;sys::-2::st5150-1
[state 0]
	type=varset
	trigger1=stateno=5150 && time=1 && alive=0 && !ishelper && numpartner
	sysvar(1)=(roundstate<=2)
;sys::-2::st5150-2
[state 0]
	type=assertspecial
	trigger1=stateno=5150 && alive=0 && !ishelper && numpartner && sysvar(1) && (((time=[80,150]) && time%10<5) || time>150)
	flag=invisible
	flag2=noshadow
;;--- intro-pos-reset
;;--- <<IKEMEN????>>
;sys::-2::st5900-f
[state 0]
	type=turn
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>1 && facing=ifelse(teamside=1,-1,1)
;sys::-2::st5900-pp3
[state 0]
	type=posset
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>1 && playeridexist(id-2)
	trigger1=playerid(id-2),ishelper=0 && playerid(id-2),teamside=teamside
	x=const240p(120)*ifelse(teamside=1,-1,1)
;sys::-2::st5900-pp4
[state 0]
	type=posset
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>2 && playeridexist(id-3)
	trigger1=playerid(id-3),ishelper=0 && playerid(id-3),teamside=teamside
	x=const240p(145)*ifelse(teamside=1,-1,1)
;//==========================
;// add004-sctrls-end
;//==========================
;##[a4b_-2_end]##


[State 0, ModifyExplod]
type = Explod
trigger1 = numexplod(30000) = 0
trigger1 = var(21) > 30
persistent=0
ID = 30000
anim = 30000
pos = -40,10
postype = p1
facing=1
bindtime = -1
removetime = -1
scale = 1,1
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, ModifyExplod]
type = Explod
trigger1 = numexplod(30001) = 0
trigger1 = var(21) > 30
persistent=0
ID = 30001
anim = 30001
pos = -40,10
postype = p1
facing=1
bindtime = -1
removetime = -1
scale = 0.5,1
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(21) > 0
ID = 30001
;anim = ifelse(var(13)>=90,30002,30001)
scale = (1.0*var(21)/90.0),1.0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(21) = 0
trigger2 = stateno = [3300,3301]
trigger3 = stateno = 2900
trigger4 = stateno = [3502,3508]
id = 30000
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(21) = 0
trigger2 = stateno = [3300,3301]
trigger3 = stateno = 2900
trigger4 = stateno = [3502,3508]
id = 30001

[State 0, Null]
type = Null
trigger1 = MoveContact = 1 && Var(15) < 0
trigger1 = Var(15) := (HitPauseTime)
ignoreHitPause = 1

[State 0, Spark]
Type = Helper 
TriggerAll = NumEnemy && NumTarget
TriggerAll = Var(15) = (HitPauseTime)
Trigger1 = MoveHit = 1
Trigger1 = !(Target, Time) && (Target, MoveType = H)
Trigger1 = (Var(12) := Var(12)) ** 0 || E
Trigger2 = MoveGuarded = 1
Trigger2 = !(Target, Time) && (Target, StateNO = [120,155])
Trigger2 = (Var(12) := Var(23)) ** 0 || E
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8000
Facing = -1
Pos = 0, 0
OwnPal = 1
Size.XScale = (Var(24)*0.1)
Size.YScale = (Var(24)*0.1)
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 0, Null]
type = Null
trigger1 = var(15) := -1

[state 0]
type = removeExplod
trigger1 = stateno != 609
id = 609

[state 0]
type = removeExplod
trigger1 = stateno != 610
id = 610


[state 0]
type = removeExplod
trigger1 = stateno != 620
id = 620

[state 250,11]
type = helper
triggerall = numtarget(630)
trigger1 = target(630), stateno = 328
trigger1 = !numhelper(60120)
persistent = 0
stateno = 60120
ID = 60120
postype = p2
pos = 0,500

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(25) = 0

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = stateno != [410,412]
var(43) = 0

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(39) = 0

[State -2, Reset var when the opponent recovers]
type = Varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
fvar(10) = 1

[State -2, Final Dampen]
type = null
trigger1 = (fvar(11) := fvar(10)) || 1
ignorehitpause = 1

[State -2, Dampener itself]
type = Attackmulset
trigger1 = 1
value = fvar(11)
ignorehitpause = 1

[State -1, DTCB]
type = displaytoclipboard
trigger1 = 1
text = "Damage Dampener: %f"
params = fvar(11)
ignorehitpause = 1

[State -2, P2 Recovery]
type= targetstate
trigger1= numtarget(555)


trigger1= (target(555), stateno=5020) && (target(555), alive) && (target(555), hitfall)
ID= 555
value= 5085
ignorehitpause= 1

[State -3, Corner Push Reset]
type= varset
trigger1= fvar(5)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
fvar(5)= 0

[State -3, Corner Push Initial Vel]
type= varset
trigger1= movecontact=1 && numtarget
fvar(5) = (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push Apply]
type= posadd
triggerall = stateno != [250,252]
triggerall = fvar(5)
triggerall = (statetype = S || statetype = C || (statetype=A)) && numtarget
triggerall = !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall = (target, statetype = S || target, statetype = C) && !(target, gethitvar(yvel)) && !(target, hitfall)
trigger1 = target, frontedgebodydist <= abs(target, vel x)
trigger1 = (target, gethitvar(xvel) * target, facing) > 0
trigger2 = target, backedgebodydist <= abs(target, vel x)
trigger2 = (target, gethitvar(xvel) * target, facing) < 0
x = ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(5)

[State -3, Corner Push Friction]
type= varset
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(5) = fvar(5)*0.85

;  --- Uno Tag System v3.2.1 STATEDEF -2 ---

[State -2, deactivate tag]
type = VarSet
triggerall = sysvar(4) > 0
triggerall = sysvar(4) != 6
trigger1 = roundstate > 2
trigger1 = Win || Lose
trigger2 = NumPartner
trigger2 = Roundstate < 1
trigger2 = teammode = Simul
trigger2 = !Partner, sysvar(4)
trigger2 = Time = [1,2]
trigger3 = Partner, sysvar(4)
trigger3 = !Life
sysvar(4) = 0

[State -2, def]
type = VarSet
triggerall = teammode = Simul
triggerall = NumPartner
triggerall = Partner, StateNo != [1251110,1251114]
trigger1 = sysvar(4) = 10
trigger2 = sysvar(4) != 2 && PrevStateNo = 1251131
sysvar(4) = 15

[State -2, Uno]
type = null ;ParentVarSet
trigger1 = PrevStateNo = 1251106
sysvar(4) = 7

[State -2, Eksena]
type = ScreenBound
triggerall = teammode = Simul
trigger1 = NumPartner && Partner, sysvar(4) = 4
trigger1 = StateNo = 1251131 || prevStateNo = 1251131
value = 1
movecamera = 1,1

[State -2, no_throw]
type = NotHitBy
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = sysvar(4) = [8,9]
trigger1 = StateNo != 1251112
value = , AT

[State -2, def]
type = VarSet
triggerall = teammode = Simul
triggerall = NumPartner && sysvar(4) != 15
triggerall = Partner, Time = [0,1]
trigger1 = Partner, StateNo = 1251104
trigger2 = Partner, StateNo = 1251110
trigger2 = StateNo != [1251101,1251133]
sysvar(4) = 1

[State -2, GTG]
type = ChangeState
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = Life && Partner, Life
trigger1 = PrevStateNo = 1251126
trigger1 = StateNo != 1251111
value = 1251111
ignorehitpause = 1

[State -2, Oh No!]
type = SelfState
triggerall = teammode = Simul
triggerall = sysvar(4) != [8,9]
triggerall = sysvar(4) != [12,15]
trigger1 = prevStateNo = 1251112
trigger1 = !(StateNo = [1251101,1251133])
value = 1251112
ctrl = 0

[State -2, PowerReset]
type = poweradd
triggerall = teammode = Simul
trigger1 = sysvar(4) = 5
trigger1 = RoundNo < 2
trigger1 = RoundState < 2
trigger1 = Time = 0
value = -Power
persistent = 0

[State -2, PowerAdd]
type = poweradd
triggerall = teammode = Simul
trigger1 = sysvar(4) = 5 && power < 900
trigger1 = RoundNo < 2
trigger1 = RoundState < 2
trigger1 = Time = 1
value = 1000
persistent = 0

[State -2, prior]
type = SprPriority
triggerall = teammode = Simul
trigger1 = NumPartner && Partner, sysvar(4) = 2
trigger2 = (sysvar(4) = [8,9]) && StateNo != [1251110,1251111]
value = 5

[State -2, err]
type = ChangeState
triggerall = teammode = Simul
trigger1 = NumPartner && ID > Partner, ID
trigger1 = roundstate = 2 && sysvar(4)
trigger1 = StateNo = 0 && pos Y < 0
value = 1251112

; Tag active ctrl
[State -2, ctrl]
type = SelfState
trigger1 = TeamMode = Simul
trigger1 = NumPartner
trigger1 = Partner, sysvar(4)
trigger1 = !sysvar(4)
trigger1 = sysvar(4) != 8 && Partner,sysvar(4) != 8 && Partner,sysvar(4) != 12
trigger1 = StateNo != 5900
trigger1 = Partner, sysvar(4) != [2,15]
trigger1 = RoundState = 2
trigger1 = Life && Partner, Life
trigger1 = StateNo != [1000,1251199]
value = 1251112
ctrl = 0

[State -2, 1]
type = SelfState
value = 1251106
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = StateNo != 1251106 && Partner, StateNo = [1251128,1251129]

[State -2, 1]
type = SelfState
value = 1251131
triggerall = teammode = Simul
triggerall = NumPartner && Partner, Time = [0,1]
triggerall = (StateNo = 1251112 || StateNo = 1251114) && MoveType != A
trigger1 = Partner, StateNo = 1251132 || Partner, prevStateNo = 1251132
trigger2 = Partner, StateNo = 1251127 && !NumHelper(1251101)

[State -2, cancelfx]
type = PalFx
triggerall = teammode = Simul
triggerall = RoundState = 2
triggerall = Time = [0,1]
trigger1 = StateNo = 1251123
trigger2 = StateNo = 1251125 && NumTarget
Time = 6
add = (110 + Time*15), (110 + Time*15), (190 + Time*15)
sinadd =-245, -245, -250, (40 + Time*5)

[State -2, TargetVelAdd]
type = TargetVelAdd
triggerall = teammode = Simul
trigger1 = NumTarget && numPartner
trigger1 = !(Target, StateNo = [1251117,1251119]) && !(Target, PrevStateNo = [1251117,1251119])
trigger1 = Roundstate = 2
trigger1 = prevStateNo = 1251126
trigger1 = Partner, StateNo = 1251102 && !(Partner, MoveContact)
trigger1 = Target, statetype != A && Target, GetHitVar(xvel) < 0
x = 0.12

[State -2, drop]
type = TargetDrop
triggerall = teammode = Simul
triggerall = NumTarget
triggerall = Time = [0,1]
trigger1 = !Life
trigger2 = StateNo = [1251101,1251105]
trigger3 = StateNo = [1251115,1251116]  
trigger4 = StateNo = 1251106 || StateNo = 1251123

[State -2, Buwelo]
type = PosFreeze
triggerall = teammode = Simul
trigger1 = PrevStateNo = 1251102 && StateNo != 1251123
trigger1 = sysvar(4) = 15
trigger1 = Anim != [42,45]
trigger1 = Time <= 5
trigger1 = NumTarget && Target, Statetype != A
trigger1 = MoveType = A

[State -2, aircombo]
type = VelMul
triggerall = teammode = Simul
trigger1 = NumTarget || p2BodyDist x < 0
trigger1 = PrevStateNo = 1251102
trigger1 = StateNo != [1251100, 1251190]
trigger1 = MoveType = A && StateNo < 1000
x = ifelse(p2BodyDist x < 0,0.7,0.9)
y = ifelse(vel y < 2,2,0.9)

[State -2, velfollow]
type = VelAdd
triggerall = teammode = Simul
trigger1 = PrevStateNo = 1251123 && (NumTarget && Target, vel y < -0.6)
trigger1 = MoveType = A && (Time = [0,3])
y = -1.2

[State -2, Target]
type = TargetState
triggerall = teammode = Simul
trigger1 = NumTarget
trigger1 = StateNo = 1251102 || PrevStateNo = 1251102 || StateNo = 1251123 || PrevStateNo = 1251123 || StateNo = 1251126 || PrevStateNo = 1251126
trigger1 = (Target, Pos Y < 0) && !(Target, StateNo = [120,152]) && (Target, StateNo != [1251109,1251119]) && MoveContact  && (Target, Anim = [5100,5170])  && (Target, Anim != [5110,5120])  && Target, PrevStateNo != 1251119 
trigger1 = (Target, Statetype != A) ; && (Target, Statetype != S)  && (Target, Statetype != C)
trigger1 = !Target, HitOver
value = 1251119
ignorehitpause = 1

[State -2, Ov]
type = TargetState
triggerall = teammode = Simul
triggerall = NumTarget && numPartner
triggerall = !(Target, StateNo = [120,152]) && !(Target, Anim = [120,152]) && Partner, StateNo = [1251101,1251133]
triggerall = Time = [0,2]
trigger1 = StateNo = 1251125 && Target, StateType != A
trigger2 = (StateNo = 1251126 || PrevStateNo = 1251126) && Target, Pos Y >= -10 && (Target, StateNo != [1251109,1251119]) && (Target, StateNo != [5000,5500])
value = 1251117
ignorehitpause = 1

[State -2, Ov2]
type = TargetState
triggerall = teammode = Simul
triggerall = NumTarget = 1
trigger1 = (Target, StateNo != [1251109,1251119]) && !(Target, StateNo = [120,152]) && !(Target, Anim = [120,152]) && ((Target, StateNo != [5000,5500]) || (Target, PrevStateNo != 1251119 && Target, StateNo = [5030,5100])) && !Target, HitOver
trigger1 = (StateNo = 1251125 && Time = [0,2]) || StateNo = 1251126 || PrevStateNo = 1251126
value = 1251119
ignorehitpause = 1

[State -2, T_T]
type = TargetVelSet
triggerall = teammode = Simul
triggerall = NumTarget = 1 && Target, Movetype = H && Target, vel x != 0
trigger1 = StateNo = 1251126 || sysvar(4) = 3
x = ifelse((Target, vel x > 0),0.55,-0.55)

[State -2, UM]
type = SelfState
triggerall = teammode = Simul
trigger1 = Numpartner && Partner, StateNo = 1251106
trigger1 = StateNo = [1000,4500]
value = 1251129

; ------ Uno Tag System v3.2 END LINE ------

;  

[state -2,Xファクターモドキ変動補正係数]
type = varset
trigger1 = 1
fvar(12) = 0.25

[state -2,XファクターモドキＬＶ２ライフ条件]
type = varset
trigger1 = 1
fvar(13) = 0.6

[state -2,XファクターモドキＬＶ２ライフ条件]
type = varset
trigger1 = 1
fvar(14) = 0.3


[state -2,Xファクターゲージアップ係数]
type = varset
trigger1 = 1
fvar(15) = 0.5


[state -2,Xファクター基礎時間]
type = varset
trigger1 = 1
var(28) = 300

[state -2,Xファクターゲージアップ係数]
type = varset
trigger1 = 1
var(29) = 300





[state -2]
type = varset
trigger1 = NumHelper(8500) = 0
trigger2 = NumHelper(8501) = 0
trigger3 = NumHelper(8502) = 0
trigger4 = NumHelper(8503) = 0
trigger5 = NumHelper(8504) = 0
trigger6 = NumHelper(8505) = 0
var(40) = 0

[state -2]
type = varset
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
trigger1 = p2dist x >= 150
trigger1 = random <= 150
trigger1 = enemynear(var(14)),movetype != H
trigger1 = gametime%60 = [25,30]
var(40) = 2

   

[state -2]
type = varset
trigger1 = RoundsExisted = 0
trigger1 = roundstate = [1,2]
var(48) = 0

[state -2]
type = varadd
trigger1 = win
var(48) = 1
persistent=0
 

[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim = 5000 || anim = 5010 || anim = 5020
trigger1 = random = [0,300]
value = 5000, 2
channel = 0
ignorehitpause = 1

[State -1, タッグ用生死判別]
Type = VarSet
triggerall = RoundState = 2
trigger1 = NumEnemy = 1
trigger2 = NumEnemy = 2
trigger2 = EnemyNear(0),life > 0
var(14) = 0
IgnoreHitPause = 1

[State -1, タッグ用生死判別]
Type = VarSet
triggerall = RoundState = 2
trigger1 = NumEnemy = 2
trigger1 = EnemyNear(0),life <= 0
var(14) = 1
IgnoreHitPause = 1

[state -2]
type = varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(30) = 0
IgnoreHitPause = 1

[state -2]
type = varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(31) = 0
IgnoreHitPause = 1

[state -2]
type = varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(32) = 0
IgnoreHitPause = 1

[state -2]
type = varset
trigger1 = numenemy = 1
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
trigger3 = numenemy = 2
trigger3 = enemy(0),movetype != H
trigger3 = enemy(1),movetype != H
var(33) = 0
IgnoreHitPause = 1

[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim = 5000 || anim = 5010 || anim = 5020
trigger1 = random = [301,999]
value = 5000, 3
channel = 0
ignorehitpause = 1

[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim = 5001 || anim = 5011 || anim = 5021
trigger1 = random = [0,600]
value = 5000, 1
channel = 0
ignorehitpause = 1

[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim != [5000,5001]
trigger1 = anim != [5010,5011]
trigger1 = anim != [5020,5021]
trigger1 = random = [601,999]
value = 5000, 0
channel = 0
ignorehitpause = 1

[State 419, エフェクト]
type = RemoveExplod
trigger1 = stateno != 411
ID = 419

[State 419, エフェクト]
type = RemoveExplod
trigger1 = stateno != 950 && stateno != 194
ID = 952

[State -2]
type = AfterImage
trigger1 = numhelper(3803) = 0
time = 0

 


[state -2]
type=varset
triggerall = roundstate = 2
trigger1=ctrl
trigger2 = movetype != i
var(0) = 1




[state -2 chearge]
type = varset
triggerall = var(59) = 0
trigger1 = command !="hold_x"
trigger1 = command !="hold_y"
trigger1 = command !="hold_z"
trigger1 = ((ctrl = 0 && (stateno !=[200,450]) && (stateno != [600,620]) && (stateno != 50)) || (ctrl && stateno != 50 && (var(21) <=89)) || (ctrl = 0 && ((stateno = [200,450]) || (stateno = [600,620]) || stateno = 50) && (var(21) <= 89)))
trigger2 = numhelper(1401) = 1
trigger3 = roundstate !=2
var(21) = 0
ignorehitpause = 1

[state -2,2]
type = varadd
triggerall = var(59) = 0
triggerall = StateNo !=1400
triggerall = !numhelper(1401)
triggerall = roundstate =2
triggerall = stateno != 990
trigger1 = (command ="hold_x" || command ="hold_y" || command ="hold_z")
var(21) = 1
ignorehitpause = 1


[state -2]
type = varset
triggerall = var(59) = 0
triggerall = !numhelper(1401)
triggerall = roundstate =2
triggerall = var(21) > 90

trigger1 = (command ="hold_x" || command ="hold_y" || command ="hold_z")
var(21) = 90
ignorehitpause = 1

[state -2]
type = varset
triggerall = var(59) > 0
trigger1 = numhelper(1401) = 1
trigger2 = roundstate !=2
trigger3 = stateno = 1400
trigger4 = stateno = 1004
var(21) = 0
ignorehitpause = 1

[state -2,2]
type = varadd
triggerall = var(59)
triggerall = StateNo !=1400
triggerall = !numhelper(1401)
trigger1 = roundstate =2
var(21) = 1
ignorehitpause = 1


[state -2]
type = varset
triggerall = var(59)
triggerall = !numhelper(1401)
triggerall = roundstate =2
trigger1 = var(21) > 90
var(21) = 90
ignorehitpause = 1
 

 
[State -2]
type = playsnd
trigger1 = animelem = 3
trigger1 = stateno = 20 || stateno = 4120
value = 20, 1
ignorehitpause = 1

[State -2]
type = playsnd
trigger1 = animelem = 8
trigger1 = stateno = 20 || stateno = 4120
value = 20, 2
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = stateno = 0
var(36) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(36) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(36) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[state -2]
type = varset
trigger1 = NumHelper(1401) >0
var(10) = 10000

[state -2]
type = varset
trigger1 = !NumHelper(1401)
var(10) = 0



[state buki]
type = varset
trigger1 = NumHelper(8500) = 0
trigger1 = NumHelper(8501) = 0
trigger1 = NumHelper(8502) = 0
trigger1 = NumHelper(8503) = 0
trigger1 = NumHelper(8504) = 0
trigger1 = NumHelper(8505) = 0
trigger1 = NumHelper(8510) = 0
trigger1 = NumHelper(8511) = 0
trigger1 = NumHelper(8512) = 0
trigger1 = NumHelper(8513) = 0
trigger1 = NumHelper(8514) = 0
trigger1 = NumHelper(8515) = 0
var(56) = 0


[state buki]
type = varset
trigger1 = NumHelper(8500) > 0
trigger2 = NumHelper(8501) > 0
trigger3 = NumHelper(8502) > 0
trigger4 = NumHelper(8503) > 0
trigger5 = NumHelper(8504) > 0
trigger6 = NumHelper(8505) > 0
trigger7 = NumHelper(8510) > 0
trigger8 = NumHelper(8511) > 0
trigger9 = NumHelper(8512) > 0
trigger10 = NumHelper(8513) > 0
trigger11 = NumHelper(8514) > 0
trigger12 = NumHelper(8515) > 0
var(56) = NumHelper(8500) + NumHelper(8501) +NumHelper(8502) + NumHelper(8503) + NumHelper(8504) +NumHelper(8505) + NumHelper(8510) + NumHelper(8511) +NumHelper(8512) + NumHelper(8513) + NumHelper(8514) +NumHelper(8515)



[state buki]
type = varset
trigger1 =numhelper(8500) > 0
var(57) = helper(8500),var(57)


[state -2, 特殊KOボイス処理]
type = varadd
trigger1 = lose
trigger1 = var(50) < 100
var(50) = 1

[state -2, 特殊KOボイス処理]
type = varadd
trigger1 = lose
trigger1 = var(50) = 1
var(49) = 1

[State -2, 特殊KOボイス処理]
type = AssertSpecial
trigger1 = !numpartner
flag = nokosnd

[State -2, 特殊KOボイス処理]
type = PlaySnd
trigger1 = !numpartner
trigger1 = var(50) = 1
trigger1 = loseko
trigger1 = !alive

trigger1 = !(p2name = "dante" && (var(49) >= 2 || teammode = turns))
value = 11,0

[State -2, 特殊KOボイス処理]
type = PlaySnd
trigger1 = !numpartner
trigger1 = var(50) = 1
trigger1 = loseko
trigger1 = !alive

trigger1 = p2name = "dante" && (var(49) >= 2 || teammode = turns)
value = 11,1




[State -2]
type = ModifyExplod
trigger1 = numexplod(3520)
ID = 3520
scale = 1.5-(0.1*(time-1)), 1.5-(0.1*(time-1))
persistent = 0


[Statedef -3]

;  --- Uno Tag System v3.2.1 STATEDEF -3 ---


; Tag active definer
[State -2, def]
type = VarSet
triggerall = teammode = Simul
triggerall = NumPartner
trigger1 = sysvar(4) = [8,9]
trigger1 = !(Partner, Life) || (Partner, StateNo = [1251110,1251114])
trigger2 = Partner, StateNo = [1251110,1251114]
trigger2 = sysvar(4) != [2,15] 
trigger3 = sysvar(4) = 5
trigger3 = Roundstate = 2 && StateNo = [1251111,1251114]
trigger4 = sysvar(4) = 14
trigger4 = MoveType = H && Partner, StateNo = [1251101,1251133]
trigger5 = sysvar(4) = 15 && NumEnemy
trigger5 = EnemyNear, StateNo = [0,50]
trigger6 = sysvar(4) = 15 && StateNo != [1251101,1251133]
trigger6 = NumTarget = 0 && Partner, NumTarget = 0
sysvar(4) = 1

[State -2, def_Partner]
type = VarSet
trigger1 = teammode = simul
trigger1 = roundstate < 1
sysvar(4) = 1 + ((ID > Partner, ID)*4)

[State -3, enterTheScreen]
type = ChangeState
triggerall = teammode = Simul
trigger1 = sysvar(4)
trigger1 = NumPartner
trigger1 = StateNo = [1251112,1251114]	
trigger1 = Life 
trigger1 = (Partner, StateNo = [1251109,1251111]) || (Partner, StateNo = 1251125 && Partner, Time > 0)
trigger1 = (Partner, StateNo != 1251110) || (Partner, StateNo = 1251110	&& Partner, Time > 24)
value = ifelse((Partner, StateNo = 1251125),1251131,1251101)

; Jump into the screen (Change Attack)
[State -3, enterTheScreen]
type = ChangeState
triggerall = teammode = Simul
triggerall = sysvar(4)
triggerall = NumPartner
triggerall = StateNo = 1251112 && Life
trigger1 = ((Partner, StateNo = 1251126 && Partner, Time > 0) || Partner, PrevStateNo = 1251126)
trigger2 = Partner, NumHelper(1251105)
value = 1251102

; Jump into the screen (Game is OVER)
[State -3, enterTheScreen]
type = ChangeState
triggerall = teammode = Simul
triggerall = sysvar(4)
triggerall = NumPartner
trigger1 = Alive
trigger1 = StateNo = [1251112,1251114]
trigger1 = Time > 0
trigger1 = roundstate > 2
trigger1 = Win || LoseTime || WinTime || drawgame
value = 1251120

[State -3, NoJC]
type = AssertSpecial
triggerall = teammode = Simul
triggerall = NumPartner
trigger1 = Partner, sysvar(4) = [12,13]
trigger2 = sysvar(4) = [8,9]
trigger3 = PrevStateNo = [1251112,1251133]
trigger4 = sysvar(4) = 15 && Partner, Time < 150
flag = nojugglecheck
ignorehitpause = 1

[State -3, RemoveExplod]
type = RemoveExplod
triggerall = teammode = Simul
trigger1 = StateNo = [1251110,1251113]
trigger2 = !Life
trigger3 = StateNo = [1251126,1251127]

[State -3, Quiet]
triggerall = teammode = Simul
type = AssertSpecial
trigger1 = NumPartner
trigger1 = Partner, sysvar(4) = 7
trigger1 = !Alive && !NumHelper(1251130)
flag = nokosnd

[State -3, Dark]
type = AssertSpecial
triggerall = teammode = Simul
triggerall = numpartner
trigger1 = StateNo = 1251106
trigger2 = StateNo = 1251127 || Partner, StateNo = 1251127
trigger3 = NumHelper(1251101) && StateNo = 1251131 && Partner, StateNo != 1251125
flag = noBG
flag2 = noFG
flag3 = Timerfreeze
ignorehitpause = 1

[State -3, leavefx]
type = PalFx
triggerall = teammode = Simul
trigger1 = StateNo = 1251111
trigger2 = StateNo = 1251127
trigger3 = (sysvar(4) = [8,9]) && StateNo = 1251110 && Time > 12
trigger4 = StateNo = 1251110 && Time > 14
Time = 2
add = 0,0,0
mul = 150,150,150

[State -3, InvBG]
type = BgPalFx
triggerall = teammode = Simul
trigger1 = NumHelper(1251130)
trigger2 = StateNo = 1251106
Time = 2
color = 0
invertall = 1
add = -16 -ceil(cos(gameTime / 60.0 * pi) * 16), -16 -ceil(cos(gameTime / 60.0 * pi) * 16), -16 -ceil(cos(gameTime / 60.0 * pi) * 16)
ignorehitpause = 1

[State -3, InvChar]
type = PalFx
triggerall = teammode = Simul
triggerall = NumEnemy
trigger1 = (Enemy, PrevStateNo = [1251128,1251129]) || (EnemyNear, PrevStateNo = [1251128,1251129])
trigger2 = Enemy, StateNo = 1251106 || EnemyNear, StateNo = 1251106
Time = 2
color = 0
add = -16 -ceil(cos(gameTime / 60.0 * pi) * 16), -16 -ceil(cos(gameTime / 60.0 * pi) * 16), -16 -ceil(cos(gameTime / 60.0 * pi) * 16)
ignorehitpause = 1

[State -3, Invert]
type = PalFx
triggerall = teammode = Simul
trigger1 = PrevStateNo = [1251128,1251129]
Time = 10
invertall = 1
mul = 150, 150, 150

[State -3, SuperPause]
type = SuperPause
triggerall = teammode = Simul
triggerall = NumPartner
trigger1 = Partner, StateNo = 1251106
trigger1 = NumHelper(1251130)
trigger2 = NumHelper(1251101) && Partner, StateNo != 1251125
trigger2 = MoveType != H
Time = 10
anim = -1
sound = -1
moveTime = 10
darken = 1
p2defmul = 0
unhittable = 1
pausebg = 1

[State -3, NoAirGuard]
type = AssertSpecial
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = sysvar(4) = 8
trigger1 = Movetype = A
trigger1 = prevStateNo = 1251133
flag = Noairguard
flag2 = nojugglecheck
flag3 = nowalk
ignorehitpause = 1

[State -3, aHit]
Type = VarSet
triggerall = teammode = Simul
Triggerall = sysvar(4) = 8 && Roundstate = 2
triggerall = NumPartner && Partner, Alive
trigger1 = Movetype = H
trigger2 = StateNo = [5000,5990]
trigger3 = StateNo = [150,151]
sysvar(4) = 9

[State -3, bangon]
type = SelfState
triggerall = teammode = Simul
trigger1 = NumPartner && sysvar(4) = 9
trigger1 = Alive && Partner, Alive
trigger1 = StateNo != 5120
trigger1 = StateNo = 5110 || Anim = 5110
trigger1 = Time >= 12
value =5120

[State -3, leavePA]
type = SelfState
triggerall = teammode = Simul
triggerall = sysvar(4) = [8,9]
triggerall = StateType != A || prevStateNo = [5000,5500]
triggerall = NumPartner
trigger1 = Roundstate = 2
trigger1 = Life && Partner, life
trigger1 = Partner, StateNo != [1251101,1251135]
trigger1 = StateNo != [200,1251199]
trigger1 = MoveType != H || ((StateNo = [5110, 5120]) && (Time >= 19 || AnimElemTime(4) >= 1))
value = ifelse((sysvar(4)=9 || (StateNo = [150,151])),1251111,1251110)
ctrl = 0

[State -3, LE]
type = SelfState
triggerall = teammode = Simul
trigger1 = StateNo = 7828
trigger1 = PrevStateNo = [1251110,1251114] 
trigger2 = sysvar(4) = [8,9]
trigger2 = Anim = 100 && StateNo != [1251101,1251133]
trigger3 = sysvar(4) = 5
trigger3 = PrevStateNo = [1251110,1251114] 
trigger3 = StateNo != [1251101,1251133]
value = 1251111

[State -3, leaveIntro]
type = SelfState
triggerall = teammode = Simul
triggerall = sysvar(4) = 5
triggerall = NumPartner
trigger1 = Roundstate >= 2
trigger1 = StateNo != [1000,1251199]
value = 1251110
ctrl = 0

[State -3, fromdark]
type = Helper
triggerall = teammode = Simul
trigger1 = sysvar(4) = 7 && !NumHelper(1251139)
trigger1 = PrevStateNo = 1251106
trigger1 = Time <= 25
Helpertype = Normal
ID = 1251139
StateNo = 1251130
name = "dark"
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999

[State -3, sb_PA]
type = ScreenBound
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = sysvar(4) = [8,9]
value = ifelse(MoveType = A,1,0)
movecamera = 0,0

[State -3, NoCtrl]
type = CtrlSet
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = StateNo != [1251111,1251112]
trigger1 = sysvar(4) = [8,9]
value = ifelse((Partner, Alive),0, 1)

[State -3, Party]
type = Null ;CtrlSet
triggerall = NumPartner
triggerall = Partner, StateNo != [1251110,1251114]
trigger1 = Partner, sysvar(4) = 2
trigger1 = Movetype != A
trigger1 = StateNo != [5000,5500]
trigger1 = Partner, StateNo != [5000,5500]
trigger1 = prevStateNo != [5000,5500]
value = ifelse((prevStateNo = [1251132,1251131]) || (Partner, StateNo = 1251125) ||(Partner, movetype = A), 0, 1)

[State -3, Party]
type = AssertSpecial
triggerall = teammode = Simul
triggerall = NumPartner
triggerall = Partner, StateNo != [1251110,1251114]
trigger1 = Partner, sysvar(4) = 2
trigger1 = Movetype != A
trigger1 = StateNo != [5000,5500]
trigger1 = Partner, StateNo != [5000,5500]
trigger1 = prevStateNo != [5000,5500]
flag = nojugglecheck
;flag2 = nowalk

[State -3, PartyDone]
type = Null ;CtrlSet
triggerall = NumPartner
triggerall = !Ctrl
triggerall = Partner, sysvar(4) = 2
triggerall = Movetype = I
triggerall = StateNo != [200,5500]
trigger1 = prevStateNo = [5000,5500]
trigger2 = Partner, StateNo = 1251111
trigger3 = Partner, MoveType = H && !Partner, HitShakeOver
value = 1

[State -3, fadeOut]
type = Trans
triggerall = teammode = Simul
triggerall = NumPartner
trigger1 = !Life && Partner, Life
;trigger1 = RoundState = 2 || Partner,sysvar(4) = 7
trigger1 = Partner, sysvar(4) = 7
trigger1 = StateNo = 5150
Trans = addalpha
alpha = (256-ifelse((Partner,sysvar(4) = 7),(Time *3),(Time*2))), (Time*Time)

[State -3, fadeOut]
type=assertspecial
triggerall = teammode = Simul
triggerall = alive=0 && !ishelper && numpartner && Partner, sysvar(4) && RoundState = 2
trigger1=stateno=5150 && (((time=[80,150])&&(time%10<5))||(time>150))
trigger1=(partner,stateno!=stateno)||((partner,stateno=stateno)&&(partner,time<time))
flag=invisible
flag2=noshadow

[state -3, fadeOut]
type=posset
triggerall = teammode = Simul
trigger1 = sysvar(4)
trigger1=stateno=5150 && alive=0 && !ishelper && numpartner && (time>150)
trigger1=(partner,stateno!=stateno)||((partner,stateno=stateno)&&(partner,time<time))
trigger1 = Partner, sysvar(4)
y=-3

[state -3, dead_Var]
type = VarSet
triggerall = teammode = Simul
triggerall = !Alive
triggerall = RoundState = 2
triggerall = StateNo = [5131,5150]
triggerall = NumPartner && Partner, sysvar(4)
trigger1 = Time >= 125
trigger2 = Partner, sysvar(4) = 7
trigger2 = Time >= 85
sysvar(4) = 6

[state -3, awake_Var]
type = VarSet
triggerall = teammode = Simul
triggerall = NumPartner && roundstate = 2
trigger1 = Alive
trigger1 = sysvar(4) = 6
trigger2 = Partner, Life
trigger2 = sysvar(4) = 7
sysvar(4) = 1

[state -3, offME]
type = NotHitBy
triggerall = teammode = Simul
triggerall = NumPartner
trigger1 = sysvar(4) = 6
trigger2 = StateNo = 1251128 || PrevStateNo = 1251128
trigger3 = Partner, sysvar(4) = 6
trigger3 = (StateNo = [1251101,1251116]) || (StateNo = [1251120,1251133])
value = SCA

[state -3, disa2]
type = SelfState
triggerall = teammode = Simul
trigger1 = RoundState = 2
trigger1 = StateNo = [5110,5150]
trigger1 = sysvar(4) = 6
value = 1251113

[state -3, Ghost]
type = AssertSpecial
triggerall = teammode = Simul
triggerall = !Alive
triggerall = RoundState >= 2
triggerall = sysvar(4) = 6
trigger1 = Anim = [5000,5600]
trigger2 = PrevStateNo = [1251113,1251121]
flag = invisible
flag2 = noshadow
ignorehitpause = 1

[State -3, EndLife]
type = LifeAdd
triggerall = teammode = Simul
triggerall = RoundState = 2
trigger1 = PrevStateNo = 1251129
trigger2 = sysvar(4) = 6
value = -LifeMax

[State -3, END]
type = PosSet
triggerall = teammode = Simul
trigger1 = NumPartner
trigger1 = roundstate > 2
trigger1 = !Alive
trigger1 = PrevStateNo = 1251113
x = (Partner, pos x) - 5000*facing
y = 0

[State -3, 1251129]
type = LifeAdd
triggerall = teammode = Simul
trigger1 = PrevStateNo = 1251129 && Time > 1
value = -LifeMax

[State -3, 1251129]
type = SelfState
triggerall = teammode = Simul
trigger1 = StateNo < 5000
trigger1 = PrevStateNo = 1251129 && AnimElemNo(3) = 7
value = 5150

[State -3, Aura]
type=Helper
triggerall = teammode = Simul
triggerall= !NumHelper(1251124)
trigger1 = sysvar(4) = 7 && MoveType = I && (StateNo = 1251106 || Life <= (LifeMax*.2))
Helpertype=normal
StateNo=1251124
ID=1251124
name="AURA"
postype=p1
ownpal = 1
pausemoveTime=99999
supermoveTime=99999
 

[State -3, T_T]
type = ScreenBound
triggerall = teammode = Simul
trigger1 = roundstate > 2
trigger1 = !Alive
trigger1 = PrevStateNo = 1251113
;trigger2= EnemyNear, NumHelper(1251107) || Enemy, NumHelper(1251107)
value = 0
movecamera = 0,0

[State -3, T_T]
type = PosFreeze
triggerall = teammode = Simul
trigger1 = NumEnemy && EnemyNear, NumHelper(1251107) || Enemy, NumHelper(1251107)
trigger2 = PrevStateNo = 1251121
trigger3 = StateNo = 1251125

[State -3, T_T]
type = SelfState
triggerall = teammode = Simul
triggerall = NumPartner && sysvar(4) > 0
trigger1 = RoundState = 2  && Pos Y < 0
trigger1 = StateNo = 0 && (Partner, StateNo != [1251112,1251114])
trigger1 = PrevStateNo = [1251112,1251114]
value = 1251112

[State -3, wait out]
type = ChangeState
triggerall = teammode = Simul
triggerall = NumPartner
triggerall = RoundState = 2
triggerall = Life && Partner, Life
triggerall = StateNo != [1251110,1251114]
trigger1 = sysvar(4) = 2				; performed team attack
trigger1 = (PrevStateNo = [5000,5500]) || (StateNo != [200,1251199]) && (MoveType != H)
trigger2 = sysvar(4) = 4         		; performed Delayed Cancel
trigger2 = MoveType = I || ((Partner, prevStateNo = 1251131 || Partner, StateNo != [1251101,1251135]) && Time > 1)
trigger3 = sysvar(4) = 3          	; performed Cross Attack
trigger3 = (StateNo = 1251126 && Time > 1) && ((Partner, StateNo = 1251102 && Partner, BackEdgeBodyDist > 15) || Partner, PrevStateNo = [1251115,1251116])
trigger4 = (sysvar(4) = [2,4]) && MoveType = I && (StateNo != [1251101,1251133])
trigger5 = NumHelper(1251125)
trigger5 = StateNo = [0,199]
value = 1251111
ctrl = 0
ignorehitpause = 1

; ---- Uno Tag System v3.2 END LINE ----

;  ;]


[State -3, 効果音]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52
value = 40, 0
 
[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8510) = 0
triggerall = var(59) = 0 
trigger1 = command = "QCB_a"
helpertype = normal
name = "kyusyu"
ID = 8510
pos = -20, -70
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8511) = 0
triggerall = var(59) = 0 
trigger1 = command = "QCB_a"
helpertype = normal
name = "kyusyu"
ID = 8511
pos = -15, -110
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.48
size.yscale = 0.48

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8512) = 0
triggerall = var(59) = 0 
trigger1 = command = "QCB_a"
helpertype = normal
name = "kyusyu"
ID = 8512
pos = -10, -125
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.46
size.yscale = 0.46

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8513) = 0
triggerall = var(59) = 0 
trigger1 = command = "QCB_a"
helpertype = normal
name = "kyusyu"
ID = 8513
pos = -5, -120
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.44
size.yscale = 0.44

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8514) = 0
triggerall = var(59) = 0 
trigger1 = command = "QCB_a"
helpertype = normal
name = "kyusyu"
ID = 8514
pos = 0, -105
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.42
size.yscale = 0.42

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8515) = 0
triggerall = var(59) = 0 
trigger1 = command = "QCB_a"
helpertype = normal
name = "kyusyu"
ID = 8515
pos = 5, -75
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.4
size.yscale = 0.4
 

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8510) = 0 
trigger1 = var(59) = 0
trigger1 = command = "QCF_a"
trigger2 = var(59) != 0
trigger2 = var(40) = 2
helpertype = normal
name = "kyusyu"
ID = 8510
pos = 0, 0
postype = p1
facing= 1
stateno = 8513
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8511) = 0 
trigger1 = var(59) = 0
trigger1 = command = "QCF_a"
trigger2 = var(59) != 0
trigger2 = var(40) = 2
helpertype = normal
name = "kyusyu"
ID = 8511
pos = 0, 0
postype = p1
facing= 1
stateno = 8513
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8512) = 0 
trigger1 = var(59) = 0
trigger1 = command = "QCF_a"
trigger2 = var(59) != 0
trigger2 = var(40) = 2
helpertype = normal
name = "kyusyu"
ID = 8512
pos = 0, 0
postype = p1
facing= 1
stateno = 8513
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5



[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8513) = 0 
trigger1 = var(59) = 0
trigger1 = command = "QCF_a"
trigger2 = var(59) != 0
trigger2 = var(40) = 2
helpertype = normal
name = "kyusyu"
ID = 8513
pos = 0, 0
postype = p1
facing= 1
stateno = 8513
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5


[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8514) = 0 
trigger1 = var(59) = 0
trigger1 = command = "QCF_a"
trigger2 = var(59) != 0
trigger2 = var(40) = 2
helpertype = normal
name = "kyusyu"
ID = 8514
pos = 0, 0
postype = p1
facing= 1
stateno = 8513
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8515) = 0 
trigger1 = var(59) = 0
trigger1 = command = "QCF_a"
trigger2 = var(59) != 0
trigger2 = var(40) = 2
helpertype = normal
name = "kyusyu"
ID = 8515
pos = 0, 0
postype = p1
facing= 1
stateno = 8513
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5
 
 
[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = !ishelper
triggerall = alive
triggerall = stateno < 2900

triggerall = roundstate = 2
triggerall = stateno !=[160,169]
triggerall = (movetype != H || ((stateno = [120,155] )&& power >= 1000))
triggerall = numhelper(8600)
triggerall = helper(8600),stateno = 8601
triggerall = !numhelper(8601)

triggerall = var(41) = 0
triggerall = var(42) < 181
trigger1 = var(59) = 0
trigger1 = command = "a+++x"
trigger2 = var(59) > 0
trigger2 = stateno = 2020
trigger2 = time =0
helpertype = normal
name = "kyusyu"
ID = 8601
pos = 0, -80
postype = p1
facing= 1
stateno = 8600
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5
ignorehitpause = 1

[state -3]
type = varset
trigger1 = numhelper(8600)
trigger1 = helper(8600),stateno = 8600
trigger1 = helper(8600),time = 0
trigger2 = numhelper(8601)
trigger2 = helper(8601),stateno = 8600
trigger2 = helper(8601),time = 0
var(41) = 60
ignorehitpause = 1

[state -3]
type = varadd
trigger1 = numhelper(8600)
trigger1 = helper(8600),stateno = 8600
trigger1 = helper(8600),time = 0
trigger2 = numhelper(8601)
trigger2 = helper(8601),stateno = 8600
trigger2 = helper(8601),time = 0
var(42) = 180
ignorehitpause = 1

[state -3]
type = varadd
trigger1 = var(41) > 0
v = 41
value = -1
ignorehitpause = 1

[state -3]
type = varadd
trigger1 = var(42) > ((180*numhelper(8600))+(180*numhelper(8601)))
v = 42
value = -1
ignorehitpause = 1
 


[State -3,]
Type = ChangeState
Value = 120
TriggerAll = Var(59) != 0
triggerall = !ishelper
TriggerAll = Ctrl
Trigger1 = P2Dist X >= 0
Trigger1 = InGuardDist
Trigger1 = !(EnemyNear(0),HitDefAttr = ,NT,ST,HT)
Trigger1 = Random = [0,900]
Trigger2 = !(EnemyNear(0),HitDefAttr = ,NT,ST,HT)
Trigger2 = P2MoveType = A
Trigger2 = P2Dist X < 0
Trigger3 = Enemy,NumHelper > 0 || Enemy,NumProj > 0
Trigger3 = InGuardDist
Trigger3 = Random = [0,800]

[state -1,]
type = changestate
triggerall = var(59) != 0
triggerall = enemynear(var(14)),movetype = H
triggerall = ctrl
triggerall = palno >= 11
triggerall = (prevstateno = 280 || prevstateno = 2610)
triggerall = enemynear(var(14)),pos y <= -60
trigger1 = stateno = 2003
trigger2 = stateno = 2004
value = 40

[State -1, トリックアップ]
type = ChangeState
value = 2021
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype = S
trigger1 = p2dist x>= 120
trigger1 = ctrl
trigger1 = numhelper(1401)
trigger1 = enemynear(var(14)),ID = helper(1401),var(14)
ignorehitpause = 0

[State -1, 疾走居合い切り]
type = ChangeState
value = 1200
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype != A
trigger1 = random >= 801
trigger1 = stateno = [150,153]
trigger2 =  stateno = 252
trigger2 = var(19) = 1
trigger2 = target,stateno != [3260,3262]
trigger2= time = 5
trigger2 = random <= 500
trigger3 = ctrl
trigger3 = p2dist x >= 100
trigger3 = random = [801,850]
trigger3 = gametime%60 = [11,15]
ignorehitpause = 1

[State -3, Guard Push]
type = ChangeState
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype = S

triggerall = (random = [0,800])
trigger1 = stateno = [150,153]
ignorehitpause = 1
value = 8011


[State -3, Crouching Guard Push]
type = ChangeState
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype = C

triggerall = random = [0,600]
trigger1 = stateno = [150,153]
ignorehitpause = 1
value = 8012


[State -3, Air Guard Push]
type = ChangeState
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype = A

triggerall = random = [0,600]
trigger1 = stateno = [154,155]
ignorehitpause = 1
value = 8013


[State -1, Hadousho]
type = ChangeState
value = 2900
triggerall = var(59) != 0
triggerall = (power >= 3000 && numhelper(3803) = 0) || (power >= 5000 && numhelper(3803) = 1 ) || (power >= 2000 && numhelper(3803) = 0)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = var(56) = 0
triggerall = ((stateno != [2003,2004]) || palno <= 10)
trigger1 =  (stateno = 252 && var(19) = 1) || ctrl
trigger1 = enemynear(var(14)),movetype = H
trigger1 = enemynear(var(14)),stateno =  3261
trigger1 = p2dist x <= 120
trigger1 = p2dist y = [-120,-20]
trigger1 = time = 15
triggerall = random >= 600
triggerall = random <= 600 + (power / 50)
trigger2 = ctrl
trigger2 = gametime%60 = [6,10]
trigger3 = stateno = 1200

trigger3 = animelemno(0) = [12,16]
ignorehitpause = 0
 


[State -1, ラウンドトリップ]
type = ChangeState
value = 1400
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = var(21) >= 90
triggerall = !numhelper(1401)
trigger1 = ctrl
trigger1 = p2dist x >= 150
trigger1 = random <= 200
ignorehitpause = 1

[State -1, 1ゲージ絶刀]
type = ChangeState
value = 3000
triggerall = var(59) != 0
triggerall = power >= 1000
triggerall = roundstate = 2
triggerall = var(33) >= 3 || stateno = 620
trigger1 = (stateno = 2010) * (palno <= 10)
trigger2 = stateno = 620
trigger2 = movehit = 1
trigger2 = random <= var(33) * 10 * ceil(power / 1000) * (palno <= 10)
trigger3 = stateno = 620
trigger3 = movehit = 1
trigger3 = palno >= 11
trigger3 = var(33) >= 5
trigger3 = random <= var(33) * 5
ignorehitpause = 1

[State -1, 1ゲージ絶刀]
type = ChangeState
value = 3000
triggerall = var(59) != 0
triggerall = power >= 1000
triggerall = movehit = [20,25]
triggerall = roundstate = 2
triggerall = ((random <= 160 + (power / 100)))  || target,life <= 100
trigger1 = stateno = 280
trigger2 =  stateno = 252
trigger2 = var(19) = 1
ignorehitpause = 1


[State -1, 1ゲージ絶刀]
type = ChangeState
value = 3000
triggerall = var(59) != 0
triggerall = power >= 1000
triggerall = roundstate = 2
triggerall = movehit
triggerall = ((random <= 160 + (power / 100)))  || target,life <= 100 || ((random <= 220 + (power / 100)) && power >= 4000) ||  ((random <= 320 + (power / 100)) && power >= 5000)
trigger1 = stateno = 2610
trigger1 = animelemno(0)  = [19,22]
trigger2 = stateno = 620
trigger2 = target,life <= 100
ignorehitpause = 1

[State -1, 絶界]
type = ChangeState
value = 3500
triggerall = var(59) != 0
triggerall = power >= 3000
triggerall = numhelper(3800) = 1
triggerall= statetype = S
triggerall =roundstate = 2
trigger1 = random >= 900
trigger1 = stateno = 210
trigger1 = animelemno(0) >= 10 && movehit
trigger2 =  stateno = 450 && movehit
trigger2 = random >= 900
trigger2 = animelemno(0) >= 6
trigger3 = stateno = 252
trigger3 = var(19) = 1
trigger3 = enemynear(var(14)),movetype = H
trigger3 = enemynear(var(14)),stateno =3261
trigger3 = enemynear(var(14)),vel y >= 1
trigger3 = enemynear(var(14)),pos y >= -20
trigger4 = stateno = 641 && movehit = 2
trigger5 = enemynear(var(14)),movetype = H
trigger5 = enemynear(var(14)),stateno = 6110
trigger5 = enemynear(var(14)),statetype = L
trigger5 = ctrl
trigger6 = p2dist y >= -20
trigger6 = enemynear(var(14)),movetype = A
trigger6 = (ctrl || (stateno = [150,153]))
ignorehitpause = 1

[State -1, トリックアップ]
type = ChangeState
value = 2020
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype = S
triggerall = p2dist x>= 150
trigger1 = random = [400,498]
trigger1 = var(16):=random%3 || 1
trigger1 = ctrl
trigger2 = var(56) >= 1
trigger2 = numhelper(8515) = 0
trigger2 = random =[300,500]
trigger2 = var(16):= 1
trigger2 = ctrl
trigger3 = stateno = 410
trigger3 = movehit
trigger3 = random >= 900
trigger3 = var(16):=2
ignorehitpause = 0

[State -1, 日輪脚弱]
type = ChangeState
value = 280
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = enemynear(var(14)),stateno = 6110
triggerall = enemynear(var(14)),statetype = L
triggerall = enemynear(var(14)),movetype = H
triggerall = statetype != A
trigger1 = ctrl
ignorehitpause = 0

[State -1, 日輪脚強]
type = ChangeState
value = 2610
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = ctrl
triggerall = statetype != A
trigger1 = enemynear(var(14)),movetype = A
trigger1 = p2dist x <= 100
trigger1 = random >= 700
ignorehitpause = 0

[State -3, 立ち弱]
type = ChangeState
value = 200
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype != A
triggerall = movetype != H
triggerall = roundstate = 2
triggerall = p2dist x<= 90
triggerall = enemynear(var(14)),statetype != L
triggerall = !(enemynear(var(14)),movetype = H && (enemynear(var(14)),stateno = 3621 || enemynear(var(14)),stateno = 6201))
trigger1 = ctrl
trigger1 = p2dist y + enemynear(var(14)),const(size.mid.pos.y) + ((enemynear(var(14)),vel y * 5) + (enemynear(var(14)),const(movement.yaccel) * 30)) - const(size.mid.pos.y) = [-15,-7]
ignorehitpause = 0


[State -3, 立ち弱]
type = ChangeState
value = 200
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype != A
triggerall = movetype != H
triggerall = roundstate = 2
triggerall = p2dist x<= 90
triggerall = p2dist y = [-15,0]
triggerall = enemynear(var(14)),statetype != L
triggerall = !(enemynear(var(14)),movetype = H && (enemynear(var(14)),stateno = 3621 || enemynear(var(14)),stateno = 6201))
trigger1 = ctrl
trigger1 = random <= 80
ignorehitpause = 0



[State -3, 立ち弱]
type = ChangeState
value = 200
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype != A
triggerall = movetype != H
triggerall = roundstate = 2
triggerall = p2dist x<= 90
triggerall = p2dist y = [-15,0]
trigger1 = ctrl
trigger1 = numhelper(1401)
trigger1 = helper(1401),movehit
ignorehitpause = 0

[State -3, しゃがみ弱]
type = ChangeState
value = 430
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = statetype != A
triggerall = movetype != H
triggerall = roundstate = 2
triggerall = p2dist x<= 90
triggerall = p2dist y = [-10,0]
triggerall = enemynear(var(14)),statetype != L
triggerall = !(enemynear(var(14)),movetype = H && (enemynear(var(14)),stateno = 3621 || enemynear(var(14)),stateno = 6201))
trigger1 = ctrl
trigger1 = random > 80
trigger1 = random <= 160
ignorehitpause = 0


[State -3, 立ち中]
type = ChangeState
value = 201
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = !ishelper
trigger1 = stateno = 200 && movecontact = 2
ignorehitpause = 0

[State -3, しゃがみ中]
type = ChangeState
value = 440
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = !ishelper
trigger1 = stateno = 430 && movecontact = 2
ignorehitpause = 0

[State -3, 立ち強]
type = ChangeState
value = 210
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = !ishelper
trigger1 = stateno = 201 && movecontact = 2
ignorehitpause = 0

[State -3, しゃがみ強]
type = ChangeState
value = 450
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = !ishelper
trigger1 = stateno = 440 && movecontact = 2
ignorehitpause = 0

[State -1, スティンガー]
type = ChangeState
value = 250
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = numhelper(1401) = 0
triggerall = var(10) = 0
trigger1 =  stateno = 450 && movecontact
trigger1= animelemno(0) = 6
trigger1 = random <= 500
trigger2 = stateno = 210 && movecontact
trigger2 = animelemno(0) = 10
trigger2 = random <=500
ignorehitpause = 0

[State -1, エリアル]
type = ChangeState
value = 2500
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = roundstate = 2
triggerall = var(56) > 3
triggerall = statetype != A
trigger1 = stateno = 210 && movehit
trigger1 = animelemno(0) = 10
trigger2 =  stateno = 450 && movecontact
trigger2 = animelemno(0) = 6
trigger2 = random > 500
trigger3 = enemynear(var(14)),movetype = H
trigger3 = enemynear(var(14)),stateno = 3261 || enemynear(var(14)),stateno = 6201
trigger3 = p2dist x <= 80
trigger3 = p2dist y = [-120,-20]
trigger3 = ctrl
trigger3 = random > 480
ignorehitpause = 0

[State -1, エリアル]
type = ChangeState
value = 410
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = roundstate = 2
triggerall = var(56) <= 3
triggerall = statetype != A
trigger1 = stateno = 210 && movehit
trigger1 = animelemno(0) = 10
trigger1 = random >= 501
trigger2 =  stateno = 450 && movecontact
trigger2 = animelemno(0) = 6
trigger2 = random > 500
trigger3 = enemynear(var(14)),movetype = H
trigger3 = enemynear(var(14)),stateno = 3261 || enemynear(var(14)),stateno = 6201
trigger3 = p2dist x <= 80
trigger3 = p2dist y = [-120,20]
trigger3 = ctrl
trigger3 = random > 480
trigger4 =  stateno = 252
trigger4 = var(19) = 1
trigger4 = target,stateno != [3260,3262]
trigger4 = time = 5
trigger4 = random > 500
trigger5 = p2dist x <= 80
trigger5 = enemynear(var(14)),pos y <= -50
trigger5 = enemynear(var(14)),movetype = H
trigger5 = ctrl
trigger5 = prevstateno = 1000
ignorehitpause = 0

[State -1, スーパージャンプ]
type = null;ChangeState
value = 8010
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = stateno = 410  && animelemtime(4) = 7 && movehit
trigger1 = prevstateno != 412 && var(7) != 1
trigger2 = prevstateno = 412
ignorehitpause = 0

[State -1, ジャンプ中]
type = ChangeState
value = 610
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = p2dist x = [0,120]
trigger1 = ctrl
trigger1 = p2bodydist y = [35,110]
trigger1 = pos y <= -40
trigger1 = random <= 160
trigger1 = stateno != [8010,8020]
trigger2 = numtarget(412)
trigger2 = stateno = 8020
trigger2 = pos y <= -100
trigger2 = p2dist y + target,const(size.mid.pos.y) + ((target,vel y * 11) + (target,const(movement.yaccel) * 66)) - const(size.mid.pos.y) = [-20,20]
ignorehitpause = 0

[State -1, ジャンプ中]
type = ChangeState
value = 610
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = p2dist x = [0,120]
triggerall = ctrl
triggerall = pos y <= -40
triggerall = enemynear(var(14)),movetype = H
triggerall = stateno != [8010,8020]
trigger1 = p2dist y + enemynear(var(14)),const(size.mid.pos.y) + ((enemynear(var(14)),vel y * 11) + (0.5 * 66)) + (vel y * 0.15**11)  = [-134,-74]
ignorehitpause = 0


[State -1, ジャンプ強]
type = ChangeState
value = 620
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = !ishelper
trigger1 = (stateno = 609) && movecontact
ignorehitpause = 0

[State -1, 兜割り]
type = ChangeState
value = 640
triggerall = var(59) != 0
triggerall = pos Y < -30
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = numhelper(1401) = 0
triggerall = var(10) = 0
trigger1 = stateno = 620
trigger1 = movecontact = 2
trigger1 = random >=300 || var(33) < 2 ||palno >= 11
trigger2 = ctrl
trigger2 =enemynear(var(14)),stateno = 6110
trigger2 = enemynear(var(14)),statetype = L
trigger2 = enemynear(var(14)),movetype = H
trigger3 = ctrl
trigger3 = p2dist x <= 80
trigger3 = p2dist y >= 30
trigger3 = random < 80
ignorehitpause = 0

[State -1, 兜割り]
type = ChangeState
value = 632
triggerall = var(59) != 0
triggerall = pos Y < -30
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = numhelper(1401) = 1 || ((random< 300||var(33)>= 3)&&palno <= 10)
triggerall = var(10) = 0
trigger1 = stateno = 620
trigger1 = movecontact = 2
ignorehitpause = 0

[State -1, トリックアップ]
type = ChangeState
value = 2020
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = stateno = 641
triggerall = time >= 5
trigger1 = var(33) >=1
trigger1 = palno >= 11
trigger1 = var(16):=1
ignorehitpause = 0

[State -1, トリックアップ]
type = ChangeState
value = 2020
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = stateno = 641
triggerall = time >= 5
trigger1 = var(30) < 2
trigger1 = var(16):=2
trigger2 = var(30) = 2
trigger2 = var(16):=1
ignorehitpause = 0




[State -1, Hadousho]
type = ChangeState
value = 2500
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype != A
trigger1 =  (stateno = 252 && var(19) = 1) || ctrl
trigger1 = enemynear(var(14)),movetype = H
trigger1 = enemynear(var(14)),stateno =  3261
trigger1 = p2dist x <= 120
trigger1 = p2dist y = [-120,-20]
trigger1 = time = 15
trigger1 = random <= 350
ignorehitpause = 0


[State -1, 次元斬]
type = ChangeState
value = 1000
triggerall = var(59) != 0
triggerall = roundstate = 2
triggerall = statetype != A
trigger1 = stateno = 210
trigger1 = animelemno(0) >= 10 && moveguarded
trigger1 = var(7):=2
trigger2 =  stateno = 252
trigger2 = var(19) = 1
trigger2 = enemynear(var(14)),movetype = H
trigger2 = enemynear(var(14)),stateno =3261
trigger2 = random = [351,700]
trigger2 = time = 15
trigger3 =  stateno = 252
trigger3 = var(19) = 1
trigger3 = target,movetype = H
trigger3 = target,stateno =3261
trigger3 = target,vel y <= -3
trigger3 = frontedgedist >= 100
trigger3 = time >= 15
trigger4 = p2dist x >= 150
trigger4 = ctrl
trigger4 = random >= 900
trigger4 = stateno <= 20 || stateno = 100

[State -1, エリアル]
type = ChangeState
value = 410
triggerall = var(59) != 0
triggerall = !ishelper
triggerall = roundstate = 2
triggerall = var(56) <= 3
triggerall = statetype != A
trigger1 =  stateno = 252
trigger1 = var(19) = 1
trigger1 = target,stateno != [3260,3262]
trigger1 = time = 5
trigger1 = target,statetype != A
ignorehitpause = 0

[state -1,]
type = changestate
triggerall = var(59) != 0
triggerall = movehit
trigger1 = stateno = 280
trigger1 = animelemtime(13) >= 0
trigger2 = stateno =2610
trigger2 = animelemtime(19) >= 0
trigger2 = animelemtime(24) <= 0
value = 2010

[state -1,]
type = changestate
triggerall = var(59) != 0
triggerall = enemynear(var(14)),movetype = H
triggerall = ctrl
triggerall = enemynear(var(14)),pos y <= -40
trigger1 = stateno = 2003
trigger2 = stateno = 2004
value = 40




[State -3, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(10000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(59)=0
Trigger1=PrevStateNo=(191)||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=10000
ID=10000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(10000)
trigger1= stateno!=10000
value=10000

[State -3, AIフラグセット]
type = VarSet
triggerall = var(59) = 0
triggerall = RoundState = [1,2]
trigger1 = Command = "AI0"
trigger2 = Command = "AI1"
trigger3 = Command = "AI2"
trigger4 = Command = "AI3"
trigger5 = Command = "AI4"
trigger6 = Command = "AI5"
trigger7 = Command = "AI6"
trigger8 = Command = "AI7"
trigger9 = Command = "AI8"
trigger10 = Command = "AI9"
trigger11 = Command = "AI10"
trigger12 = Command = "AI11"
trigger13 = Command = "AI12"
trigger14 = Command = "AI13"
trigger15 = Command = "AI14"
trigger16 = Command = "AI15"
trigger17 = Command = "AI16"
trigger18 = Command = "AI17"
trigger19 = Command = "AI18"
trigger20 = Command = "AI19"
trigger21 = Command = "AI20"
trigger22 = Command = "AI21"
trigger23 = Command = "AI22"
trigger24 = Command = "AI23"
trigger25 = Command = "AI24"
trigger26 = Command = "AI25"
trigger27 = Command = "AI26"
trigger28 = Command = "AI27"
trigger29 = Command = "AI28"
trigger30 = Command = "AI29"
trigger31 = Command = "AI30"
trigger32 = Command = "AI31"
trigger33 = Command = "AI32"
trigger34 = Command = "AI33"
trigger35 = Command = "AI34"
trigger36 = Command = "AI35"
trigger37 = Command = "AI36"
trigger38 = Command = "AI37"
trigger39 = Command = "AI38"
trigger40 = Command = "AI39"
trigger41 = Command = "AI40"
trigger42 = Command = "AI41"
trigger43 = Command = "AI42"
trigger44 = Command = "AI43"
trigger45 = Command = "AI44"
trigger46 = Command = "AI45"
trigger47 = Command = "AI46"
trigger48 = Command = "AI47"
trigger49 = Command = "AI48"
trigger50 = Command = "AI49"
trigger51 = Command = "AI50"
Trigger52 = numhelper(10000)
Trigger52 = Helper(10000),var(59)
Trigger53= (AILevel && movetype != i)
var(59) = 10




[Statedef 3513 - Dark Angel Sword]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8510
sprpriority = 5
 
[state 8513]
type = TargetDrop
trigger1 = time <= 1

[state 8513]
type = Turn
trigger1 = facing = -1

[State 8513]
Type = varset
triggerall = time = 1
triggerall = IsHelper(3510)
trigger1 = Enemynear(0),alive
var(0) = Enemynear(0),ID
IgnoreHitPause=0

[State 8513]
Type = varset
triggerall = time = 1
triggerall = IsHelper(3510)
trigger1 = !Enemynear(0),alive
trigger1 = Enemynear(1),alive
var(0) = Enemynear(1),ID
IgnoreHitPause=0


[state 8513]
Type = varset
triggerall = !IsHelper(3510)
trigger1 = numhelper(3510) >= 1
trigger1 = helper(3510),var(0) != var(0)
var(0) = helper(3510),var(0) 
IgnoreHitPause=0


[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(3510)
var(19) = 90

[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3511)
var(19) = Helper(3510),var(19) + 45


[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3512)
var(19) = Helper(3510),var(19) + 90

[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3513)
var(19) = Helper(3510),var(19) + 135

[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3514)
var(19) = Helper(3510),var(19) + 180

[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3515)
var(19) = Helper(3510),var(19) + 225


[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3516)
var(19) = Helper(3510),var(19) + 270

[state 8513]
type = varset
triggerall = numhelper(3510)
trigger1 = time = 0
trigger1 = IsHelper(3517)
var(19) = Helper(3510),var(19) + 315


[state 8513]
type = varadd
trigger1 = 1
var(19) = 9

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 1000, エフェクト]
type = Explod
trigger1 = time = 0
anim = 8512
scale = 0.5,0.5
postype = p1
pos = -20,0
ownpal = 1
bindtime = 60
removeongethit = 1

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(3) = 0

;角度算出
;クリエーターズJAPAN2に悪咲３号様の寄せられた追尾弾に関するコラムを参考にさせていただきました)
[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse(((playerID(var(0)),pos x- pos x)=[0,10]),11,ifelse(((playerID(var(0)),pos x- pos x)=[-10,0]),-11,playerID(var(0)),pos x-pos x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse(((playerID(var(0)),pos y - pos y)=[0,10]),11,ifelse(((playerID(var(0)),pos y - pos y)=[-10,0]),-11,playerID(var(0)),pos y - pos y))-10

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(playerID(var(0)),pos y - pos y<0,-1,1))

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)


[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 0]
type = SprPriority
trigger1 = 1
value = ceil(-9 * sin( pi / 180 * (var(19)%360))) +3

;[State 8500, バインド]
;type = posset
;trigger1 = time >= 1
;x = (playerID(var(0)),pos x + (ceil(55 * cos( pi / 180 * (var(19)%360)))))
;y = ceil(playerID(var(0)),pos y + playerID(var(0)),const(size.head.pos.y) -45)

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3510)
trigger1 = time >= 1
x = playerID(var(0)),pos x -55
y = playerID(var(0)),const(size.head.pos.y) -35

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3511)
trigger1 = time >= 1
x = playerID(var(0)),pos x -35
y = playerID(var(0)),const(size.head.pos.y) -40

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3512)
trigger1 = time >= 1
x = playerID(var(0)),pos x + 75
y = playerID(var(0)),const(size.head.pos.y) -25

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3513)
trigger1 = time >= 1
x = playerID(var(0)),pos x + 45
y = playerID(var(0)),const(size.head.pos.y) -75

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3514)
trigger1 = time >= 1
x = playerID(var(0)),pos x +55
y = playerID(var(0)),const(size.head.pos.y) - 5

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3515)
trigger1 = time >= 1
x = playerID(var(0)),pos x -80
y = playerID(var(0)),const(size.head.pos.y) - 65

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3516)
trigger1 = time >= 1
x = playerID(var(0)),pos x -100
y = playerID(var(0)),const(size.head.pos.y) - 80

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3517)
trigger1 = time >= 1
x = playerID(var(0)),pos x + 55
y = playerID(var(0)),const(size.head.pos.y) - 45

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3518)
trigger1 = time >= 1
x = playerID(var(0)),pos x +15
y = playerID(var(0)),const(size.head.pos.y) - 95

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3519)
trigger1 = time >= 1
x = playerID(var(0)),pos x -20
y = playerID(var(0)),const(size.head.pos.y) - 70

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3520)
trigger1 = time >= 1
x = playerID(var(0)),pos x -110
y = playerID(var(0)),const(size.head.pos.y) - 20

[State 8500, バインド]
type = posset
trigger1 = IsHelper(3521)
trigger1 = time >= 1
x = playerID(var(0)),pos x - 90
y = playerID(var(0)),const(size.head.pos.y) - 30


[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 0

[State 702, ステート変更]
type = ChangeState
trigger1 = (IsHelper(3510)) && (root,stateno = 3506 &&root,animelemtime(34) = 0)
trigger2 = numhelper(3510)
trigger2 = (IsHelper(3515)) && (helper(3510),stateno = 3514 && helper(3510),time = 6)
trigger3 = numhelper(3515)
trigger3 = (IsHelper(3511)) && (helper(3515),stateno = 3514 && helper(3515),time = 6)
trigger4 = numhelper(3511)
trigger4 = (IsHelper(3514)) && (helper(3511),stateno = 3514 && helper(3511),time = 6)
trigger5 = numhelper(3514)
trigger5 = (IsHelper(3512)) && (helper(3514),stateno = 3514 && helper(3514),time = 6)
trigger6 = numhelper(3512)
trigger6 = (IsHelper(3513)) && (helper(3512),stateno = 3514 && helper(3512),time = 6)
trigger7 = numhelper(3513)
trigger7 = (IsHelper(3518)) && (helper(3513),stateno = 3514 && helper(3513),time = 6)
trigger8 = numhelper(3518)
trigger8 = (IsHelper(3519)) && (helper(3518),stateno = 3514 && helper(3518),time = 6)
trigger9 = numhelper(3519)
trigger9 = (IsHelper(3520)) && (helper(3519),stateno = 3514 && helper(3519),time = 6)
trigger10 = numhelper(3520)
trigger10 = (IsHelper(3521)) && (helper(3520),stateno = 3514 && helper(3520),time = 6)
trigger11 = numhelper(3521)
trigger11 = (IsHelper(3516)) && (helper(3521),stateno = 3514 && helper(3521),time = 6)
trigger12 = numhelper(3516)
trigger12 = (IsHelper(3517)) && (helper(3516),stateno = 3514 && helper(3516),time = 6)
trigger13 = time = 600
trigger13 = root,stateno != [3500,3509]
value = 3514
ctrl = 0
;-------------------------------------------------------------------

[Statedef 3514]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8511
sprpriority = 0
movehitpersist = 1

[State 8500, バインド]
type = BindToroot
trigger1 = time = 1
time = 0

;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 = 1
var(57) = root,var(57)

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT, AP
slot = 1
stateno = 8504
time = 999
forceair = 0


;・周りに対応
[State 0]
type = Turn
trigger1 = time = 1
trigger1 = playerID(var(0)),pos x < pos x


;角度算出(著:悪咲氏)
[State 7000, VarSet]
type = VarSet
trigger1 = time = 1;1
fvar(2) = ifelse(((playerID(var(0)),pos x- pos x)=[-10,10]),11,abs(playerID(var(0)),pos x- pos x))

[State 7000, VarSet]
type = VarSet
trigger1 = time = 1;1
fvar(3) = ifelse(((playerID(var(0)),pos y- pos y)=[0,10]),11,ifelse((playerID(var(0)),pos y- pos y=[-10,0]),-11,playerID(var(0)),pos y- pos y))-10


[State 7000, VarSet]
type = VarSet
trigger1 = time = 1;1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(playerID(var(0)),pos y- pos y<0,-1,1))

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)

[State 7000, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(playerID(var(0)),pos y- pos y<0,-1,1))

[State 7000, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(0) = ifelse(fvar(0)>(.33*pi),.33*pi,ifelse(fvar(0)<(-.33*pi),-.33*pi,fvar(0)))

[State 7000, VelSet]
type = VelSet
trigger1 = time = 2
x = -abs(-6*cos(fvar(0)))
y = 6*sin(fvar(0))

[State 7000, VelSet]
type = Veladd
trigger1 = time >= 7
x = abs(7.8*cos(fvar(0)))
y = -7.8*sin(fvar(0))

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 10
value = 8000, 1

[State 0]
type = Trans
trigger1 = 1
trans = add


[State 200, ヒット定義]
type = HitDef 
trigger1 = time = 1
attr = S, HP 
hitflag = MAF+
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 5, 1
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = S8000
sparkxy = 10, 0 + random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,-1
airguard.velocity = -3,-.8
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
ID = 3517

[State 200, ヒット定義]
type = HitDef 
trigger1 = time = 1
attr = S, HP 
hitflag = MAF+
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 5, 1
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = S8000
sparkxy = 10, 0 + random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,-1
airguard.velocity = -3,-.8
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
id = 3517

[state 3514]
type = targetstate
trigger1 = movehit = 1
trigger1 = !ishelper(3517)
value = 3562
id= 3517
 
[state 3514]
type = targetstate
trigger1 = movehit = 1
trigger1 = ishelper(3517)
value = 3561
id= 3517

[State -2, 変数]
type = VarSet
trigger1 = movecontact = 1
var(56) = ceil(pos Y)

[State 3001, Explod]
type = Explod 
trigger1 = movehit = 1
anim = 6015+random%4
pos = 0,-50
postype = p2
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 9
trans = add
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 3001, Explod]
type = ModifyExplod
trigger1 = movecontact >= 12
ID = 8513
removetime = 0

[State 0, 消滅変数]
type = AssertSpecial
trigger1 = movecontact
flag = invisible


[State 200, 消滅]
type = DestroySelf
triggerall = time > 30
trigger1 = FrontEdgeBodyDist < -100
trigger2 = BackEdgeBodyDist < -100

[Statedef 3507 - Dark Angel Hit Helper]
type = S
physics = N
anim = 1223
ctrl = 0
velset = 0,0

[state 3507]
type = PlayerPush
trigger1 = 1
value = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[State 1224, ヒットカウント]
type = hitadd
trigger1 = time = 20
trigger2 = time = 25
trigger3 = time = 30
trigger4 = time = 35
value = 1

[State 1224, 効果音]
type = playsnd
trigger1 = time = 20
trigger2 = time = 25
trigger3 = time = 30
trigger4 = time = 35
value = S1,11

[State 1224, 効果音]
type = playsnd
trigger1 = time = 48
value = S1,12

[State 1224, ヒットエフェクト]
type = Helper
trigger1 = time = 20
trigger2 = time = 25
trigger3 = time = 30
trigger4 = time = 35
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.7
Size.YScale = 0.7
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 1224, 消す]
type = destroyself
trigger1 = Time = 50
value = 0

[Statedef 8513 - Sword Storm]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8510
sprpriority = 0

[state 8513]
type = TargetDrop
trigger1 = time <= 1

[state 8513]
type = Turn
trigger1 = facing = -1

[State 8513]
Type = varset
triggerall = time = 1
triggerall = IsHelper(8510)
trigger1 = Enemynear(0),alive
var(0) = Enemynear(0),ID
IgnoreHitPause=0

[State 8513]
Type = varset
triggerall = time = 1
triggerall = IsHelper(8510)
trigger1 = !Enemynear(0),alive
trigger1 = Enemynear(1),alive
var(0) = Enemynear(1),ID
IgnoreHitPause=0


[state 8513]
Type = varset
triggerall = !IsHelper(8510)
trigger1 = numhelper(8510) >= 1
trigger1 = helper(8510),var(0) != var(0)
var(0) = helper(8510),var(0) 
IgnoreHitPause=0

[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(8510)
var(19) = 90

[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(8511)
var(19) = 150


[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(8512)
var(19) = 210

[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(8513)
var(19) = 270

[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(8514)
var(19) = 330

[state 8513]
type = varset
trigger1 = time = 0
trigger1 = IsHelper(8515)
var(19) = 30


[state 8513]
type = varadd
trigger1 = 1
var(19) = 9

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 1000, エフェクト]
type = Explod
trigger1 = time = 0
anim = 8512
scale = 0.5,0.5
postype = p1
pos = -20,0
ownpal = 1
bindtime = 60
removeongethit = 1

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(3) = 0

;角度算出
;クリエーターズJAPAN2に悪咲３号様の寄せられた追尾弾に関するコラムを参考にさせていただきました)
[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse(((playerID(var(0)),pos x- pos x)=[0,10]),11,ifelse(((playerID(var(0)),pos x- pos x)=[-10,0]),-11,playerID(var(0)),pos x-pos x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse(((playerID(var(0)),pos y - pos y)=[0,10]),11,ifelse(((playerID(var(0)),pos y - pos y)=[-10,0]),-11,playerID(var(0)),pos y - pos y))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(playerID(var(0)),pos y - pos y<0,-1,1))

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)


[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 0]
type = SprPriority
trigger1 = 1
value = ceil(-9 * sin( pi / 180 * (var(19)%360))) +3

[State 8500, バインド]
type = posset
trigger1 = time >= 1
x = (playerID(var(0)),pos x + (ceil(55 * cos( pi / 180 * (var(19)%360)))))
y = ceil(playerID(var(0)),pos y + playerID(var(0)),const(size.head.pos.y) -45)


[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 0

[State 702, ステート変更]
type = ChangeState
trigger1 = (IsHelper(8510)) && (Time = 150)
trigger2 = (IsHelper(8515)) && (Time = 210)
trigger3 = (IsHelper(8511)) && (Time = 270)
trigger4 = (IsHelper(8514)) && (Time = 330)
trigger5 = (IsHelper(8512)) && (Time = 390)
trigger6 = (IsHelper(8513)) && (Time = 450)
value = 8514
ctrl = 0

[Statedef 8514 - Sword Storm State]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8511
sprpriority = 0
movehitpersist = 1

[State 8500, バインド]
type = BindToroot
trigger1 = time = 1
time = 0

;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 = 1
var(57) = root,var(57)

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT, AP
slot = 1
stateno = 8504
time = 999
forceair = 0


;・周りに対応
[State 0]
type = Turn
trigger1 = time = 1
trigger1 = playerID(var(0)),pos x < pos x


;角度算出(著:悪咲氏)
[State 7000, VarSet]
type = VarSet
trigger1 = time = 1;1
fvar(2) = ifelse(((playerID(var(0)),pos x- pos x)=[-10,10]),11,abs(playerID(var(0)),pos x- pos x))

[State 7000, VarSet]
type = VarSet
trigger1 = time = 1;1
fvar(3) = ifelse(((playerID(var(0)),pos y- pos y)=[0,10]),11,ifelse((playerID(var(0)),pos y- pos y=[-10,0]),-11,playerID(var(0)),pos y- pos y))


[State 7000, VarSet]
type = VarSet
trigger1 = time = 1;1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(playerID(var(0)),pos y- pos y<0,-1,1))

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)

[State 7000, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(playerID(var(0)),pos y- pos y<0,-1,1))

[State 7000, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(0) = ifelse(fvar(0)>(.33*pi),.33*pi,ifelse(fvar(0)<(-.33*pi),-.33*pi,fvar(0)))

[State 7000, VelSet]
type = VelSet
trigger1 = time = 2
x = -abs(-4*cos(fvar(0)))
y = 4*sin(fvar(0))

[State 7000, VelSet]
type = Veladd
trigger1 = time >= 7
x = abs(5.8*cos(fvar(0)))
y = -5.8*sin(fvar(0))

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 10
value = 8000, 1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5 

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 1
attr = S, HP 
hitflag = MAFD
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = ceil(root,fvar(10)*50), 5
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = -20, -20+random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
getpower = 0
givepower = 20,10
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = -3
guard.velocity = -1
air.velocity = -1.4,-3.5
airguard.velocity = -3,-.8
air.fall = 1
air.recover = 0
fall.recover = 0

[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 6015+random%4
pos = 0,-50
postype = p2
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 9
trans = add
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Spark]
Type = Helper 
trigger1 = moveguarded = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8001
Facing = 1
pos = 0,-50
postype = p2
OwnPal = 1
Size.XScale =  0.6
Size.YScale = 0.6
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[state 0]
type = parentVarSet
trigger1 = movecontact = 1
fvar(10) = root,fvar(10)*0.9
persistent = 0

[State -2, 変数]
type = VarSet
trigger1 = movecontact = 1
var(56) = ceil(pos Y)

[State 0, 消滅変数]
type = AssertSpecial
trigger1 = movecontact
flag = invisible


[State 200, 消滅]
type = DestroySelf
triggerall = time > 150
trigger1 = FrontEdgeBodyDist < -100
trigger2 = BackEdgeBodyDist < -100

[Statedef 8510 - Blistering Sword]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8510
sprpriority = 0

[State 1000, ?????]
type = Explod
trigger1 = time = 0
anim = 8512
scale = 0.5,0.5
postype = p1
pos = -20,0
ownpal = 1
bindtime = 60
removeongethit = 1

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(3) = 0

;????
;???????JAPAN2???3????????????????????????????????)
[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((root,P2dist x=[0,10]),11,ifelse((root,P2dist x=[-10,0]),-11,root,P2dist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((root,P2dist y=[0,10]),11,ifelse((root,P2dist y=[-10,0]),-11,root,P2dist y))+10


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(root,P2dist Y<0,-1,1))

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5

[State 8500, ????]
type = BindToRoot
trigger1 = IsHelper(8510)
time = 9999
facing = 1
pos = -20, -70


[State 8500, ????]
type = BindToRoot
trigger1 = IsHelper(8511)
time = 9999
facing = 1
pos = -15, -110

[State 8500, ????]
type = BindToRoot
trigger1 = IsHelper(8512)
time = 9999
facing = 1
pos = -10, -125

[State 8500, ????]
type = BindToRoot
trigger1 = IsHelper(8513)
time = 9999
facing = 1
pos = -5, -120

[State 8500, ????]
type = BindToRoot
trigger1 = IsHelper(8514)
time = 9999
facing = 1
pos = 0, -105

[State 8500, ????]
type = BindToRoot
trigger1 = IsHelper(8515)
time = 9999
facing = 1
pos = 5, -75

[State 440, ?????]
type = PlaySnd
trigger1 = time = 0
value = 8000, 0

[State 702, ??????]
type = ChangeState
trigger1 = (IsHelper(8510)) && (Time = 60)
trigger2 = (IsHelper(8515)) && (Time = 69)
trigger3 = (IsHelper(8511)) && (Time = 78)
trigger4 = (IsHelper(8514)) && (Time = 87)
trigger5 = (IsHelper(8512)) && (Time = 96)
trigger6 = (IsHelper(8513)) && (Time = 105)
value = 8511
ctrl = 0 

[Statedef 8511 - Blistering Sword State]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8511
sprpriority = 0
movehitpersist = 1


;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 = 1
var(57) = root,var(57)

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT, AP
slot = 1
stateno = 8504
time = 999
forceair = 0

[State 8500, バインド]
type = BindToRoot
trigger1 = time = 1
time = 1
pos = 20,-50


[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 7000, VelSet]
type = VelSet
trigger1 = time = 2
x = 25

[State 7000, VelSet]
type = VelSet
trigger1 = time = 2
y = 25 * var(12)/-45


[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 10
value = 8000, 1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 1
attr = S, HP 
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
;damage = 20-(root,var(57)*3), 1
damage = ceil(root,fvar(10)*40),5
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = -20, -20+random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
getpower = 0
givepower = 30,30
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = -3
guard.velocity = -1
air.velocity = -1.4,-3.5
airguard.velocity = -3,-.8
air.fall = 1
air.recover = 0
fall.recover = 0

[State -2, 変数]
type = VarSet
trigger1 = movecontact = 1
var(56) = ceil(pos Y)

[state 0]
type = parentVarSet
trigger1 = movecontact = 1
fvar(10) = root,fvar(10)*0.8
persistent = 0
 
[State 0, 消滅変数]
type = AssertSpecial
trigger1 = movecontact
flag = invisible

[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 6015+random%4
pos = 0,-50
postype = p2
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 9
trans = add
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Spark]
Type = Helper 
trigger1 = moveguarded = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8001
Facing = 1
pos = 0,-50
postype = p2
OwnPal = 1
Size.XScale =  0.6
Size.YScale = 0.6
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 200, 消滅]
type = DestroySelf
triggerall = time > 30
trigger1 = FrontEdgeBodyDist < -100
trigger2 = BackEdgeBodyDist < -100

[Statedef 8500 - Spiral Swords Projectile]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8500
sprpriority = 5

[State 200, 1]
type = VarSet
trigger1 = 1
var(13) = AnimElemNo(0)

[State 0, スタポ]
type = NotHitBy
trigger1 = 1
value = SCA,AA, AT,AP
time = 9999

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8500)
var(55) = 0

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8501)
var(55) = 1

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8502)
var(55) = 2

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8503)
var(55) = 3

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8504)
var(55) = 4

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8505)
var(55) = 5

[State 0]
type = NotHitBy
triggerall = var(55) = [0,5]
trigger1 = NumHelper(8501) > 0
trigger1 = helper(8501),stateno = 8503
trigger2 = NumHelper(8502) > 0
trigger2 = helper(8502),stateno = 8503
trigger3 = NumHelper(8503) > 0
trigger3 = helper(8503),stateno = 8503
trigger4 = NumHelper(8504) > 0
trigger4 = helper(8504),stateno = 8503
trigger5 = NumHelper(8505) > 0
trigger5 = helper(8505),stateno = 8503
trigger6 = NumHelper(8500) > 0
trigger6 = helper(8500),stateno = 8503
value = SCA
time = 12


[State 0]
type = SprPriority
trigger1 = animelem = 3
value = -5

[State 0]
type = SprPriority
trigger1 = animelem = 10
value = 5

[State 0]
type = changeanim
trigger1 = IsHelper(8500)
trigger1 = time = 0
value = 8500
elem = 1
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8501)
trigger1 = time = 0
value = 8500
elem = 4
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8502)
trigger1 = time = 0
value = 8500
elem = 7
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8503)
trigger1 = time = 0
value = 8500
elem = 10
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8504)
trigger1 = time = 0
value = 8500
elem = 13
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8505)
trigger1 = time = 0
value = 8500
elem = 16
persistent = 1

[State 8500, バインド]
type = BindToRoot
trigger1 = 1
time = 9999
facing = 1
pos = 0, -50

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 1
value = 8000, 0
 
[State 200, ヒット定義]
type = HitDef
trigger1 = root,stateno != 2610 && root,stateno != 460
trigger1 = animelem = 1 || animelem = 10
trigger1 = time >= 10
attr = S, HP 
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = ceil(root,fvar(10)*20),2
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -20, -20+random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = low
air.type = low
ground.velocity = -3
guard.velocity = -1
getpower = 0
givepower = 20,20
air.velocity = -1.4,-2.5
ground.slidetime = 10
ground.hittime  = 7
air.hittime = 4
guard.ctrltime = 2
air.fall = 1
fall.recovertime = 90
ground.velocity = ifelse(animelemno(0)=1,2,-2),
guard.velocity = ifelse(animelemno(0)=1,2,-2)
air.velocity = ifelse(animelemno(0)=1,2,-2),-2.5
airguard.velocity = ifelse(animelemno(0)=1,2,-2)

[State 200, ヒット定義]
type = HitDef
trigger1 = root,stateno = 2610 || root,stateno = 460
trigger1 = animelem = 1 || animelem = 10
trigger1 = time >= 10
attr = S, HP 
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = ceil(root,fvar(10)*20),2
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -20, -20+random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = low
air.type = low
ground.velocity = -3
guard.velocity = -1
getpower = 0
givepower = 20,20
air.velocity = -1.4,-8.5
ground.slidetime = 10
ground.hittime  = 7
air.hittime = 4
guard.ctrltime = 2
air.fall = 1
fall.recovertime = 90
ground.velocity = ifelse(animelemno(0)=1,2,-2),
guard.velocity = ifelse(animelemno(0)=1,2,-2)
air.velocity = ifelse(animelemno(0)=1,2,-2),-2.5
airguard.velocity = ifelse(animelemno(0)=1,2,-2)

[state 0]
type = parentvarset
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.9

[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 6015+random%4
pos = 0,-50
postype = p2
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 9
trans = add
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Spark]
Type = Helper 
trigger1 = moveguarded = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8001
Facing = 1
pos = 0,-50
postype = p2
OwnPal = 1
Size.XScale =  0.6
Size.YScale = 0.6
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 200, 1]
type = Varset
trigger1 = time = 0
var(57) = 0

[State 1320, 9]
type = ChangeState
trigger1 = var(57) = 3
value = 8504

[State 200, 1]
type = Varadd
trigger1 = movecontact =2
var(57) = 1

[State -2, クリップボード（追加専用）]
type = DisplayToClipboard
trigger1 = 1
text = "%d,%d,%d,%f,%f"
params = pos X,var(14),var(2),fvar(0),fvar(1)

[State 200, 消滅]
type = DestroySelf
trigger1 = NumHelper(8510) > 0
trigger2 = NumHelper(8511) > 0
trigger3 = NumHelper(8512) > 0
trigger4 = NumHelper(8513) > 0
trigger5 = NumHelper(8514) > 0
trigger6 = NumHelper(8515) > 0
trigger7 = time = 210
trigger8 = root,movetype = H
trigger8 = root,stateno != [150,155]

[Statedef 8504]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 1251199
sprpriority = 5

[State 0]
type = BindToRoot
trigger1 = var(13) != 1
time = 999
facing = 1
pos = 65, -50

[State 0]
type = BindToRoot
trigger1 = var(13) = 1
time = 999
facing = 1
pos = -65, -50

[State 0]
type = VelMul
trigger1 = 1
x = .1
y = .1

[State 0]
type = turn
trigger1 = time = 0


[State 0]
type = AngleDraw
trigger1 = 1
scale = 0.7,1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 3

[State 200, 消滅]
type = DestroySelf
trigger1 = time = 10


[StateDef 7201 - Hyper Port LV 1]
Type=A
MoveType=I
Physics=N
Anim=1251199

[State ]
Type=PlaySnd
Trigger1=(Time=0)
Value=1,41

[State ]
Type=PlaySnd
Trigger1=(Time=0)
Value=1,42

[State ]
Type=BGPalFX
Trigger1=(Time=[0,29])
Add=-256,-256,-256
SinAdd=256,256,256,80
Time=20
PauseMoveTime=65536
SuperMoveTime=65536

[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7300
PosType=Back
Pos=0,(ScreenHeight-250)/2
Scale=1,1
BindTime=1
Sprpriority=-16
OwnPal=1
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7300

[State Explod]
Type=ModifyExplod
Trigger1=(Time=[30,49])
Scale=1+(0.025*(Time-29)),1+(0.025*(Time-29))
ID=7300
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7205
PosType=Back
Pos=ScreenWidth/2,ScreenHeight/2
Scale=Const240p(0.5),Const240p(0.5)
BindTime=1
Sprpriority=-64
OwnPal=1
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7204
PosType=Back
Pos=ScreenWidth/2,ScreenHeight/2
Scale=Const240p(0.5),Const240p(0.5)
BindTime=1
Sprpriority=64
OwnPal=1
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7202
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=-2
OwnPal=1
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7202
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=-1
OwnPal=1
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7201
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=3
OwnPal=1
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7201
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=4
OwnPal=1
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Trigger1=(var(3):=Random%360)
Trigger2=(Time=[1,2])
Trigger2=(var(3):=var(3)+120)
Anim=7203
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
Trans=Sub
Angle=var(3)
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=[0,2])
Anim=7203
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
Trans=Add
Angle=var(3)
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7203*ID
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1 
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7204*ID
[State Explod]
Type=Explod
Trigger1=(Time=5)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7205*ID
[State Explod]
Type=Explod
Trigger1=(Time=5)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7206*ID
[State Explod]
Type=Explod
Trigger1=(Time=10)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7207*ID
[State Explod]
Type=Explod
Trigger1=(Time=10)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7208*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time),0.05*(Time)
Trans=Sub
PauseMoveTime=65536
SuperMoveTime=65536
ID=7203*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time),0.05*(Time)
Trans=Add
PauseMoveTime=65536
SuperMoveTime=65536
ID=7204*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-5),0.05*(Time-5)
Trans=Sub
PauseMoveTime=65536
SuperMoveTime=65536
ID=7205*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-5),0.05*(Time-5)
Trans=Add
PauseMoveTime=65536
SuperMoveTime=65536
ID=7206*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-10),0.05*(Time-10)
Trans=Sub
PauseMoveTime=65536
SuperMoveTime=65536
ID=7207*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-10),0.05*(Time-10)
Trans=Add
PauseMoveTime=65536
SuperMoveTime=65536
ID=7208*ID
[State ]
Type=DestroySelf
Trigger1=(Time>=50)

[StateDef 7202 - Hyper Port LV 3]
Type=A
MoveType=I
Physics=N
Anim=1251199

[State ]
Type=PlaySnd
Trigger1=(Time=0)
Value=1,43

[State ]
Type=PlaySnd
Trigger1=(Time=0)
Value=1,44

[State ]
Type=BGPalFX
Trigger1=(Time=[0,29])
Add=-256,-256,-256
SinAdd=256,256,256,80
Time=20
PauseMoveTime=65536
SuperMoveTime=65536

[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7300
PosType=Back
Pos=0,(ScreenHeight-250)/2
Scale=1,1
BindTime=1
Sprpriority=-16
OwnPal=1
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7300

[State Explod]
Type=ModifyExplod
Trigger1=(Time=[30,49])
Scale=1+(0.025*(Time-29)),1+(0.025*(Time-29))
ID=7300
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7205
PosType=Back
Pos=ScreenWidth/2,ScreenHeight/2
Scale=Const240p(0.5),Const240p(0.5)
BindTime=1
Sprpriority=-64
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7204
PosType=Back
Pos=ScreenWidth/2,ScreenHeight/2
Scale=Const240p(0.5),Const240p(0.5)
BindTime=1
Sprpriority=64
OwnPal=1
ReMapPal=1,2
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7202
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=-2
OwnPal=1
;ReMapPal=3,0
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7202
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=-1
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7201
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=3
OwnPal=1
;ReMapPal=3,0
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7201
PosType=P1
Pos=0,0
Scale=0.5,0.5
BindTime=1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Trigger1=(var(3):=Random%360)
Trigger2=(Time=[1,2])
Trigger2=(var(3):=var(3)+120)
Anim=7203
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
;ReMapPal=3,0
Trans=Sub
Angle=var(3)
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=[0,2])
Anim=7203
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
Angle=var(3)
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
;ReMapPal=3,0
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7203*ID
[State Explod]
Type=Explod
Trigger1=(Time=0)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7204*ID
[State Explod]
Type=Explod
Trigger1=(Time=5)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
;ReMapPal=3,0
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7205*ID
[State Explod]
Type=Explod
Trigger1=(Time=5)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7206*ID
[State Explod]
Type=Explod
Trigger1=(Time=10)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=3
OwnPal=1
;ReMapPal=3,0
Trans=Sub
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7207*ID
[State Explod]
Type=Explod
Trigger1=(Time=10)
Anim=7120
PosType=P1
Pos=0,0
Scale=0.25,0.25
BindTime=1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
PauseMoveTime=65536
SuperMoveTime=65536
ID=7208*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time),0.05*(Time)
Trans=Sub
PauseMoveTime=65536
SuperMoveTime=65536
ID=7203*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time),0.05*(Time)
Trans=Add
PauseMoveTime=65536
SuperMoveTime=65536
ID=7204*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-5),0.05*(Time-5)
Trans=Sub
PauseMoveTime=65536
SuperMoveTime=65536
ID=7205*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-5),0.05*(Time-5)
Trans=Add
PauseMoveTime=65536
SuperMoveTime=65536
ID=7206*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-10),0.05*(Time-10)
Trans=Sub
PauseMoveTime=65536
SuperMoveTime=65536
ID=7207*ID
[State ]
Type=ModifyExplod
Trigger1=1
Scale=0.05*(Time-10),0.05*(Time-10)
Trans=Add
PauseMoveTime=65536
SuperMoveTime=65536
ID=7208*ID
[State ]
Type=DestroySelf
Trigger1=(Time>=30)

[statedef 781 - Dimension Slash FX]
type     = U
movetype = U
physics  = U
ctrl     = 0
movehitpersist = 1
hitdefpersist = 1
sprpriority = 6

[state 0]
type = screenBound
trigger1 = 1
value = 0

[State ?????????]
type = Statetypeset
trigger1 = 1
statetype = A
movetype = A
physics = N
ignorehitpause = 1

[state ]
type=changeanim
trigger1 = anim !=1955
value = 1955

[State 0, PosSet]
type = PosSet
trigger1 = !var(10)
x = Enemy,pos x +( random%50*ifelse(random%2=0,1,-1))
y = Enemy,pos y-50 +( random%50*ifelse(random%2=0,1,-1))

[State -1]
Type = AfterImage
Trigger1= !var(10)
Time = 60
Trans = Add
length = 6
FrameGap = 2
TimeGap = 1
PalBright = 70,70,70
PalContrast = 130,130,255
PalAdd = 0,0,0
PalMul =.70,.70,.70

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256
ignorehitpause = 1

[state ]
type=parentvarset
trigger1 = !var(10)
var(25)=random%360

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = root,var(25)
scale = 1,1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,stateno != 3300

;Time????
[state ]
type=varadd
trigger1 = 1
var(10)=1
ignorehitpause = 1

[Statedef 7006 - Dimensional Slash Helper]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 7003
ctrl = 0
sprpriority = -1

[State 7006, 振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2BodyDist X < 0

[State 7006, エフェクト]
type = Explod
trigger1 = time = 0
anim = 7002
scale = 0.45,0.45
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 7006, ヘルパー]
type = Helper
trigger1 = root,stateno =3300 
helpertype = normal
name = "zigen2"
ID = 3007
pos = 0, 8
postype = p1
facing = 1
stateno = 3007
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45
persistent=0

[State 7006, 効果音]
type = PlaySnd
trigger1 = animelem = 12
value = 1000, 2
channel = 1

[State 7006, 消す]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,stateno != 3300

[Statedef 3007 - Dimensional Slash Projectile]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
anim = 3004
ctrl = 0
sprpriority = 5
 
[State 7007, 消す]
type = DestroySelf
trigger1 = time = 180 
trigger2 = root,stateno != 3300

[Statedef 15100]
type = A
ctrl = 0
anim = 151000
velset = 0,0
movetype = H
physics = N
sprpriority = 1

[state ?????]
type = changeanim
trigger1 = !ishelper(1510)
trigger1 = time = 0
value = 150100

[State ?????????]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1


[State ????]
type = PlayerPush
trigger1 = IsHelper
value = 1
ignorehitpause = 1
 
[State ??????];5110?RaidSurface??????
type = nothitby
trigger1 = 1
value = SCA
 

;---------------------[??]
[state ??X]
type = velset
trigger1 = ishelper(1510)
trigger1 = time = 0
x = 10


[state ??X,Y]
type = velset
trigger1 = ishelper(1511)
trigger1 = time = 0
x = 10
y = -6

[state ??]
type = veladd
trigger1 = ishelper(1511)
y = 0.54

 
[State ???]
type = destroyself
trigger1 = animtime = 0

[Statedef 3002]
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 3300, 移動]
type = null;Posadd
trigger1 = Time = 0
x = 50

[State 3300]
type = PlayerPush
trigger1 = 1
value = 0

[State 30004, 1];殴られたり投げられたりしないように設定
type = NotHitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause=1


[State 30004];相殺する場合、消滅ステートに移行
type = HitOverRide
trigger1 = Time = 0
time = -1
attr = SCA, AA,AT,AP
slot = 0
stateno = 3002
ignorehitpause=1

[State 1000, helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%50), -ceil(random%25)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time%10 = 5
helpertype = normal
name = "zigen1"
ID = 7006
pos = ceil(random%170), -ceil(random%80)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time = [1,99]
trigger1 = time%10 = 0
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%100), -ceil(random%60)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 14001]
type = Destroyself
trigger1 =root,stateno != 3300

[Statedef 1401 - Round Trip Projectile]
type = A
movetype = A
physics = N
anim = 1401
ctrl = 0
sprpriority = 0

[State -2, ﾂk1] 
type = parentVaradd
trigger1 = 1
v = 22
value = 1
ignorehitpause=1


[State 0, 2]
type = Velset
trigger1 = root,var(22) < 40
;X = 7*((p2Dist X)/(Abs(p2Dist X - 0) + Abs(p2Dist Y)))
;Y = 7*((p2Dist Y-21)/(Abs(p2Dist x - 0) + Abs(p2Dist Y)))
x=7

[State 100, 0]
type = VelSet
trigger1 = root,var(22)>= 40
X = 7*((rootDist X)/(Abs(rootDist X - 0) + Abs(rootDist Y)))
Y = 1*((rootDist Y-21)/(Abs(rootDist x - 0) + Abs(rootDist Y)))


[State -2,ｵLｨｾ]
type = ParentVarSet
triggerall = root,var(22) >= 40
trigger1 = rootDist X =[-20,20]
trigger1 = rootDist y =[10,80]
v=53
value=0
ignorehitpause=1


[State 201, ヒット定義]
type = HitDef
triggerall = root,var(22) < 40
trigger1 =animelem=1
trigger2 =animelem=2
trigger3 =animelem=3
trigger4 =animelem=4
trigger5 =animelem=5
trigger6 =animelem=6
trigger7 =animelem=7
trigger8 =animelem=8
attr = A, SP 
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = ceil(root,fvar(10)*20), 2
pausetime = 0,2
guard.pausetime = 4,4
sparkno = -1
guard.sparkno = -1
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -2.4
guard.velocity = 0
air.velocity = -2.4,-3
airguard.velocity = -3,-.8
ID = 1401
givepower = 10,10
getpower = 20,20

[State 201, ヒット定義]
type = HitDef
triggerall = root,var(22) >= 40
trigger1 =animelem=1
trigger2 =animelem=2
trigger3 =animelem=3
trigger4 =animelem=4
trigger5 =animelem=5
trigger6 =animelem=6
trigger7 =animelem=7
trigger8 =animelem=8
attr = A, SP 
hitflag = MAF
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 4, Hit
damage = ceil(root,fvar(10)*20), 2
pausetime = 0,2
guard.pausetime = 4,4
sparkno = -1
guard.sparkno = -1
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 12
guard.ctrltime = 12
ground.velocity = 2.4
guard.velocity = 0
air.velocity = 2.4,-3
airguard.velocity = -3,-.8
ID = 1401
givepower = 10,10
getpower = 20,20

[State 0, Spark]
Type = Helper 
trigger1 = movehit = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.4
Size.YScale = 0.4
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 0, Spark]
Type = Helper 
trigger1 = moveguarded = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.4
Size.YScale = 0.4
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[state 0]
type = parentvarSet
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.9
ignorehitpause = 1

[State 1401]
type = NotHitBy
trigger1 = 1
value = SCA,AA, AT,AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 1404
time = 999
forceair = 0

[State 1401, エフェクト]
type = helper
trigger1 = time = 0
helpertype = normal
name = "tripexplod"
ID = 1405
postype = p1
pos = 0,0
facing = 0
stateno = 1405
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
IgnoreHitPause = 1


[State 3300, 残像]
type = AfterImage
trigger1 = Time = 0
time = 999
;TimeGap  = 10
FrameGap = 5
;length = 10
PalBright = 1,1,1
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 1073,2]
type = DestroySelf
trigger1 = root,var(53)=0

[Statedef 580 - Teleport FX]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 580
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -90

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Sub

[State 200, End]
type = Destroyself
trigger1 = animtime = 0

; Universal Projectile Destruction
[Statedef 1112]
type = A
physics = N
movetype = I
anim = 1251199 ; your blank animation
velset = 0, 0
ctrl = 0
movehitpersist = 1

[State -2, P2 Safe Fall]
type= targetstate
triggerall= numtarget=1; Just to prevent Simul mode shenanigans
triggerall= target,pos y>=-20 && target,vel y>0
triggerall= target,alive && target,hitfall && target,gethitvar(fall.recover)
triggerall= target,stateno=5030 || target,stateno=5035 || target,stateno=5050 || target,stateno=5071
trigger1 = target,AILevel <= 0
trigger1 = target,command="recovery"
trigger2 = target,AILevel > 0
trigger2 = random%100 <= 10*ceil((target,AILevel)*(target,AILevel)/64.0)
value= 5205
ignorehitpause= 1

[State 1112, nothitby]
type = nothitby
trigger1 = ishelper
time = 1
value = SCA
ignorehitpause = 1

[State 1112, NoShadow]
type = AssertSpecial
trigger1 = ishelper
flag = noshadow
ignorehitpause = 1

[State 1112, End]
type = destroyself
triggerall = root,stateno != [3000,3500]
triggerall = ishelper
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)
ignorehitpause = 1

[Statedef 7103 - Rapid Slash Projectile]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 17004
ctrl = 0
sprpriority = 5

[state 7103]
type = changeanim
trigger1 = time = 0
trigger1 = root,var(36) = 1
value = 8005

[State 7007, ヒット定義];次元斬３段目
type = hitdef
trigger1 = animelem = 2
trigger1 = !ishelper(7107)
attr = S, SP
animtype = heavy
damage   = ceil(root,fvar(10)*35),10
priority  = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
getpower = 15,15
givepower = 8,8
guard.ctrltime = 16
ground.velocity = -15
guard.velocity = -4
air.velocity = -15,-1
p2facing = 1
fall.recover=0
fall = 0
air.fall = 1
yaccel = .4
persistent=0
fall.yvelocity = -4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 7007, ヒット定義];次元斬３段目
type = hitdef
trigger1 = animelem = 2
trigger1 = ishelper(7107)
attr = S, SP
animtype = diagup
damage   = ceil(root,fvar(10)*35),10
priority  = 4, Hit  
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
p2facing = 1
getpower = 15,15
givepower = 8,8
guard.ctrltime = 16
ground.velocity = -2,-9
guard.velocity = -4
air.velocity = -2,-9
fall.recover=0
fall = 1
yaccel = .4
persistent=0
fall.yvelocity = -4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[state 0]
type = parentvarSet
trigger1 = movehit = 1
fvar(10) = root,fvar(10)*0.9
persistent = 0
ignorehitpause = 1

[State 0, Spark]
Type = Helper 
trigger1 = movehit = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.6
Size.YScale = 0.6
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 0, Spark]
Type = Helper 
trigger1 = moveguarded = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.6
Size.YScale = 0.6
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[state 7004]
type = varset
trigger1 = time = 0
var(56) = root,var(56)

[state 7004]
type = varset
trigger1 = time = 0
var(57) = numhelper(3800)

[state 7004]
type = varset
trigger1 = time = 0
var(58) = numhelper(3803)

[State 7007, 消す]
type = ChangeState
trigger1 = time = 50
trigger2 = root,movetype = H
value = 1112

[Statedef 1250 - Rapid Slash Dash FX]
type    = A
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1250
sprpriority = 3

[state 0]
type = bindToRoot
trigger1 = IsHelper(1250)
pos = -100 ,-65 

[state 0]
type = bindToRoot
trigger1 = IsHelper(1251)
pos = -70 ,-45

[state 0]
type = bindToRoot
trigger1 = IsHelper(1252)
pos = -100 ,-25 

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90

[State 200, End]
type = Destroyself
trigger1 = AnimTime = 0
trigger2 = root,movetype = H

[Statedef 36550 - Lunar Phase FX]
type=S
physics=N
movetype=A
ctrl=0
sprpriority=1
 
[state 0]
type = bindToRoot
trigger1 = 1
Pos=25,-75

[State 3655, Anim]
type=changeanim
trigger1= (anim!=[36050,36060])
value=36050

[State 3655, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 3655, Anim]
type=changeanim
trigger1= anim=36050 && animelemtime(10)>=0 
value=36060
 

[State 3655, End]
type=destroyself
trigger1= !animtime 
trigger2= root,movetype=H

[Statedef 7003 - Jugdement Cut Projectiles]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
anim = 17003
ctrl = 0
sprpriority = -1

[state = 7003]
type = posadd
trigger1 = time = 0
trigger1 = root,stateno != 1004
trigger1 = frontedgedist<= 0
x = frontedgedist

[state 7003,]
type = changeanim
trigger1 = time = 0
trigger1 = root,numhelper(3800)
value = 8003

[State 7003, エフェクト]
type = Explod
trigger1 = time = 0
anim = 17002
scale = 0.45 * (1 + (.3 * (root,numhelper(3800)))),0.45 * (1 + (.3 * (root,numhelper(3800))))
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 7003, ヘルパー];判定
type = Helper
trigger1 = time = 10;animelem = 16
helpertype = normal
name = "zigen2"
ID = 7004
pos = 0, 8
postype = p1
facing = 1
stateno = 7004
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45 * (1 + (.3 * (anim = 8003)))
size.yscale = 0.45 * (1 + (.3 * (anim = 8003)))

[State 7003, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 1000, 2
channel = 0

[State 7003, 消す]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 7004 - Judgement Cut Helper]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 7004
ctrl = 0
sprpriority = 5

[state 7003,]
type = changeanim
trigger1 = time = 0
trigger1 = parent,anim = 8003
value = 8004


[state 7004]
type = varset
trigger1 = time = 0
trigger1 = root,var(56) = 0
var(56) = 0

[state 7004]
type = varset
trigger1 = time = 0
trigger1 = root,var(56) >= 1
var(56) = 1
 

[State 7004, ヒット定義]
type = hitdef
trigger1 = animelem = 2
attr = S, SP
animtype = medium
damage   = ceil(root,fvar(10)*30),3
priority  = 4, Hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -6
guard.velocity = -4
air.velocity = -3,-5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
persistent=0
getpower = 15,15
givepower = 8,8
fall = 1

[State 7004, ヒット定義]
type = hitdef
trigger1 = animelem = 3
attr = S, SP
animtype = medium
damage   = ceil(root,fvar(10)*30),3
priority  = 4, Hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -6
guard.velocity = -4
air.velocity = -3,-5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
persistent=0
getpower = 15,15
givepower = 8,8
fall = 1

[State 7004, ヒット定義]
type = hitdef
trigger1 = animelem = 4
attr = S, SP
animtype = medium
damage   = ceil(root,fvar(10)*30),3
priority  = 4, Hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -6
guard.velocity = -4
air.velocity = -3,-5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
persistent=0
getpower = 15,15
givepower = 8,8
fall = 1

[State 7004, ヒット定義]
type = hitdef
trigger1 = animelem = 5
attr = S, SP
animtype = medium
damage   = ceil(root,fvar(10)*30),3
priority  = 4, Hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -6
guard.velocity = -4
air.velocity = -3,-5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
persistent=0
getpower = 15,15
givepower = 8,8
fall = 1

[State 7004, ヒット定義]
type = hitdef
trigger1 = animelem = 6
attr = S, SP
animtype = medium
damage   = ceil(root,fvar(10)*30),3
priority  = 4, Hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 13
ground.velocity = -6
guard.velocity = -4
air.velocity = -3,-5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
persistent=0
getpower = 15,15
givepower = 8,8
fall = 1

[State 0, Spark]
Type = Helper 
trigger1 = movehit = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.4
Size.YScale = 0.4
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 0, Spark]
Type = Helper 
trigger1 = moveguarded = 1
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 8001
Facing = -1
Pos = 0, -50
postype = p2
OwnPal = 1
Size.XScale =  0.6
Size.YScale = 0.6
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[state 7004]
type = varset
trigger1 = time = 0
var(57) = numhelper(3800)

[state 7004]
type = varset
trigger1 = time = 0
var(58) = numhelper(3803)

[State 7004, 消す]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 802 - Summoning Swords State]
type     = S
movetype = I
physics  = N
ctrl     = 0
sprpriority = 5

[State 200, 1]
type = Trans
trigger1 = 1
trans = add


[State 200, 1]
type = VarSet
trigger1 = 1
var(13) = AnimElemNo(0)

[State 200, 1]
type = VarSet
trigger1 = IsHelper(800)
var(55) = 0

[State 200, 1]
type = VarSet
trigger1 = IsHelper(801)
var(55) = 1

[State 200, 1]
type = VarSet
trigger1 = IsHelper(802)
var(55) = 2

[State 200, 1]
type = VarSet
trigger1 = IsHelper(803)
var(55) = 3

[State 200, 1]
type = VarSet
trigger1 = IsHelper(804)
var(55) = 4

[State 200, 1]
type = VarSet
trigger1 = IsHelper(805)
var(55) = 5


[State 0]
type = SprPriority
trigger1 = IsHelper(800)
trigger1 = animelem = 1
trigger2 = IsHelper(801)
trigger2 = animelem = 1 || animelem = 16
trigger3 = IsHelper(802)
trigger3 = animelem = 1 || animelem = 13
trigger4 = IsHelper(803)
trigger4 = animelem = 10
trigger5 = IsHelper(804)
trigger5 = animelem = 6
trigger6 = IsHelper(805)
trigger6 = animelem = 4
value = -5

[State 0]
type = SprPriority
trigger1 = IsHelper(800)
trigger1 = animelem = 10
trigger2 = IsHelper(801)
trigger2 = animelem = 7
trigger3 = IsHelper(802)
trigger3 = animelem = 4
trigger4 = IsHelper(803)
trigger4 = animelem = 1
trigger5 = IsHelper(804)
trigger5 = animelem = 1 || animelem = 16
trigger6 = IsHelper(805)
trigger6 = animelem = 1 || animelem = 13
value = 5

[State 0]
type = changeanim
trigger1 = IsHelper(800)
trigger1 = time = 0
value = 810
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(801)
trigger1 = time = 0
value = 811
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(802)
trigger1 = time = 0
value = 812
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(803)
trigger1 = time = 0
value = 813
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(804)
trigger1 = time = 0
value = 814
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(805)
trigger1 = time = 0
value = 815
persistent = 1

[State 440, ?????]
type = PlaySnd
trigger1 = time = 1
value = 8000, 0

[State 440, ?????]
type = PlaySnd
trigger1 = time = 78
value = 8000, 1

[State 440, ?????]
type = PlaySnd
trigger1 = time = 80
value = 8000, 2

[State 0, Explod]
type = Explod
trigger1 = time = 80
anim = 6015+random%4
pos = 0,-50
postype = p2
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5,0.5
sprpriority = 9
trans = add
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 440, ??]
type = Velset
trigger1 = IsHelper(800)
trigger1 = time = 60
x = -3

[State 440, ??]
type = Velset
trigger1 = IsHelper(801)
trigger1 = time = 60
x = -2.5
y = -1

[State 440, ??]
type = Velset
trigger1 = IsHelper(802)
trigger1 = time = 60
x = 1.5
y = -1.5

[State 440, ??]
type = Velset
trigger1 = IsHelper(803)
trigger1 = time = 60
x = 3

[State 440, ??]
type = Velset
trigger1 = IsHelper(804)
trigger1 = time = 60
x = 2.5
y = 1

[State 440, ??]
type = Velset
trigger1 = IsHelper(805)
trigger1 = time = 60
x = -1.5
y = 1.5


[State 440, ??]
type = Velset
trigger1 = IsHelper(800)
trigger1 = time = 75
x = 15

[State 440, ??]
type = Velset
trigger1 = IsHelper(801)
trigger1 = time = 75
x = 12
y = 4

[State 440, ??]
type = Velset
trigger1 = IsHelper(802)
trigger1 = time = 75
x = -9
y = 6

[State 440, ??]
type = Velset
trigger1 = IsHelper(803)
trigger1 = time = 75
x = -15

[State 440, ??]
type = Velset
trigger1 = IsHelper(804)
trigger1 = time = 75
x = -12
y = -4

[State 440, ??]
type = Velset
trigger1 = IsHelper(805)
trigger1 = time = 75
x = 9
y = -6


[State 200, ??]
type = DestroySelf
trigger1 = time > 100
trigger2 = root,stateno = 811

[Statedef 3655 - High Time FX]
type=S
physics=N
movetype=A
ctrl=0
sprpriority=1

[state 0]
type = bindToRoot
trigger1 = 1
Pos=25,-75
 
[State 3655, Anim]
type=changeanim
trigger1= time = 0
value=36050

[State 3655, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1
  
[State 3655, End]
type=destroyself
trigger1= !animtime 
trigger2= root,movetype=H

[StateDef 1752 - Star Fall FX]
Type=A
MoveType=A
Physics=N
Anim=6008
Juggle=0
Ctrl=0
Sprpriority=4
 
[State ]
Type=AngleDraw
Trigger1= 1
Value=55 
[State ]
Type=BindToRoot
Trigger1= 1
Pos=55,15
 
[State ]
Type=Trans
Trigger1=1
Trans=Add
IgnoreHitPause=1
SuperMoveTime=65536
PauseMoveTime=65536

[State ]
Type=ChangeState
Trigger1=(Root,StateNo=631)
Value=1753

[State ]
Type=DestroySelf
Trigger1=(Root,MoveType=H)
Trigger2=(Root,StateNo!=[630,631])

[StateDef 1753]
Type=A
MoveType=A
Physics=N
Anim=6008
Juggle=0
Ctrl=0
Sprpriority=4
 
[State ]
Type=AngleDraw 
Trigger1=(Time=[0,3])
Value=55
Scale=1-(Time*0.1),1

[State ]
Type=AngleDraw 
Trigger1=(Time=[4,8])
Value=55
Scale=0.2-((Time-3)*0.025),1

[State ]
Type=BindToRoot 
Trigger1=(Time=0)
Pos=64,0
 
[State ]
Type=Trans
Trigger1=1
Trans=AddAlpha
Alpha=256-(Time*32),256
IgnoreHitPause=1
SuperMoveTime=65536
PauseMoveTime=65536
[State ]
Type=DestroySelf
Trigger1=(Time=8)
Trigger2=(Root,MoveType=H)

[Statedef 100000 - Slash Spark]
type = S
juggle = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 9006
sprpriority=5

[State 0, BindToRoot]
type = BindToRoot 
trigger1 = !Time
time = -1
pos = (Root,Var(17)),(Root,Var(20))
ignorehitpause = 1

[State 0, Null]
type = Null
trigger1 = FVar(20):= 12.0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
Scale=((Time/FVar(20))*1.8)*2.5,(0.25-((Time/FVar(20))*0.25))*2.5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleSet]
type = AngleSet
trigger1 = !Time
value = Random

[State 0, Trans]
Type=Trans
Trigger1=1
Trans=AddAlpha
Alpha=256,256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80010
ID = 8001
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8001
Scale=((Time/FVar(20))*0.2),((Time/FVar(20))*0.2)
Trans=AddAlpha
Alpha=Ceil(256.0-((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80020
ID = 8002
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8002
Scale=0.25-((Time/FVar(20))*0.25),0.25-((Time/FVar(20))*0.25)
Trans=AddAlpha
Alpha=Ceil(0.0+((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80020
ID = 80022
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 80022
Scale=((Time/FVar(20))*0.4),((Time/FVar(20))*0.1)
Trans=AddAlpha
Alpha=Ceil(256.0-((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80030
ID = 8003
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8003
Scale=((Time/FVar(20))*0.4),((Time/FVar(20))*0.2)
Trans=AddAlpha
Alpha=Ceil(256.0-((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = Time<2
anim = 80040
ID = 8004
scale=0.02,0.02
bindtime = 1
removetime = -2
vel = (Random/200.0)*Cond(Random<500,-1,1),(Random/200.0)*Cond(Random<500,-1,1)
sprpriority = 5
ownpal = 1
postype = p1

[State 0, Explod]
type = Explod
trigger1 = Time<2
anim = 80040
ID = 8004
scale=0.02,0.02
bindtime = 1
removetime = -2
vel = (Random/200.0)*Cond(Random<500,-1,1),(Random/200.0)*Cond(Random<500,-1,1)
sprpriority = 5
ownpal = 1
postype = p1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = Ceil(FVar(20))
trigger2 = root,stateno = 3301

[Statedef 100001 - Slash Spark (Helper)]
type = S
juggle = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 9006
sprpriority=5

[State 0, Null]
type = Null
trigger1 = FVar(20):= 12.0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
Scale=((Time/FVar(20))*1.8)*2.5,(0.25-((Time/FVar(20))*0.25))*2.5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleSet]
type = AngleSet
trigger1 = !Time
value = Random

[State 0, Trans]
Type=Trans
Trigger1=1
Trans=AddAlpha
Alpha=256,256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80010
ID = 8001
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8001
Scale=((Time/FVar(20))*0.2),((Time/FVar(20))*0.2)
Trans=AddAlpha
Alpha=Ceil(256.0-((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80020
ID = 8002
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8002
Scale=0.25-((Time/FVar(20))*0.25),0.25-((Time/FVar(20))*0.25)
Trans=AddAlpha
Alpha=Ceil(0.0+((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80020
ID = 80022
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 80022
Scale=((Time/FVar(20))*0.4),((Time/FVar(20))*0.1)
Trans=AddAlpha
Alpha=Ceil(256.0-((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = !Time
anim = 80030
ID = 8003
bindtime = -1
removetime = Ceil(FVar(20))
sprpriority = 5
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8003
Scale=((Time/FVar(20))*0.4),((Time/FVar(20))*0.2)
Trans=AddAlpha
Alpha=Ceil(256.0-((Time/FVar(20))*256.0)),256

[State 0, Explod]
type = Explod
trigger1 = Time<2
anim = 80040
ID = 8004
scale=0.02,0.02
bindtime = 1
postype = p1
removetime = -2
vel = (Random/200.0)*Cond(Random<500,-1,1),(Random/200.0)*Cond(Random<500,-1,1)
sprpriority = 5
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = Time<2
anim = 80040
ID = 8004
scale=0.02,0.02
bindtime = 1
removetime = -2
vel = (Random/200.0)*Cond(Random<500,-1,1),(Random/200.0)*Cond(Random<500,-1,1)
sprpriority = 5
ownpal = 1
postype = p1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = Ceil(FVar(20))

; Spark
[Statedef 8000]
type = S
movetype = I
physics = N
sprpriority = 10

[state 0]
type = changestate
trigger1 = time = 0
trigger1 = root,var(12) = 5
value = 100000

[State 0, Null]
type = Null
trigger1 = !Time
trigger1 = Fvar(0):= Const(Size.XScale)
trigger1 = Var(12):= (Root,Var(12))

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 8000 + (6*(Var(12)=2)) + (1004*(Var(12)=3)) + (4*(Var(12)=4))

[state 0]
type = turn
trigger1 = var(12) = 2
trigger1 = time = 0

[State 0, AngleSet]
type = AngleSet
trigger1 = (Var(12)=1)||(Var(12)=3)||(Var(12)=4)
trigger1 = !Time
value = 12*(Random%30)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = (Var(12)=1)
Scale = (1.0-((Time/12.0)*1.0))*Fvar(0),(1.0-((Time/12.0)*1.0))*Fvar(0)
Value = Random

[State 0, AngleDraw]
type = AngleDraw
trigger1 = (Var(12)=2)
Scale = (1.3-((Time/10.0)*1.3))*Fvar(0),(1.3-((Time/10.0)*1.3))*Fvar(0)
Value = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = (Var(12)=3)
Scale = (((Time/20.0)*1.0))*Fvar(0),(((Time/20.0)*1.0))*Fvar(0)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = (Var(12)=4)
Scale = (((Time/12.0)*10.0))*Fvar(0),((0.8-(Time/12.0)*0.8))*Fvar(0)

[State 0, Trans]
type = Trans
trigger1 = (Var(12)=1)||(Var(12)=2)
trans = addalpha
alpha = 256-(((Time-8)*(Time>8))*64),256
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = (Var(12)=3)
trans = addalpha
alpha = 256-(((Time-12)*(Time>12))*31),256
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = (Var(12)=4)
trans = addalpha
alpha = 256,256
ignorehitpause = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = Time = 8
trigger1 = (Var(40)=3)
time = 5
sinadd=-128,-128,-128,20

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=4)
trigger1 = !Time
anim = 8000
ID = 8000
bindtime = -1
sprpriority = 10
RemoveTime = 12
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8000
Scale=((Time/12.0)*0.5)*Fvar(0),((Time/12.0)*0.5)*Fvar(0)
Trans=AddAlpha
alpha = 256-(((Time-8)*(Time>8))*64),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=1)||(Var(12)=4)
trigger1 = !Time
anim = 8001
ID = 8001
bindtime = -1
sprpriority = 10
RemoveTime = 12
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8001
Scale=((Time/12.0)*0.4)*Fvar(0),((Time/12.0)*0.4)*Fvar(0)
Trans=AddAlpha
Alpha=256-(((Time-4)*(Time>4))*31),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=4)
trigger1 = !Time
anim = 8002
ID = 8002
bindtime = -1
sprpriority = 10
RemoveTime = 12
ownpal = 1
postype = p1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8002
Scale=(0.5-(Time/12.0)*0.5)*Fvar(0),(0.5-(Time/12.0)*0.5)*Fvar(0)
Trans=AddAlpha
Alpha=255-(((Time-4)*(Time>4))*31),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=3)
trigger1 = !Time
anim = 8002
ID = 80020
bindtime = -1
sprpriority = 10
RemoveTime = 12
postype = p1
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 80020
Scale=(1.2-(Time/20.0)*1.2)*Fvar(0),(1.2-(Time/20.0)*1.2)*Fvar(0)
Trans=AddAlpha
Alpha=255-(((Time-4)*(Time>4))*31),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=3)
trigger1 = !Time
anim = 8005
ID = 8005
bindtime = -1
sprpriority = 10
RemoveTime = 20
postype = p1
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8005
Scale=((Time/20.0)*1.0)*Fvar(0),((Time/20.0)*1.0)*Fvar(0)
Trans=AddAlpha
alpha = 256-(((Time-12)*(Time>12))*31),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=1)
trigger1 = !Time
anim = 8007
postype = p1
ID = 8007
bindtime = -1
sprpriority = 10
RemoveTime = 12
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8007
Scale=(0.5-(Time/12.0)*0.5)*Fvar(0),(0.5-(Time/12.0)*0.5)*Fvar(0)
Trans=AddAlpha
Alpha=255-(((Time-4)*(Time>4))*31),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=4)
trigger1 = !Time
anim = 8007
ID = 80070
bindtime = -1
postype = p1
sprpriority = 10
RemoveTime = 12
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 80070
Scale=((Time/12.0)*0.7)*Fvar(0),((Time/12.0)*0.7)*Fvar(0)
Trans=AddAlpha
Alpha=255-(((Time-4)*(Time>4))*31),256

[State 0, Explod]
type = Explod
trigger1 = (Var(12)=3)
trigger1 = !Time
anim = 8007
ID = 80071
bindtime = -1
sprpriority = 10
RemoveTime = 20
postype = p1
ownpal = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 80071
Scale=((Time/20.0)*3.0)*Fvar(0),((Time/20.0)*3.0)*Fvar(0)
Trans=AddAlpha
alpha = 256-(((Time-12)*(Time>12))*31),256

[State 0, Particles]
type = Explod
trigger1 = (Var(12)=1)||(Var(12)=4)
trigger1 = Time<2
anim = 80030
ID = 8003
vel = Random/150*Cond(Random<500,1,-1),Random/150*Cond(Random<500,1,-1)
accel=0,.4
bindtime = 1
sprpriority = 11
RemoveTime = -2
ownpal = 1
postype = p1
scale = 0.125,0.125

[State 0, Particles]
type = Explod
trigger1 = (Var(12)=1)||(Var(12)=4)
trigger1 = Time<2
anim = 80030
ID = 8003
vel = Random/150*Cond(Random<500,1,-1),Random/150*Cond(Random<500,1,-1)
bindtime = 1
accel=0,.3
sprpriority = 11
RemoveTime = -2
ownpal = 1
scale = 0.05,0.05
postype = p1

[State 0, Particles]
type = Explod
trigger1 = (Var(12)=2)
trigger1 = Time<2
anim = 80030
ID = 8003
vel =-1*(Random/150),-1*(Random/150)
accel=0,Const(Movement.YAccel)
bindtime = 1
sprpriority = 11
RemoveTime = -2
ownpal = 1
postype = p1
scale = 0.125,0.125

[State 0, Particles]
type = Explod
trigger1 = (Var(12)=2)
trigger1 = Time<2
anim = 80030
ID = 8003
vel =-1*(Random/150),-1*(Random/150)
bindtime = 1
accel=0,.3
postype = p1
sprpriority = 11
RemoveTime = -2
ownpal = 1
scale = 0.05,0.05

[State 0, Particles]
type = Explod
trigger1 = (Var(12)=3)
trigger1 = Time<10
postype = p1
anim = 9005
ID = 9005
vel = ((Random/100*Cond(Random<500,1,-1))*Fvar(0)),((Random/100*Cond(Random<500,1,-1))*Fvar(0))
accel=0,0
bindtime = 1
sprpriority = 11
RemoveTime = -2
ownpal = 1
scale = (0.2 * Fvar(0)),(0.2 * Fvar(0))

[State 0, Particles]
type = Explod
trigger1 = (Var(12)=3)
trigger1 = Time<10
anim = 9005
ID = 9005
postype = p1
vel = ((Random/60*Cond(Random<500,1,-1))*Fvar(0)),((Random/60*Cond(Random<500,1,-1))*Fvar(0))
bindtime = 1
accel=0,0
sprpriority = 11
RemoveTime = -2
ownpal = 1
scale = (0.3 * Fvar(0)),(0.3 * Fvar(0))

[State 0, BindToRoot]
type = BindToRoot
trigger1 = !Time
time = -1
pos = (Root,Var(17)),(Root,Var(20))
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 12 - 2*(Var(12)=2) + 8*(Var(12)=3)
trigger2 = Var(12) < 0 || Var(12) > 4

; Spark
[Statedef 8001]
type = S
movetype = I
physics = N
sprpriority = 10
 
[State 0, Null]
type = Null
trigger1 = !Time
trigger1 = Fvar(0):= Const(Size.XScale)
trigger1 = Var(12):= (Root,Var(12))

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 8006

[state 0]
type = turn 
trigger1 = time = 0
 
[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
Scale = (1.3-((Time/10.0)*1.3))*Fvar(0),(1.3-((Time/10.0)*1.3))*Fvar(0)
Value = 0
 

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-(((Time-8)*(Time>8))*64),256
ignorehitpause = 1

[State 0, Particles]
type = Explod 
trigger1 = Time<2
anim = 80030
ID = 8003
vel =-1*(Random/150),-1*(Random/150)
accel=0,Const(Movement.YAccel)
bindtime = 1
sprpriority = 11
RemoveTime = -2
ownpal = 1
postype = p1
scale = 0.125,0.125

[State 0, Particles]
type = Explod 
trigger1 = Time<2
anim = 80030
ID = 8003
vel =-1*(Random/150),-1*(Random/150)
bindtime = 1
accel=0,.3
sprpriority = 11
RemoveTime = -2
postype = p1
ownpal = 1
scale = 0.05,0.05
 
[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 10 

[statedef 60120 - Air Combo End Explod]
type    = a
movetype= I
physics = N
ctrl = 0
anim = 1251199

[state 250,11]
type = explod
trigger1 = time = 0
persistent = 0
anim = 6012
pos = -80,-5
postype = p2
sprpriority = 5
velocity = 0, 0
bindtime = 1
ownpal = 1

[state 250,12]
type = explod
trigger1 = time = 0
persistent = 0
anim = 6013
pos = -80,-5
postype = p2
sprpriority = -5
velocity = 0, 0
bindtime = 1
ownpal = 1


[state 250,15]
type = playsnd
trigger1 = time = 0
persistent = 0
value = s0,11

[state 250,15]
type = destroyself
trigger1 = time = 100

[Statedef 20210 - Z Proj Shield]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20210
ctrl = 0
sprpriority = 1

[State 21100, NHB]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT
slot = 0
stateno = 20211
time = -1
ignorehitpause = 1
;persistent = 

[State 21100, BTR]
type = bindtoroot
trigger1 = 1
pos = 46,-52
ignorehitpause = 1

[State 21100, ASS]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 210
trigger1 = root,animelemtime(7)>=0
trigger2 = root,stateno != 210

 
[Statedef 20211]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1251199
ctrl = 0
sprpriority = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 210
trigger1 = root,animelemtime(7)>=0
trigger2 = root,stateno != 210

[State 21100, Zeeky]
type = changestate
trigger1 = 1
value = 20210
ignorehitpause = 1

[Statedef 20410 - Launcher Proj Shield]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20410
ctrl = 0
sprpriority = 1

[State 21100, NHB]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT
slot = 0
stateno = 20411
time = -1
ignorehitpause = 1
;persistent = 

[State 21100, BTR]
type = bindtoroot
trigger1 = 1
pos = 46,-52
ignorehitpause = 1

[State 21100, ASS]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 410
trigger1 = root,animelemtime(7)>=0
trigger2 = root,stateno != 410

 
[Statedef 20411]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1251199
ctrl = 0
sprpriority = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 410
trigger1 = root,animelemtime(7)>=0
trigger2 = root,stateno != 410

[State 21100, Zeeky]
type = changestate
trigger1 = 1
value = 20410
ignorehitpause = 1

[Statedef 20412 - Upper Slash Proj Shield]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20410
ctrl = 0
sprpriority = 1

[State 21100, NHB]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT
slot = 0
stateno = 20414
time = -1
ignorehitpause = 1
;persistent = 

[State 21100, BTR]
type = bindtoroot
trigger1 = 1
pos = 46,-52
ignorehitpause = 1

[State 21100, ASS]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 412
trigger1 = root,animelemtime(10)>=0
trigger2 = root,stateno != 412

 
[Statedef 20414]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1251199
ctrl = 0
sprpriority = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 412
trigger1 = root,animelemtime(10)>=0
trigger2 = root,stateno != 412

[State 21100, Zeeky]
type = changestate
trigger1 = 1
value = 20412
ignorehitpause = 1

[Statedef 20450 - d.Z Proj Shield]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20450
ctrl = 0
sprpriority = 1

[State 21100, NHB]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT
slot = 0
stateno = 20451
time = -1
ignorehitpause = 1
;persistent = 

[State 21100, BTR]
type = bindtoroot
trigger1 = 1
pos = 46,-52
ignorehitpause = 1

[State 21100, ASS]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 450
trigger1 = root,animelemtime(5)>=0
trigger2 = root,stateno != 450

 
[Statedef 20451]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1251199
ctrl = 0
sprpriority = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 450
trigger1 = root,animelemtime(5)>=0
trigger2 = root,stateno != 450

[State 21100, Zeeky]
type = changestate
trigger1 = 1
value = 20450
ignorehitpause = 1

[Statedef 20610 - j.Y Proj Shield]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20610
ctrl = 0
sprpriority = 1

[State 21100, NHB]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT
slot = 0
stateno = 20611
time = -1
ignorehitpause = 1
;persistent = 

[State 21100, BTR]
type = bindtoroot
trigger1 = 1
pos = 46,-52
ignorehitpause = 1

[State 21100, ASS]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 610 || root, stateno = 609
trigger1 = root,animelemtime(10)>=0
trigger2 = root,stateno != 610 && root,stateno != 609

 
[Statedef 20611]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1251199
ctrl = 0
sprpriority = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 610 || root, stateno = 609
trigger1 = root,animelemtime(10)>=0
trigger2 = root,stateno != 610 && root,stateno != 609

[State 21100, Zeeky]
type = changestate
trigger1 = 1
value = 20610
ignorehitpause = 1

[Statedef 20620 - j.Z Proj Shield]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20620
ctrl = 0
sprpriority = 1

[State 21100, NHB]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT
slot = 0
stateno = 20621
time = -1
ignorehitpause = 1
;persistent = 

[State 21100, BTR]
type = bindtoroot
trigger1 = 1
pos = 46,-52
ignorehitpause = 1

[State 21100, ASS]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 620 
trigger1 = root,animelemtime(7)>=0
trigger2 = root,stateno != 620  

 
[Statedef 20621]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1251199
ctrl = 0
sprpriority = 1

[State 21100, Zeeky]
type = destroyself
trigger1 = root,stateno = 620 
trigger1 = root,animelemtime(7)>=0
trigger2 = root,stateno != 620  

[State 21100, Zeeky]
type = changestate
trigger1 = 1
value = 20620
ignorehitpause = 1

;---------------------------------------------------------------------------
;判定


;---------------------------------------------------------------------------
;判定


;---------------------------------------------------------------------------
;判定
[Statedef 7104]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 17004
ctrl = 0
sprpriority = 5

[state 7103]
type = changeanim
trigger1 = time = 0
trigger1 = root,var(36) = 1
value = 8005

[State 7007, ヒット定義];次元斬３段目
type = hitdef
trigger1 = animelem = 2
trigger1 = !ishelper(7107)
attr = S, SP
animtype = heavy
damage   = 10,3
priority  = 4, Hit
sparkno = 11
sparkxy = 10,-45
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = 11
guard.sparkno = S8000
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
getpower = 0
givepower = 10,3
guard.ctrltime = 16
ground.velocity = -15
guard.velocity = -4
air.velocity = -15,-1
p2facing = 1
fall.recover=0
fall = 0
air.fall = 1
yaccel = .4
persistent=0
fall.yvelocity = -4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 7007, ヒット定義];次元斬３段目
type = hitdef
trigger1 = animelem = 2
trigger1 = ishelper(7107)
attr = S, SP
animtype = diagup
damage   = 10,3
priority  = 4, Hit
sparkno = 11
sparkxy = 10,-45
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = 11
guard.sparkno = S8000
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
getpower = 0
givepower = 10,3
guard.ctrltime = 16
ground.velocity = -5,-8
guard.velocity = -4
air.velocity = -5,-8
fall.recover=0
p2facing = 1
fall = 1
yaccel = .4
persistent=0
fall.yvelocity = -4.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0


[state 7004]
type = varset
trigger1 = time = 0
var(56) = root,var(56)

[state 7004]
type = varset
trigger1 = time = 0
var(57) = numhelper(3800)

[state 7004]
type = varset
trigger1 = time = 0
var(58) = numhelper(3803)

[State 7007, 消す]
type = DestroySelf
trigger1 = time = 50
;---------------------------------------------------------------------------
;やられ


;---------------------------------------------------------------------------
;判定

;---------------------------------------------------------------------------
;次元斬エフェクト
[Statedef 7005]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
anim = 7001
ctrl = 0
sprpriority = 5

[State 7005, パレット効果]
type=palfx
trigger1= time = 1
time=55
sinadd=-100,-50,-100,480

[State 7005, エフェクト]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
:次元斬発生ヘルパー
[Statedef 7007]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
anim = 17003
ctrl = 0
sprpriority = -1

[state 7003]
type = varset
trigger1 = time = 0
var(1) = enemynear(0),ID

[state 7003]
type = posset
trigger1 = time <= 15
;trigger1 = playerID(var(1)),facing != facing
x = playerID(var(1)),pos x + 20 * facing

;[state 7003]
;type = posset
;trigger1 = time <= 15
;trigger1 = playerID(var(1)),facing = facing
;x = -playerID(var(1)),pos x - 30

[state 7003,]
type = changeanim
trigger1 = time = 0
trigger1 = root,numhelper(3800)
value = 8003

[State 7003, エフェクト]
type = Explod
trigger1 = time = 0
anim = 17002
scale = 0.45 * (1 + (.3 * (root,numhelper(3800)))),0.45 * (1 + (.3 * (root,numhelper(3800))))
postype = p1
pos = 0,0
bindtime = -1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 7003, ヘルパー];判定
type = Helper
trigger1 = time = 15;animelem = 16
helpertype = normal
name = "zigen2"
ID = 7004
pos = 0, 8
postype = p1
facing = 1
stateno = 7004
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45 * (1 + (.3 * (anim = 8003)))
size.yscale = 0.45 * (1 + (.3 * (anim = 8003)))

[State 7003, 効果音]
type = PlaySnd
trigger1 = animelem = 12
value = 1000, 2
channel = 0

[State 7003, 消す]
type = DestroySelf
trigger1 = animtime = 0

 
;--------------------------------------------------------------

[Statedef 9998]
physics=N
velset=0,0
anim=9998
sprpriority=0

[state 9998,BGPALFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 0,0,0
invertall = 0
color = 0

[State 9998, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2 = invisible
flag3 = nobardisplay
ignorehitpause=1

[State 7510, portrait]
type=explod
trigger1= !time
anim=9998
ID=9998
postype=back
pos=160 * GameWidth/320.0 , GameHeight/240.0 * 120
scale = 0.5 *GameWidth/320.0 , 0.5*GameWidth/320.0
under=1
sprpriority = -999
bindtime=-1
removetime=-1
ownpal = 1
pausemovetime=999999
supermovetime=999999

[State 9998, end]
type=removeexplod
trigger1 = root,stateno !=[3000,3003]
trigger1 = root,stateno != 2900
trigger1 = root,stateno !=[3500,3508]
trigger1 = root,stateno != 3200
trigger2 = numhelper(9999) = 1
ID = 9998

[State 9998, end]
type=destroyself
trigger1 = root,stateno !=[3000,3003]
trigger1 = root,stateno != 2900
trigger1 = root,stateno !=[3500,3508]
trigger1 = root,stateno !=[3700,3501]
trigger1 = root,stateno != 3200
trigger2 = numhelper(9999) = 1

 
;---------------------------------------------------------------------------
[Statedef 7101]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 2900
ctrl = 0

[State 7101, 移動]
type = velset
time = 1
trigger1 = IsHelper(7101)
X = 3

[State 7101, 移動]
type = velset
time = 1
trigger1 = IsHelper(7102)
X = -3

[State 7101, 移動]
type = velset
time = 40
trigger1 = IsHelper(7101)
X = 2

[State 7101, 移動]
type = velset
time = 40
trigger1 = IsHelper(7102)
X = -2

[State 7101, 移動]
type = velset
time = 80
trigger1 = IsHelper(7101)
X = 1

[State 7101, 移動]
type = velset
time = 80
trigger1 = IsHelper(7102)
X = -1

[State 7101, 無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 7101, ぶつかり]
type = PlayerPush
trigger1 = 1
value = 1

[State 3000, 消す]
type = DestroySelf
trigger1 = time = 100

;----------------------------------------------------------------------------


;===========================================================================
;幻影剣消滅(ヘルパー)
[Statedef 8503]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8512
sprpriority = 5

[State 0]
type = BindToRoot
trigger1 = var(13) = [8,10]
time = 999
facing = 1
pos = 65, -50

[State 0]
type = BindToRoot
trigger1 = var(13) = [1,2]
trigger2 = var(13) = 18
time = 999
facing = 1
pos = -65, -50

[State 0]
type = AngleDraw
trigger1 = 1
scale = 0.7,1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 3

[State 200, 消滅]
type = DestroySelf
trigger1 = animtime = 0

;===========================================================================
;幻影剣消滅(ヘルパー)


;===========================================================================
;幻影剣(ヘルパー)
[Statedef 8600]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8511
sprpriority = 0
movehitpersist = 1

[State -3, ヘルパー]
type = Helper
trigger1 = root,palno >= 7
trigger1 = time = 5
helpertype = normal
name = "kyusyu"
ID = 8603
pos = ceil(10 * cos(pi / 360 * ((var(12)+180)%360))),ceil(10 * sin(pi / 360 * ((var(12)+180)%360)))
postype = p1
facing= 1
stateno = 8603
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5
ignorehitpause = 1

[State -3, ヘルパー]
type = Helper
trigger1 = root,palno >= 7
trigger1 = time = 9
helpertype = normal
name = "kyusyu"
ID = 8603
pos = ceil(10 * cos(pi / 360 * ((var(12)+180)%360))),ceil(10 * sin(pi /pi / 360 * ((var(12)+180)%360)))
postype = p1
facing= 1
stateno = 8603
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.35
size.yscale = 0.5
ignorehitpause = 1

[state 8600]
type = poweradd
trigger1 = time = 0
trigger1 = root,movetype = H
trigger1 = (root,stateno = [120,155])
value = -1000

[State 7000, VarSet]
type = VarSet
triggerall = time = 0
trigger1 = root,var(59) <= 0
trigger1 = root,command !="holdfwd"
trigger1 = root,command !="holdback"
trigger2 = root,var(59) > 0
trigger2 = 1
var(12) = 0

[State 7000, VarSet]
type = VarSet
triggerall = time = 0
trigger1 = root,var(59) <= 0
trigger1 = root,command = "holdfwd"
trigger2 = root,var(59) > 0
trigger2 = root,p2dist y <= -100
var(12) = 50

[State 7000, VarSet]
type = VarSet
triggerall = time = 0
trigger1 = root,var(59) <= 0
trigger1 = root,command = "holdback"
trigger2 = root,var(59) > 0
trigger2 = root,p2statetype=L || root,p2dist x <= 100-(root,p2statetype=A)*70
var(12) = -50


;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 = 1
var(57) = root,var(57)

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT, AP
slot = 1
stateno = 8504
time = 999
forceair = 0


[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 7000, VelSet]
type = VelSet
trigger1 = time = 1
x = -3

[State 7000, VelSet]
type = VelSet
trigger1 = time = 1
y = -3 * var(12)/-45

[State 7000, VelSet]
type = VelSet
trigger1 = time = 20
x = 25

[State 7000, VelSet]
type = VelSet
trigger1 = time = 20
y = 25 * var(12)/-45


[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 10
value = 8000, 1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 20
attr = S, SP 
hitflag = MAFD
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 20-(root,var(57)*3), 1
pausetime = 0,3
guard.pausetime = 0,3
sparkno = S9311
guard.sparkno = S8000
sparkxy = -20, -20+random%10
getpower = 0
givepower = 20,10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = -3
guard.velocity = -1
air.velocity = -1.4,-5
airguard.velocity = -3,-.8
air.fall = 1
air.recover = 0
fall.recover = 0
ID = 8600

[State -2, 変数]
type = VarSet
trigger1 = movecontact = 1
var(56) = ceil(pos Y)

[State 3001, Explod]
type = Explod
trigger1 = movecontact
anim = 8513
ID = 8513
pos = 0, var(56)+10
postype = p2
facing = 1
bindtime = -1
removetime = -2
supermovetime = -1
pausemovetime = -1
scale = 0.3, 0.25
ownpal = 1
sprpriority = 3

[State 3001, Explod]
type = ModifyExplod
trigger1 = movecontact >= 12
ID = 8513
removetime = 0

[State 0, 消滅変数]
type = AssertSpecial
trigger1 = movecontact
flag = invisible

[state 0]
type = changestate
trigger1 = movehit
value = 8601

[State 200, 消滅]
type = DestroySelf
triggerall = time > 30
trigger1 = FrontEdgeBodyDist < -100
trigger2 = BackEdgeBodyDist < -100

;-----------------------------------------------

[statedef 8601]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8601
sprpriority = 0
movehitpersist = 1

;[State 0, 消滅変数]
;type = AssertSpecial
;trigger1 = 1
;flag = invisible

;[state 0]
;type = bindtotarget
;trigger1 = 1

[state 0]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 8601]
type = destroyself
trigger1 = target(8600),movetype != H
trigger2 = !numtarget

;------------------------------------------------------
[Statedef 8603]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8511
sprpriority = 0
movehitpersist = 1


[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
var(12) = parent,var(12)

;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 = 1
var(57) = root,var(57)

[State 0]
type = NotHitBy
trigger1 = 1
value = SCA, AA, AT, AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT, AP
slot = 1
stateno = 8504
time = 999
forceair = 0


[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 7000, VelSet]
type = VelSet
trigger1 = time = 1
x = -3

[State 7000, VelSet]
type = VelSet
trigger1 = time = 1
y = -3 * var(12)/-45

[State 7000, VelSet]
type = VelSet
trigger1 = time = 20
x = 25

[State 7000, VelSet]
type = VelSet
trigger1 = time = 20
y = 25 * var(12)/-45


[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 10
value = 8000, 1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 20
attr = S, SP 
hitflag = MAFD
guardflag = MA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 20-(root,var(57)*3), 1
pausetime = 0,3
guard.pausetime = 0,3
sparkno = S9311
guard.sparkno = S8000
sparkxy = -20, -20+random%10
getpower = 0
givepower = 20,10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = -3
guard.velocity = -1
air.velocity = -1.4,-5
airguard.velocity = -3,-.8
air.fall = 1
air.recover = 0
fall.recover = 0
ID = 8600

[State -2, 変数]
type = VarSet
trigger1 = movecontact = 1
var(56) = ceil(pos Y)

[State 3001, Explod]
type = Explod
trigger1 = movecontact
anim = 8513
ID = 8513
pos = 0, var(56)+10
postype = p2
facing = 1
bindtime = -1
removetime = -2
supermovetime = -1
pausemovetime = -1
scale = 0.3, 0.25
ownpal = 1
sprpriority = 3

[State 3001, Explod]
type = ModifyExplod
trigger1 = movecontact >= 12
ID = 8513
removetime = 0

[State 0, 消滅変数]
type = AssertSpecial
trigger1 = movecontact
flag = invisible


[State 200, 消滅]
type = DestroySelf
triggerall = time > 30
trigger1 = FrontEdgeBodyDist < -100
trigger2 = BackEdgeBodyDist < -100
trigger3 = movecontact

;===========================================================================

;===========================================================================
;急襲幻影剣(ヘルパー)


;---------------------------------------------------------------------------------
;Guard Push
[Statedef 165]
type = S
movetype = I
physics =  N
poweradd = 0
ctrl = 0
anim = 165
sprpriority = -4
ignorehitpause = 1


[State 165, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 1


[State 165, VelSet]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 165, VelSet]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 165, VelSet]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 165, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 165, DestroySelf]
type = DestroySelf
trigger1 = Time >= 18

;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジ



;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジヒット中
[Statedef 1402]
type = A
movetype = A
physics = N
anim = 1401
ctrl = 0


[state 1402]
type = velmul
trigger1 = 1
x = 0.7
y = 0.7

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0


[State 1402, 移動]
type = Posadd
trigger1 = time >= 1
x = 0.2
y = -0.15

[State 1401]
type = NotHitBy
trigger1 = 1
value = SCA,AA, AT,AP
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 1403
time = 999
forceair = 0

[State 201, ヒット定義]
type = HitDef
trigger1 = animelemtime(1) >= 0
trigger1 = time%6 = 0
attr = A, SP 
hitflag = MAFD
guardflag = MA
animtype = Light
air.animtype = light
fall.animtype = back
priority = 3, Hit
damage = 5, 2
pausetime = 0,2
guard.pausetime = 0,4
sparkno = S9104
guard.sparkno = S8000
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = Low
air.type = Low
ground.slidetime = 10
ground.hittime  = 7
air.hittime = 7
guard.ctrltime = 10
ground.velocity = 0.5
guard.velocity = -2
air.velocity = 0.5,-1
airguard.velocity = -1,-.8
ID = 1402

[State 201, ヒット定義]
type = HitDef
trigger1 = time > 70
attr = A, SP 
hitflag = MAFD
guardflag = M
animtype = medium
air.animtype = medium
fall.animtype = back
priority = 3, Hit
damage = 5, 2
pausetime = 0,2
guard.pausetime = 0,4
sparkno = S9104
guard.sparkno = S8000
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = Low
air.type = Low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 20
guard.ctrltime = 10
ground.velocity = 0.5
guard.velocity = -2
air.velocity = 0.5,-1
airguard.velocity = -1,-.8
ID = 1402

[state 1401,varset]
type = varset
trigger1 = movehit = 1
var(14) = target,ID


[State 1402, ステート変更]
type = ChangeState
trigger1 = Time > 75
value = 1403
ctrl = 0

[Statedef 1403]
type = A
movetype = I
physics = N
anim = 1401
ctrl = 0
sprpriority = 0

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0

[State 1401]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((rootdist x=[0,10]),11,ifelse((rootdist x=[-10,0]),-11,rootdist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((rootdist y= 100),101,rootdist y)-100


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(rootdist Y <100,-1,1))

[State 7000, VelSet]
type = Velset
trigger1 = time >= 0
x = -8
;y = -3.2

[State 7000, VelSet]
type = Velset
trigger1 = time >= 15
x = 8*cos(fvar(0))
;y = -3.2*sin(fvar(0))

[State 7000, Veladd]
type = Veladd
trigger1 = time >= 15
x = 0.8*cos(fvar(0))
;y = -0.4*sin(fvar(0))

[State 334, 消える]
type = DestroySelf
trigger1 = time = 999
trigger2 = rootdist X = [-15,15]
trigger2 = rootdist y = [80,120]
trigger2 = time > 30

;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジ喰らい後
[Statedef 1404]
type = A
movetype = I
physics = N
anim = 1401
ctrl = 0
sprpriority = 0

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0

[State 1401]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 1404
time = 999
forceair = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((rootdist x=[0,10]),11,ifelse((rootdist x=[-10,0]),-11,rootdist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((rootdist y= 100),101,rootdist y)-100


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(rootdist Y <100,-1,1))

[State 7000, VelSet]
type = Velset
trigger1 = time >= 0
x = -9
y = -3

[State 7000, VelSet]
type = Velset
trigger1 = time >= 15
x = 8*cos(fvar(0))
y = -3.2*sin(fvar(0))

[State 7000, Veladd]
type = Veladd
trigger1 = time >= 15
x = 0.8*cos(fvar(0))
y = -0.4*sin(fvar(0))


[State 334, 消える]
type = DestroySelf
trigger1 = time = 999
trigger2 = rootdist X = [-15,15]
trigger2 = rootdist y = [80,120]
trigger2 = time > 30

;---------------------------------------------------------------------------
;ラウンドトリップエフェクト
[Statedef 1405]
type = A
movetype = I
physics = N
anim = 1403
ctrl = 0
sprpriority = 0

[State 1405, 親に付く]
type = BindToParent
trigger1 = NumHelper(1401) > 0
time = 99999
facing = 0
pos = 0, 0

[State 334, 消える]
type = DestroySelf
trigger1 = NumHelper(1401) = 0

 
;--------------------------------------------------------------------
;Xファクターオーラ
;--------------------------------------------------------------------
;----------------------------------------------------------------
[Statedef 3803]
type = S
movetype = I
physics =  N
ctrl = 0
sprpriority = -4
ignorehitpause = 1

[state 25001]
type = varset
trigger1 = root,stateno = 3703
v=55
value = root,var(28) + (root,var(29) )

[state 25001]
type = varadd
trigger1 = root,stateno != 3703
v=55
value = -1

[State 25001]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 240, 255

[State 25001, AssertSpecial]
type = AssertSpecial
;trigger1 = !AnimExist(root,anim)
;trigger2 = root,movetype = H
;trigger2 = (root,anim = [161,4999]) || root,anim > 6000
trigger1 = 1
flag = Invisible


[State 25001, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 25001]
type = PalFX
trigger1 = 1
time = 1
add = 255,255,255
mul = 255,0,0

[state 25001]
type = AngleDraw
trigger1 = 1
scale = root,Const (size.xscale),root,Const (size.yscale);(1.05+fvar(2))*root,Const (size.xscale),(1.05+fvar(2))*root,Const (size.yscale)
ignorehitpause = 1

[State 25001]
type = Varset
trigger1 = gametime%1 = 0
fv = 2
value = random%3 * 0.025
ignorehitpause = 1

[state 25001]
type = changeanim
trigger1 = 1
value = root,anim
elem = root,AnimElemNo(0) 
ignorehitpause = 1 

[State 25001]
type = BindToRoot
trigger1 = 1;常に実行
time = -1;時間は-1にしておけば問題なし
facing = 1
pos = 0, 0;任意
ignorehitpause=1


[State 1];本体と向きを揃える
type = Turn
trigger1 = Facing != root,Facing
ignorehitpause = 1

[State 1];戦闘中以外は消す
type = DestroySelf
trigger1 = root,alive = 0
trigger2 = var(55) <= 0
trigger2 = root,stateno !=[3500,3508]
trigger2 = root,stateno !=[3000,3003]
ignorehitpause = 1



[Statedef 3300 - Dimension Slash]
type     = U
movetype = A
physics  = N
ctrl     = 0
sprpriority = 0
movehitpersist = 1
hitdefpersist = 1

[State 1200, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 200, 1]
type = PlaySnd
trigger1 = time = 2
value = 3001,var(13)

[state 0]
type = playerPush
trigger1 = 1
value = 0

[state 0]
type = varset
trigger1 = time = 0
trigger1 = fvar(10) < 1
fvar(10) = fvar(10)*0.9

[State 2000, STS]
type = statetypeset
trigger1 = time = 0
trigger1 = statetype != A
statetype = S
physics = N


[state ]
type=changeanim
trigger1 = anim != 3300
value = 3300

[state ]
type=varset
trigger1 = animelemtime(1)=0
var(25) = 780
ignorehitpause = 1

[state ]
type=varset
trigger1 = animelemtime(10)=0
var(25) = 0
ignorehitpause = 1

[State ,????]
type = Turn
triggerall = animelemtime(1)=[0,1]
trigger1 = pos x < enemynear,pos x && facing = -1
trigger2 = enemynear,pos x < pos x && facing = 1
ignorehitpause = 1	
  


[state ]
type=velset
trigger1 = statetype != A
trigger1 = animelemtime(1)=0
x = -6
y = 0

[state ]
type=velset
trigger1 = statetype != A
trigger1 = animelemtime(3)=5
x = 0
y = 0 

[state ]
type=velset
trigger1 = statetype = A
trigger1 = time = 0
x = 0
y = 0 

[state ]
type=posset
trigger1 = animelemtime(9)=[0,100]
x = Enemy,pos x
y = Enemy,pos y

[state ]
type=velmul
trigger1 = statetype != A
trigger1 = animelemtime(1)=[1,20]
x = 0.97

[state ]
type=velset
trigger1 = animelemtime(6)=0
x = 8
y = -8

[State -1]
Type = AfterImage
Trigger1= animelemtime(1)=0
Time = 150
Trans = Add
length = 10
FrameGap = 3
TimeGap = 1
PalBright = 70,70,70
PalContrast = 130,130,255
PalAdd = 0,0,0
PalMul =.70,.70,.70

[State 0, SuperPause]
type = SuperPause
trigger1 = animelemtime(1)=0
time = 50
anim = -1
sound = S-1,0
pos = 0,0
movetime = 50
darken = 1
p2defmul = 1
poweradd = -1000
unhittable = 1

[State Hyper]
Type=Helper
trigger1 = statetype != A
trigger1 = animelemtime(1)=0
HelperType=Normal
Pos=-40,-68
OwnPal=1
PosType=P1
StateNo=7201
PauseMoveTime=65536
SuperMoveTime=65536

[State Hyper]
Type=Helper
trigger1 = statetype = A
trigger1 = animelemtime(1)=0
HelperType=Normal
Pos=0,-68
OwnPal=1
PosType=P1
StateNo=7201
PauseMoveTime=65536
SuperMoveTime=65536

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelemtime(6)=0
statetype = A
movetype = A
physics = N

[State 1000, helper]
type = Helper
trigger1 = animelemtime(9)=0
HelperType=Normal
name = "zigen1"
ID = 3002
pos = 0,0
postype = p1
facing = 1
stateno = 3002
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45


[State 200, ????]
type = HitDef
trigger1 = (var(24):=5)
trigger1 = animelemtime(9)>=0
trigger1 = animelemtime(9)%6=0
trigger1 = animelemtime(10)<=0
attr = A, HA
ID = 3300
damage = 13, 5
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 5 
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=5),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S-1,0
guardsound = S6, 0 
guard.hittime = 15
guard.ctrltime = 15
ground.type = High
ground.slidetime = 15
ground.hittime  = 19
ground.velocity = -1,-5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1 , -3.6
yaccel = 0.5
air.hittime = 15 
numhits = 1
fall.recover = 0
fall = 1 
getpower = 0 

[state 0]
type = targetstate
trigger1 = numtarget(3300)
trigger1 = movehit
trigger1 = animelemtime(10)=0
value = 3010

[state ]
type=velmul
trigger1 = animelemtime(8)=[1,60]
x = 0.85
y = 0.85


[State ??????]
Type = Helper
trigger1 = animelemtime(9)>=0
trigger1 = animelemtime(9)%5=0
trigger1 = animelemtime(10)<=-10
HelperType = normal
Name = "Ice"
ID = 781
Stateno = 781
size.mid.pos = 781,0
postype = p2
pos = 0,-50
Supermovetime = 2147483647	
Pausemovetime = 2147483647
Ignorehitpause = 1
ownpal =1
size.xscale = 1.3
size.yscale = 1.3

[state ]
type=playsnd
trigger1 = animelemtime(1)=0
value = 3,0
freqmul = 0.9
[state ]
type=playsnd
trigger1 = animelemtime(1)=0
value = 500,6
freqmul = 1
[state ]
type=playsnd
trigger1 = animelemtime(1)=0
value = 200,8
freqmul = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelemtime(10)=0
statetype = A
movetype = A
physics = A

[state ]
type=velset
trigger1 = animelemtime(10)=0
x = 1.5
y = -2

[State 0, PosSet]
type = PosSet
trigger1 = animelemtime(10)=0
x = Enemy,pos x -(70 * facing)
y = Enemy,pos y -40
ignorehitpause = 1
  

[state ]
type=playsnd
trigger1 = animelemtime(9)>=0
trigger1 = animelemtime(9)%5=0
trigger1 = animelemtime(10)<=-10
value = 600,3
freqmul = 1.3
channel = 9


[state ]
type=playsnd
trigger1 = Movecontact = 1
value = 5,0
freqmul = 1.1
   
[state ]
type=changestate
trigger1 = animtime=0
value=3301
ctrl=0
 
[Statedef 3301 - End]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3305
sprpriority = -2
ctrl = 0
facep2 = 1

[state 0]
type = posset
trigger1 = time = 0
y = 0

[state a];????
type = Helper 
trigger1 = animelem = 3
id = 1510
name = "kama"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 15100 
pausemovetime = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
 
[state a]
type = statetypeset 
trigger1 = animelem = 3
statetype = A

 
 

[state a]
type = posadd 
trigger1 = animelem = 3
y = -64



[state a]
type = velset 
trigger1 = animelem = 3
x = 10
y = -10

[state a]
type = veladd 
trigger1 = animelem = 3,>0
trigger1 = animelem = 13,<0
y = 1.2


[state a]
type = velset 
trigger1 = animelem = 13
x = 0
y = 0

[state a]
type = posset 
trigger1 = animelem = 13
y = 0

[state a]
type = statetypeset 
trigger1 = animelem = 13
Statetype = S
 

[State 200, 1]
type = PlaySnd
trigger1 = animelemtime(35) = 0
value = 190,2

[State 200, 1]
type = PlaySnd
trigger1 = animelemtime(49) = 0
value = 5,1


;---------------------[??]
[state a]
type = playerpush
trigger1 = animelemtime(13) < 0
value = 0

;---------------------[?????????]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1  

[Statedef 2900 - Spiral Swords]
type = S
movetype = I
physics = S
ctrl = 0
anim = 5946
velset = 0,0
sprpriority = 0
poweradd = -1000

[State 3300, 時間停止]
type = SuperPause
trigger1 = Time = 3
time = 90
movetime = 90	
anim = -1
sound = -1
pos = 0,0
darken = 1
p2defmul = 1 
unhittable = 0 

[State Hyper]
Type=Helper
trigger1 = Time = 3
HelperType=Normal
Pos=0,-68
OwnPal=1
PosType=P1
StateNo=7201
PauseMoveTime=65536
SuperMoveTime=65536
          
[State 2900, 効果音]
type = PlaySnd
trigger1 = time = 1
value = 3500,0
 
[State -3, ヘルパー]
type = Helper
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = time = 87
helpertype = normal
name = "Enjin"
ID = 8500
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 10
pausemovetime = 10
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = time = 87
helpertype = normal
name = "Enjin"
ID = 8501
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 10
pausemovetime = 10
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = time = 87
helpertype = normal
name = "Enjin"
ID = 8502
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 10
pausemovetime = 10
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = time = 87
helpertype = normal
name = "Enjin"
ID = 8503
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 10
pausemovetime = 10
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = time = 87
helpertype = normal
name = "Enjin"
ID = 8504
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 10
pausemovetime = 10
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = time = 87
helpertype = normal
name = "Enjin"
ID = 8505
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 10
pausemovetime = 10
size.xscale = 0.5
size.yscale = 0.5
 
[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2910,0+(random%2)
channel = 0

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 7
value = 20,0

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 12
value = 5,4

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 22
value = 190,2

[State ]
type = Explod
trigger1 = animelemtime(10) = 0
anim = 6033
ownpal = 1
sprpriority = 2147483646
pos = 0,-70
scale = .8,.8
postype = p1
trans = add
removetime = -2
ignorehitpause = 1
supermovetime = 2147483647
pausemovetime = 2147483647

[State ]
type = Explod
trigger1 = animelemtime(11) = 0
anim = 6070
ownpal = 1
sprpriority = 2147483647
pos = 0,-70
scale = .8,.8
postype = p1
trans = add
removetime = -2
ignorehitpause = 1
supermovetime = 2147483647
pausemovetime = 2147483647

[State ]
type = Explod
trigger1 = animelemtime(11) = 0
anim = 6070
ownpal = 1
sprpriority = 2147483647
facing = -1
pos = 0,-70
scale = .8,.8
postype = p1
trans = add
removetime = -2
ignorehitpause = 1
supermovetime = 2147483647
pausemovetime = 2147483647

[State ]
type = Explod
trigger1 = animelemtime(11) > 0
id = 6000
anim = 6000
pos = -14,-43
random = 90,80
ownpal = 1
sprpriority = 4
vel = -5-random%5,-8+random%8
trans = add
scale = 0.6,0.6
pausemovetime = 2000000000
supermovetime = 2000000000
postype = p1

[State ]
type = Explod
trigger1 = animelemtime(11) > 0
id = 6000
anim = 6000
pos = -14,-43
random = 90,80
ownpal = 1
sprpriority = 4
vel = -5-random%5,8-random%8
trans = add
scale = 0.6,0.6
pausemovetime = 2000000000
supermovetime = 2000000000
postype = p1

[State ]
type = Explod
trigger1 = animelemtime(11) > 0
id = 6000
anim = 6000
pos = -14,-43
random = 90,80
ownpal = 1
sprpriority = 4
vel = 5+random%5,8-random%8
trans = add
scale = 0.6,0.6
pausemovetime = 2000000000
supermovetime = 2000000000
postype = p1

[State ]
type = Explod
trigger1 = animelemtime(11) > 0
id = 6000
anim = 6000
pos = -14,-43
random = 90,80
ownpal = 1
sprpriority = 4
vel = 5+random%5,-8+random%8
trans = add
scale = 0.6,0.6
pausemovetime = 2000000000
supermovetime = 2000000000
postype = p1

[State -2]
type = PlaySnd
trigger1 = AnimElem = 11
value = 3500,5 

[State 2900, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
 

;--------------------------------------------------------
;--------------------------------------------------------

[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -1000
velset = 0,0
anim = 41000+var(10)
ctrl = 0
sprpriority = 2


[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 51000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41000
elem = animelemno(0)

[State 1000, セリフ]
type = PlaySnd
trigger1 = Time = 1
value = 0, 3

[State 1000, 効果音]
type = PlaySnd
trigger1 = Time = 15
channel = 0
value = 1000, 0

[State 1000, 移動]
type = velset
trigger1 = AnimElem = 3
x = -3

[State 1000, 移動]
type = velset
trigger1 = AnimElem = 4
x = -3

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 5
x = -4.5

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 6
x = -3

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 7
x = -2.4

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 9
x = -1.2

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 11
x = 0

[State 1010, 幅]
type = Width
trigger1 = 1
value = 50,30

[State 1000, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 7000
scale = 0.5,0.5
postype = p1
pos = -40,-50
sprpriority = 4
;supermove = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = Helper
trigger1 = time = 13
helpertype = normal
name = "zigeneffect"
ID = 7005
pos = 10,-35
postype = p1
facing = 1
stateno = 7005
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.1+var(7)*0.3
size.yscale = 0.5+var(7)*0.1

[State 1000, helper]
type = Helper
trigger1 = animelem = 14
helpertype = player
name = "zigen1"
ID = 3202
pos = 0,0
postype = p1
facing = 1
stateno = 3202
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "x"
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "y"
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "z"
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [0,110]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [111,180]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = Time = 0
triggerall = p2bodydist X = [181,260]
trigger1 = var(7) <= 0
trigger2 = var(7) >= 4
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [0,110]
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [111,180]
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(7) !=[1,3]
trigger1 = p2bodydist X = [181,260]
v = 7                   
value = 3

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1002
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3202]
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 3300, 移動]
type = Posadd
trigger1 = Time = 0
x = 50

[State 3300]
type = PlayerPush
trigger1 = 1
value = 0

[State 30004, 1];殴られたり投げられたりしないように設定
type = NotHitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause=1


[State 30004];相殺する場合、消滅ステートに移行
type = HitOverRide
trigger1 = Time = 0
time = -1
attr = SCA, AA,AT,AP
slot = 0
stateno = 3002
ignorehitpause=1


[State 7006, ヘルパー]
type = Helper
trigger1 = time%20 = 0
trigger1 = time <= 150
helpertype = normal
name = "zigen2"
ID = 3007
pos = ceil(random%320), -ceil(random%200)
postype = left
facing = 1
stateno = 3007
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45
persistent=0

[State 7006, ヘルパー]
type = Helper
trigger1 = time%20 = 10
trigger1 = time <= 150
helpertype = normal
name = "zigen2"
ID = 7006
pos = ceil(random%320), -ceil(random%200)
postype = left
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45
persistent=0

[State 1000, helper]
type = Helper
trigger1 = time%30 = 0
trigger1 = time <= 150 
helpertype = normal
name = "zigen1"
ID = 7006
pos = ceil(random%320), -ceil(random%200)
postype = left
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%50), -ceil(random%25)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time%10 = 5
helpertype = normal
name = "zigen1"
ID = 7006
pos = ceil(random%170), -ceil(random%80)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time = [1,99]
trigger1 = time%10 = 0
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%100), -ceil(random%60)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45



[State 14001]
type = Destroyself
trigger1 =root,stateno != 3003
trigger1 =root,stateno != 3200

[Statedef 3500 - Dark Angel]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = -2

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 3500]
type = changeanim
trigger1 = anim = 1400
trigger1 = animelemno(0) = 15
value = 1100


[State 1000, ゲージ消費]
type = PowerAdd
trigger1 = time = 0
value = -3000

[State 3300, 時間停止]
type = SuperPause
trigger1 = Time = 3
time = 30
movetime = 30
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State Hyper]
Type=Helper
trigger1 = Time = 3
HelperType=Normal
Pos=-20,-68
OwnPal=1
PosType=P1
StateNo=7202
PauseMoveTime=65536
SuperMoveTime=65536

[State 3300, 効果音]
type = PlaySnd
trigger1 = time = 3
value = 3500,1

[State 3300, 効果音]
type = PlaySnd
trigger1 = time = 3
value = 3000,0
 
[state 250,判定リセット]
type = varset
trigger1 = time <=1
var(19) = 0
ignorehitpause = 0

[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[State 1100, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, 速度]
type = velset
trigger1 = anim = 1100
trigger1 = AnimElem = 3
x = 10

[State 1100, 速度]
type = velset
trigger1 = anim = 1100
trigger1 = AnimElem = 4
x = 15

[State Explod]
Type=Explod
trigger1 = anim = 1100
Trigger1=(AnimElem=3)
Anim=6029
PosType=P1
Pos=20,-76
Scale=0.5,0.5
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
Angle=90
Persistent=0
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = anim = 1100
Trigger1=(AnimElem=3)
Anim=6029
PosType=P1
Pos=20,-76
Scale=0.5,0.5
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
Angle=90
Persistent=0
RemoveTime=-2
RemoveOnGetHit=1

[State 1100, ヒット定義]
type = HitDef
trigger1 = (var(24):=8)
trigger1 = anim = 1100
trigger1 = animelem = 3 || animelem = 4
attr = S, HA
animtype  = hard
damage= 0,150
priority  = 7, Hit
hitflag = MAFD
guardflag = M
pausetime = 0,11
sparkno = -1+0*(var(12):=5)
sparkxy = -1+0*(var(17):=85),(var(20):=-70)
guard.sparkno = -1+0*(Var(23):=2)
hitsound = S1,10
getpower = 0
givepower = 150,150
guardsound = S6,0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = -17,0
airguard.velocity = -6,-1
persistent = 0
p2stateno = 3560
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
hitonce = 1
yaccel = .5
id = 3500
ground.cornerpush.veloff = -20
guard.cornerpush.veloff = -8
kill = 0
 

[State 1100, ステート変更]
type = ChangeState
trigger1 = FrontEdgeBodyDist < 30
trigger1 = time > 42
trigger2 = time > 48
value = 3501
ctrl = 0

[State 1100, ステート変更]
type = ChangeState
trigger1 = movecontact
value = 3502
ctrl = 0

[Statedef 3501 - Failed]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = -2

[State 1110, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[State 1110, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1110, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1


[State 1110, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1110, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1


[state 250,判定リセット]
type = varset
trigger1 = var(19) = 0
trigger1 = movecontact
var(19) = 1
ignorehitpause = 0

[State 1110, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = S, HA
animtype  = heavy
damage= 15
priority  = 7, Hit
hitflag = MAFD
guardflag = M
pausetime = 5,5
sparkno = S9302
getpower = 0
givepower = 20,10
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 8
guard.velocity = -8
air.velocity = -17,0
airguard.velocity = -6,-1
p2stateno = 3560
persistent=0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
hitonce = 1
id = 3500
kill = 0

[state 3500]
type = AllPalFX
trigger1 = movehit = 1
time = 30
add = 0,0,0
mul = 256,256,256
sinadd = -256,-256,-256,120
invertall = 0
color = 256
ignorehitpause=1

[state 3500]
type = EnvColor
trigger1 = movehit >= 30
trigger1 = target(3500),stateno = 3560
value = 0, 0, 0
time = 1
under = 0
ignorehitpause=1
 



[state 3503]
type = TargetBind
trigger1 = movehit
time = 1
ID = 3500
pos = 60, 0


[State 1110, ステート変更]
type = ChangeState
trigger1 = movehit
trigger1 = animtime >= -3
value = 3503
ctrl = 0

[State 1110, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = !movehit
value = 0
ctrl = 1

[Statedef 3502 - Success]
type    = S
movetype= I
physics = S
juggle  = 6
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = -2
 
[state 3500]
type = EnvColor
trigger1 = numtarget(3500)
trigger1 = time >= 30
trigger1 = target(3500),stateno = 3560
value = 0, 0, 0
time = 1
under = 0
ignorehitpause=1

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[State 1200, 効果音]
type = PlaySnd
trigger1 = target,stateno = 3261
trigger1 = target,time = 1
value = S1,2
abspan = target,pos x

[State 1120, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1120, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1120, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1

[state 3500]
type = AllPalFX
trigger1 = target(3500),stateno = 3560
trigger1 = time = 1
time = 30
add = 0,0,0
mul = 256,256,256
sinadd = -256,-256,-256,120
invertall = 0
color = 256
ignorehitpause=1

[State 0, PosSet]
type = Posset
trigger1 = time = 30
trigger1 = facing = 1
x = -170
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = Posset
trigger1 = time = 30
trigger1 = facing = -1
x = 170
y = 0
ignorehitpause = 1

[State 1110, ステート変更]
type = ChangeState
trigger1 = target(3500),stateno = 3560
trigger1 = AnimTime = 0
value = 3503
ctrl = 0

[State 1120, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[statedef 3503]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 210+var(10)
ctrl = 0
sprpriority = -2

[state 3503]
type = null;posset
trigger1 = time = 0
x = -80 * facing
y = 0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10210
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 210
elem = animelemno(0)

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1


[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10210
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 210
elem = animelemno(0)

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, ぶつかり]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0 

[State 210, セリフ]
type = null;PlaySnd
trigger1 = animelem = 3
value = 0, 3
channel = 0

[State 210, セリフ]
type = PlaySnd
trigger1 = animelem = 3
trigger1 = numhelper(3510) = 0
value = 2500,0
channel = 0

[State 210, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 5, 0

[State 210, 効果音]
type = PlaySnd
trigger1 = animelem = 26
value = 5, 1

[State Explod]
Type=Explod
Trigger1=(AnimElem=11)
Anim=6007
PosType=P1
Pos=14,-72
Scale=0.65,0.75
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
ID=6000
[State Explod]
Type=Explod
Trigger1=(AnimElem=11)
Anim=6007
PosType=P1
Pos=14,-72
Scale=0.65,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
ID=6000
 
[State Explod]
Type=Explod
trigger1 = animelem = 5
Anim=6007
PosType=P1
Pos=14,-72
Scale=0.65,0.75
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
ID=6000
[State Explod]
Type=Explod
trigger1 = animelem = 5
Anim=6007
PosType=P1
Pos=14,-72
Scale=0.65,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1
ID=6000

[State 0, Spark]
Type = Helper 
trigger1 = animelemtime(5) = 0
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.7
Size.YScale = 0.7
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 210, 効果音]
type = PlaySnd
trigger1 = animelemtime(5) = 0
value = 1, 11
 
[State 1224, ヒットカウント]
type = hitadd
trigger1 = animelemtime(5) = 0
value = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(5) = 0
value = -10
kill = 0
absolute = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(5) = 0
value = -10
kill = 0
absolute = 0

[state 3503]
type = TargetBind
trigger1 = 1
time = 1
pos = 60, 0

[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3510) = 0
trigger1 = animelemtime(5) = 1
helpertype = normal
name = "kyusyu"
ID = 3510
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5


[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3511) = 1
triggerall = NumHelper(3512) = 0
trigger1 = animelemtime(5) = 1
helpertype = normal
name = "kyusyu"
ID = 3512
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5




[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3513) = 1
triggerall = NumHelper(3514) = 0
trigger1 = animelemtime(5) = 1
helpertype = normal
name = "kyusyu"
ID = 3514
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5



[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3515) = 1
triggerall = NumHelper(3516) = 0
trigger1 = animelemtime(5) = 1
helpertype = normal
name = "kyusyu"
ID = 3516
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5


[state 3505]
type = targetstate
trigger1 = animelemtime(5) = 0
value = 3560


[state 3503]
type = changestate
trigger1 = animelemtime(6) = 0
value = 3504

[statedef 3504]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
sprpriority = -2

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = time = 0
value = 412 + var(10)
elem = 4

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10412
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 412
elem = animelemno(0)

[State 412, セリフ]
type = null;PlaySnd
trigger1 = animelem = 8
value = 0, 5
channel = 0

[State 412, 効果音]
type = PlaySnd
trigger1 = animelem = 8
value = 5, 3

[State 412, 移動]
type = PosSet
trigger1 = time = 0
y = 0

[State Explod]
Type=Explod
trigger1 = animelemtime(2) = 2 
Anim=6026
PosType=P1
Pos=0,-38
Scale=0.5,0.75
BindTime=-1
Sprpriority=3
OwnPal=1
 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = animelemtime(2) = 2 
Anim=6026
PosType=P1
Pos=0,-38
Scale=0.5,0.75
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1 
  
[State 210, エフェクト]
type = Helper
trigger1 = animelem = 8
HelperType = Normal
Name = "Spark"
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.7
Size.YScale = 0.7
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 210, 効果音]
type = PlaySnd
trigger1 = animelemtime(8) = 0
value = 1, 12

[State 1224, ヒットカウント]
type = hitadd
trigger1 = animelemtime(8) = 0
value = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(8) = 0
value = -20
kill = 0
absolute = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(8) = 0
value = -10
kill = 0
absolute = 0



[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3510) = 1
triggerall = NumHelper(3511) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3511
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5


[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3512) = 1
triggerall = NumHelper(3513) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3513
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3514) = 1
triggerall = NumHelper(3515) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3515
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3516) = 1
triggerall = NumHelper(3517) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3517
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5


[state 3505]
type = targetstate
trigger1 = animelem = 8
value = 3560

[state 3503]
type = TargetBind
trigger1 = 1
time = 1
pos = 60, 0

[state 3503]
type = changestate
trigger1 = animelem = 9
trigger1 = numhelper(3517) = 0
value = 3503


[state 3503]
type = changestate
trigger1 = animelem = 9
trigger1 = numhelper(3517) = 1
value = 3508

[Statedef 3508]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 21001+var(10)
ctrl = 0
sprpriority = 2

[state 25501]
type = ScreenBound
trigger1 = 1
value = 0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 31001
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 21001
elem = animelemno(0)

[State 1010, 幅]
type = Width
trigger1 = 1
value = 50,30
 

[State Explod]
Type=Explod
trigger1 = animelem = 8
Anim=6032
PosType=P1
Pos=46,-54
Scale=0.5,0.5
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = animelem = 8
Anim=6032
PosType=P1
Pos=46,-54
Scale=0.5,0.5
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1

[State 1000, ヘルパー]
type = Explod
trigger1 = animelem = 8
anim = 7004
name = "zigen1"
ID = 3508
pos = -10, -13
postype = p2
facing = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
scale = 0.45 , 0.45

[State 7006, 効果音]
type = PlaySnd
trigger1 = animelem = 8
value = 1000, 2
channel = 1


[State 3503, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 0
helpertype = normal
name = "kyusyu"
ID = 3518
pos = target(3500),pos x - pos x,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 4
helpertype = normal
name = "kyusyu"
ID = 3519
pos = target(3500),pos x - pos x,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 8
helpertype = normal
name = "kyusyu"
ID = 3520
pos = target(3500),pos x - pos x,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 12
helpertype = normal
name = "kyusyu"
ID = 3521
pos = target(3500),pos x - pos x,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 210, エフェクト]
type = helper
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 4
trigger3 = animelemtime(8) = 8
trigger4 = animelemtime(8) = 12
trigger5 = animelemtime(8) = 16
trigger6 = animelemtime(8) = 20
trigger7 = animelemtime(8) = 24
trigger8 = animelemtime(8) = 28
ID = 8000
StateNO = 100001
Facing = -1
Pos = 0, -70
postype = p2
OwnPal = 1
Size.XScale =  0.7
Size.YScale = 0.7
PauseMoveTime = 999999
SuperMoveTime = 999999
Size.ShadowOffset = 9999
IgnoreHitPause = 1

[State 210, 効果音]
type = PlaySnd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 4
trigger3 = animelemtime(8) = 8
trigger4 = animelemtime(8) = 12
trigger5 = animelemtime(8) = 16
trigger6 = animelemtime(8) = 20
trigger7 = animelemtime(8) = 24
trigger8 = animelemtime(8) = 28
value = 1, 11

[State 1224, ヒットカウント]
type = hitadd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 4
trigger3 = animelemtime(8) = 8
trigger4 = animelemtime(8) = 12
trigger5 = animelemtime(8) = 16
trigger6 = animelemtime(8) = 20
trigger7 = animelemtime(8) = 24
trigger8 = animelemtime(8) = 28
value = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 4
trigger3 = animelemtime(8) = 8
trigger4 = animelemtime(8) = 12
trigger5 = animelemtime(8) = 16
trigger6 = animelemtime(8) = 20
trigger7 = animelemtime(8) = 24
trigger8 = animelemtime(8) = 28
value = -10
kill = 0
absolute = 1


[state 3505]
type = targetstate
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 4
trigger3 = animelemtime(8) = 8
trigger4 = animelemtime(8) = 12
trigger5 = animelemtime(8) = 16
trigger6 = animelemtime(8) = 20
trigger7 = animelemtime(8) = 24
trigger8 = animelemtime(8) = 28
value = 3560

[state 3503]
type = TargetBind
trigger1 = 1
time = 1
pos = 60, 0


[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3505
ctrl = 0

[Statedef 3505]
type = S
movetype = A
physics = S
anim = 1200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1


[state 25501]
type = ScreenBound
trigger1 = 1
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = 1
value = 0

[state 3505]
type = targetstate
trigger1 = animelemtime(7) = 0
value = 3560

[state 3505]
type = hitadd
trigger1 = animelemtime(8) = 0
value = 1


[State -3, 3];
type = targetlifeadd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 20
trigger3 = animelemtime(8) = 25
trigger4 = animelemtime(8) = 30
trigger5 = animelemtime(8) = 35
value = -5
kill = 0
absolute = 1

[State -3, 3];
type = targetlifeadd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(8) = 20
trigger3 = animelemtime(8) = 25
trigger4 = animelemtime(8) = 30
trigger5 = animelemtime(8) = 35
value = -10
kill = 0
absolute = 0

[State 1200, ヘルパー]
type = Helper
trigger1 = animelemtime(8) = 0
trigger1 = numhelper(3507) = 0
ID = 3507
name = "sissou"
sprpriority = 4
postype = p2
pos = 0,0
postype = back
stateno = 3507
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 2
x = 25

[State 1200, 速度]
type = veladd
trigger1 = time = [22,33]
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
x = 0

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1 

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1


[State Explod]
Type=Explod
trigger1 = animelem = 14
Anim=6011
PosType=P1
Pos=20,-48
Scale=0.5,0.65
BindTime=-1
Sprpriority=3
OwnPal=1 
Trans=Sub
RemoveTime=-2
RemoveOnGetHit=1
[State Explod]
Type=Explod
trigger1 = animelem = 14
Anim=6011
PosType=P1
Pos=20,-48
Scale=0.5,0.65
BindTime=-1
Sprpriority=4
OwnPal=1
ReMapPal=1,2
Trans=Add
RemoveTime=-2
RemoveOnGetHit=1


[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [15,50]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animelem = 22
value = 3506
ctrl = 0

[Statedef 3506]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3605
velset = 0,0

[state 25501]
type = ScreenBound
trigger1 = 1
value = 0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 3505]
type = targetstate
trigger1 = animelemtime(34) = 0
value = 3562

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = animtime = 0
scale = 0.94,0.94

[State 200, 1]
type = PlaySnd
trigger1 = time = 10
value = 5,0

[State 200, 1]
type = PlaySnd
triggerall = animelemtime(13) = 0
trigger1 = target(3500),name !="dante"
value = 181,2

[State 200, 1]
type = PlaySnd
triggerall = time = 16
trigger1 = target(3500),name = "dante"
value = 180,3

[State 200, 1]
type = PlaySnd
trigger1 = animelemtime(21) = 0
value = 190,2

[State 200, 1]
type = PlaySnd
trigger1 = animelemtime(34) = 0
value = 5,1

[State 3000, ステート変更]
type = ChangeState
trigger1 = animelemno(0) = 38
trigger1 = winko
value = 3509
ctrl = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1



 ;=========================================


;-----------------------------------------------------------
[statedef 3504]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
sprpriority = -2

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = time = 0
value = 412 + var(10)
elem = 4

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10412
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 412
elem = animelemno(0)

[State 412, セリフ]
type = null;PlaySnd
trigger1 = animelem = 8
value = 0, 5
channel = 0

[State 412, 効果音]
type = PlaySnd
trigger1 = animelem = 8
value = 5, 3

[State 412, 移動]
type = PosSet
trigger1 = time = 0
y = 0

[State 412, エフェクト]
type = Explod
trigger1 = animelemtime(2) = 2 
anim = 415
scale = 0.5,0.5
postype = p1
pos = -15,-5
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 412, エフェクト]
type = Explod
trigger1 = animelemtime(2) = 4
anim = 416
scale = 0.5,0.5
postype = p1
pos = 40,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1


[State 412, エフェクト]
type = Explod
trigger1 = animelemtime(2) = 8
anim = 417
scale = 0.5-(time*0.01),0.5-(time*0.01)
postype = p1
pos = 40,0
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 210, エフェクト]
type = Explod
trigger1 = animelem = 8
anim = 9300
scale = 1,1
postype = p2
pos = -10,-85
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 210, 効果音]
type = PlaySnd
trigger1 = animelemtime(8) = 0
value = 1, 12

[State 1224, ヒットカウント]
type = hitadd
trigger1 = animelemtime(8) = 0
value = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(8) = 0
value = -20
kill = 0
absolute = 1

[state 3500]
type = TargetLifeAdd
trigger1 = animelemtime(8) = 0
value = -10
kill = 0
absolute = 0



[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3510) = 1
triggerall = NumHelper(3511) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3511
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5


[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3512) = 1
triggerall = NumHelper(3513) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3513
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3514) = 1
triggerall = NumHelper(3515) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3515
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5

[State 3503, ヘルパー]
type = Helper
triggerall = NumHelper(3516) = 1
triggerall = NumHelper(3517) = 0
trigger1 = animelem = 8
helpertype = normal
name = "kyusyu"
ID = 3517
pos = 50,0
postype = p1
facing= 1
stateno = 3513
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.35
size.yscale = 0.5


[state 3505]
type = targetstate
trigger1 = animelem = 8
value = 3560

[state 3503]
type = TargetBind
trigger1 = 1
time = 1
pos = 60, 0

[state 3503]
type = changestate
trigger1 = animelem = 9
trigger1 = numhelper(3517) = 0
value = 3503


[state 3503]
type = changestate
trigger1 = animelem = 9
trigger1 = numhelper(3517) = 1
value = 3508


 

;===========================================

[Statedef 3506]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3605
velset = 0,0

[state 25501]
type = ScreenBound
trigger1 = 1
value = 0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3260]
type = NotHitBy
value = SCA,AA,AT,AP
trigger1 = 1

[state 3505]
type = targetstate
trigger1 = animelemtime(34) = 0
value = 3562

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = animtime = 0
scale = 0.94,0.94

[State 200, 1]
type = PlaySnd
trigger1 = time = 10
value = 5,0

[State 200, 1]
type = PlaySnd
triggerall = animelemtime(13) = 0
trigger1 = target(3500),name !="dante"
value = 181,2

[State 200, 1]
type = PlaySnd
triggerall = time = 16
trigger1 = target(3500),name = "dante"
value = 180,3

[State 200, 1]
type = PlaySnd
trigger1 = animelemtime(21) = 0
value = 190,2

[State 200, 1]
type = PlaySnd
trigger1 = animelemtime(34) = 0
value = 5,1

[State 3000, ステート変更]
type = ChangeState
trigger1 = animelemno(0) = 38
trigger1 = winko
value = 3509
ctrl = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------


;---------------------------------------------------------------------------
;疾走居合いヒット時ヘルパー

;----------------------------------------------
[Statedef 3509]
type    = S
movetype= I
physics = S
anim = 3609
ctrl = 1

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = animtime = 0
scale = 0.94,0.94

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AT,AP
time = 1

[State 3810,5]
type = Changestate
trigger1 = p2movetype = A
value = 0
ctrl = 1
;-------------------------------------------------
;---------------------------------------------------------------------------
;やられ
[Statedef 3560]
statetype = S
movetype = H
physics = S
ctrl = 0
anim = 5002
velset = 0,0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3560]
type = changeanim
trigger1 = animtime <= 1
trigger1 = animtime >= -2
trigger1 = anim = 5002
trigger1 = !selfanimexist(5007)
value = 5002
elem = animelemno(0)

[state 3560]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5002
trigger1 = selfanimexist(5007)
value = 5007

[state 3560]
type = changeanim
trigger1 = animtime <= 1
trigger1 = animtime >= -2
trigger1 = anim = 5007
value = 5007
elem = animelemno(0)


[state 3560]
type = posset
trigger1 = 1
y = 0

[state 3560]
type = velset
trigger1 = 1
x=0
y=0

[state 3560]
type = Hitoverride
trigger1 = 1
value = SCA,AA,AT,AP
stateno = 3560
time = 1

[state 3560]
type = notHitBy
trigger1 = 1
value = SCA,AA,AT,AP
time = 1

[State 1223, 自分のステートへ]
type = selfState
trigger1 = time = 300
value = 5050

;-----------------------------
;やられ
[Statedef 3561]
statetype = S
movetype = H
physics = S
ctrl = 0
anim = 5002
velset = 0,0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3561]
type = changeanim
trigger1 = time = 0
trigger1 = selfanimexist(5950)
value = 5950

[state 3560]
type = changeanim
trigger1 = animtime <= 1
trigger1 = animtime >= -2
trigger1 = anim = 5002
trigger1 = !selfanimexist(5007)
value = 5002
elem = animelemno(0)


[state 3560]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5002
trigger1 = selfanimexist(5007)
value = 5007

[state 3560]
type = changeanim
trigger1 = animtime <= 1
trigger1 = animtime >= -2
trigger1 = anim = 5007
value = 5007
elem = animelemno(0)

[state 3560]
type = posset
trigger1 = 1
y = 0

[state 3560]
type = velset
trigger1 = time = 0
x=0
y=0

[state 3560]
type = HitBy
trigger1 = 1
value = S,HA,HP
time = 1

[state 3560]
type = Hitoverride
trigger1 = 1
value = SCA,AA,AT,AP
stateno = 3561
time = 1


[State 1223, 自分のステートへ]
type = changeState
trigger1 = time >= 10
trigger1 = anim != 5950
trigger1 = anim != 5111
trigger1 = anim != 5110
trigger1 = animtime >= -1
trigger2 = time >= 20
value = 6080

[state 1223]
type = changeanim
triggerall = anim = 5950
triggerall = selfanimexist(5111)
trigger1 = AnimElemTime(AnimElemNo(0)+1) >= 0
value = 5111

[state 1223]
type = selfstate
triggerall = anim = 5950
triggerall = !selfanimexist(5111)
trigger1 = !alive
trigger1 = AnimElemTime(AnimElemNo(0)+1) >= 0
value = 5150

[state 1223]
type = changestate
triggerall = anim = 5950
triggerall = !selfanimexist(5111)
trigger1 = alive
trigger1 = AnimElemTime(AnimElemNo(0)+1) >= 0
value = 6110

[State 1223, 自分のステートへ]
type = selfState
triggerall = anim = 5111
trigger1 = !alive
value = 5150


[State 1223, 自分のステートへ]
type = changeState
triggerall = anim = 5111
trigger1 = alive
value = 6110

;----------------------------------------
[Statedef 3562]
statetype = S
movetype = H
physics = S
ctrl = 0
anim = 5002
velset = 0,0

[state 3503]
type = PlayerPush
trigger1 = 1
value = 0

[state 3560]
type = changeanim
trigger1 = animtime <= 1
trigger1 = animtime >= -2
trigger1 = anim = 5002
trigger1 = !selfanimexist(5007)
value = 5002
elem = animelemno(0)

[state 3560]
type = changeanim
trigger1 = animtime <= 1
trigger1 = animtime >= -1
trigger1 = anim = 5007
value = 5007
elem = animelemno(0)

[state 3560]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5002
trigger1 = selfanimexist(5007)
value = 5007


[state 3560]
type = posset
trigger1 = 1
y = 0

[state 3560]
type = velset
trigger1 = 1
x=0
y=0


[state 3560]
type = HitBy
trigger1 = 1
value = S,HP
time = 1

[State 1223, 自分のステートへ]
type = selfState
trigger1 = time = 300
value = 5050


;????????
;??????(?????1)
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, ???]
type = PlaySnd
trigger1 = Time = 3
value = 230, 0
channel = 0

[State 230,  ?????]
type = Explod
trigger1 = animelem = 4
anim = 233
scale = 0.5,0.5
postype = p1
pos = 35,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 200, ???]
type = PosAdd
trigger1 = animelem = 4
x = 20

[State 230, ?????]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 25
priority  = 4, Hit
hitflag = MA
guardflag = MA
pausetime = 6,6
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -4
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1

[State 230, ???]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, ??]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.02

[State 230, ??????]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;[State 201, ????]
;type = VarSet
;trigger1 = time = 0
;v = 7                   
;value = 0
;
;[State 201, ????]
;type = VarSet
;trigger1 = command = "a"
;trigger1 = time > 7
;v = 7                   
;value = 1
;
;[State 230, ??????]
;type = ChangeState
;triggerall = var(59) = 0
;trigger1 = var(7) >= 1
;trigger1 = Time > 15
;value = 231
;ctrl = 0
;
;[State 230, ??????]
;type = ChangeState
;triggerall = var(59)
;trigger1 = Time > 15
;value = 231
;ctrl = 0

;---------------------------------------------------------------------------
[Statedef 231]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 231
sprpriority = 2

[State 231, ???]
type = PlaySnd
trigger1 = Time = 2
value = 230, 1
channel = 0

[State 231, ?????]
type = Explod
trigger1 = animelem = 5
anim = 233
scale = 0.5,0.5
postype = p1
pos = 2,-5
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 231, ??]
type = PosAdd
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(4) = 1
x = 15

[State 231, ??]
type = PosAdd
trigger1 = animelem = 5
x = 15

[State 231, ?????]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 15
priority  = 4, Hit
hitflag = MA
guardflag = MA
pausetime = 8,8
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 28
guard.ctrltime = 20
ground.velocity = -4
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1

[State 231, ???]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(800*(1+-(var(14)*0.1)))

[State 410, ??]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.02

[State 201, ????]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, ????]
type = VarSet
trigger1 = command = "x"
trigger1 = movehit
v = 7                   
value = 1

[State 201, ??????]
type = ChangeState
triggerall = var(59) = 0
trigger1 = var(7) = 1
trigger1 = Time > 20
value = 200
ctrl = 0

[State 231, ??????]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;??????(?????3)
[Statedef 257]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 232
sprpriority = 2


[State 240, ???]
type = PlaySnd
trigger1 = Time = 7
value = 230, 2
channel = 0

[State 240, ????]
type = VarSet
trigger1 = 1
v = 13
value = AnimElemNo(0)

[State 240, ?????]
type = Explod
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
trigger2 = animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15 || animelem = 16
anim = 228+var(13)
scale = 0.5,0.5
postype = p1
pos = -15,25
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1


[State 240, ??]
type = velset
trigger1 = AnimElemTime(7) = 2
x = 8
y = -4

[State 240, ??]
type = StateTypeSet
trigger1 = animelemtime(7) = 2
physics = N

[State 240, ??]
type = veladd
trigger1 = time = [20,40]
y = 0.6

[State 240, ??]
type = velmul
trigger1 = time = [20,40]
x = 0.9

[State 240, ??]
type = StateTypeSet
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
physics = S

[State 240, ??]
type = velset
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
Y = 0

[State 240, ?????]
type = HitDef
trigger1 = animelem = 8 || animelem = 9
attr = S, NA
animtype  = hard
damage    = 28
priority  = 4, Hit
hitflag = MAF
guardflag = H
pausetime = 5,5
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,2
guardsound = S6,0
ground.type = high
ground.slidetime = 10
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -4
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0

[State 240, ?????]
type = HitDef
trigger1 = animelem = 13 || animelem = 14
attr = S, NA
animtype  = back
damage    = 55
priority  = 4, Hit
hitflag = MAF
guardflag = H
pausetime = 8,8
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,2
guardsound = S6,0
ground.type = high
ground.slidetime = 10
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5

[State 240, ???]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 8 || animelem = 9
persistent=0
v = 58
value = ceil(900*(1-(var(14)*0.1)))

[State 240, ???]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 13 || animelem = 14
persistent=0
v = 58
value = ceil(900*(1-(var(14)*0.1)))


[State 240, ??????]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[Statedef 637]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2



[State 200, Idle]
type= statetypeset
trigger1= animelemtime(7)>=0
movetype= I
;
;[state 50, 1];??????????????
;type = changeanim
;trigger1 = anim = 10630
;trigger1 = var(10) = 0
;trigger1 = NumHelper(1401) = 0
;value = 630
;elem = animelemno(0)

[State 630, ???]
type = AngleDraw
trigger1 = 1
scale = 0.94,0.94

[State 630, ???]
type = AngleDraw
trigger1 = animelem = 7
scale = 1.06,1.06

[State 630, ???]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random%2 = 1
value = 0, 2

[State 630, ???]
type = PlaySnd
trigger1 = Time = 1
value = 2, 2





[State 630, ?????]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 26,0
;guardflag = HA
;priority = 3
;pausetime = 8,8
sparkno = 1
guard.sparkno = S8000
sparkxy = -5,-35
hitsound   = 5,0
guardsound = S6,0
;ground.type = High
;ground.slidetime = 6
;ground.hittime  = 10
;ground.velocity = -4
;air.velocity = -2,-3
 animtype = Light  
air.animtype = up
fall.animtype = Back               
guardflag = HA                  
hitflag = MAF                 
priority = 4, Hit               
pausetime = 8, 10

ground.type = High               
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
ground.cornerpush.veloff = 0 
guard.velocity = -4
guard.cornerpush.veloff = 0  
air.type = Low      
air.hittime=12 
air.velocity = -.5,-8 
air.cornerpush.veloff = 0
airguard.ctrltime= 12
airguard.velocity = -4, -1.5   
airguard.cornerpush.veloff = 0          
yaccel=.5
fall.recover=0

;[State 410, ??]
;type = Varadd
;trigger1 = movehit
;persistent=0
;fv = 10
;value = 0.06

;---------------------------------------------------------------------------
;????????
[Statedef 642]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

;[state 50, 1];??????????????
;type = changeanim
;trigger1 = anim = 10640
;trigger1 = var(10) = 0
;trigger1 = NumHelper(1401) = 0
;value = 640
;elem = animelemno(0)

[State 640, ???]
type = PlaySnd
trigger1 = time = 4
value = 2, 3
channel = 1

[State 640, ???]
type = PlaySnd
trigger1 = Time = 2 && Random <= 500
value = 0, 1
channel = 0

[State 640, ?????]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
;damage    = 70
;guardflag = HA
;priority = 4
;pausetime = 12,12
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-40
hitsound   = S1,13
guardsound = S6,0
;animtype = Med
;ground.type = High
;ground.slidetime = 15
;ground.hittime  = 15
;ground.velocity = -5
;air.velocity = -3,-4
;attr = A, NA                     
damage = 38,0
animtype = Medium
air.animtype = up
fall.animtype = Back                 
guardflag = HA                  
hitflag = MAF                  
priority = 4, Hit               
pausetime = 8, 10

ground.type = High               
ground.slidetime = 15
ground.hittime  = 15
ground.velocity =  -5 
ground.cornerpush.veloff = 0
guard.velocity= -5
guard.cornerpush.veloff = 0     
air.type = Low   
air.hittime=15  
air.velocity =  -1,ifelse(p2bodydist y <=-40,.5,-5.5)
air.cornerpush.veloff = 0 
airguard.ctrltime= 15
airguard.velocity = -4,-1.5     
airguard.cornerpush.veloff = 0
yaccel=.5
fall.recover=0 



[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I
 


[Statedef 7501]
physics=N
velset=0,0
anim=9741
sprpriority=5

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=40
invertall=1
add=100,100,100
sinadd=-710,-710,-450,160

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=40
trigger1= root,stateno != 3200
trigger2= time=20
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=48
invertall=1
add=100,100,100
sinadd=-710,-710,-450,192

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=48
trigger1= root,stateno != 3200
trigger2= time=28
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=55
invertall=1
add=100,100,100
sinadd=-710,-710,-450,220

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=55
trigger1= root,stateno != 3200
trigger2= time=35
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, portrait]
type=helper
trigger1= !time
trigger1= root,stateno != 3200
helpertype=normal
stateno=7520
ID=7520
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1

[State 7500, portrait]
type=helper
trigger1= !time
trigger1= root,stateno = 3200
helpertype=normal
stateno=7521
ID=7521
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1


[State 7500, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7500, end]
type=destroyself
trigger1= time>=46
trigger1= root,stateno != 3200
trigger2= time>=26
trigger2= root,stateno = 3200


[Statedef 7520]
physics=N
anim=9741
sprpriority=5

[State 7510, assert]
type=assertspecial
trigger1= 1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7510, portrait]
type=explod
trigger1= !time
anim=7520
ID=7520
postype=back
pos=160,120
under=1
bindtime=-1
removetime=60
pausemovetime=300
supermovetime=300

[State 7510, shrink]
type=modifyexplod
trigger1= time<45
ID=7520
scale=.5,.5

[State 7510, shrink]
type=modifyexplod
trigger1= time>=45
ID=7520
scale=.5225+(.13*(time-45)),.5225+(.13*(time-45))

[State 7510, fade]
type=palfx
trigger1= time=45
time=15
sinadd=-255,-255,-255,60

[State 7510, safety]
type=removeexplod
trigger1= time>=61

[State 7510, end]
type=destroyself
trigger1= time>=61


[Statedef 3232]
type = S
movetype = A
physics = S
anim = 3200
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[State 1000, ?????]
type = PowerAdd
trigger1 = time = 0
value = -1000

[State 1200, ????]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 3300, ??]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 34

[State 3300, ????]
type = SuperPause
trigger1 = Time = 3
time = 24
movetime = 24
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3300, ??]
type = AfterImage
triggerall = prevstateno != [3000,3999]
trigger1 = Time = 3
time = 60
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3300, ????????]
type=helper
trigger1= animelemtime(3)=3
helpertype=normal
stateno=7501
ID=7501
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 3300, ?????]
type = Explod
trigger1 = time = 3
anim = 3510
ID = 3510
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 3300, ?????]
type = ModifyExplod
trigger1 = time >= 3
ID = 3510
scale = 0.5+(0.01*(time-3)), 0.5+(0.01*(time-3))

[State 3300, ?????]
type = ModifyExplod
trigger1 = time >= 7
ID = 3510
scale = 0.5+(0.05*(time-7)), 0.5+(0.05*(time-7))

[State 3300, ?????]
type = ModifyExplod
trigger1 = time >= 13
ID = 3510
scale = 0.5+(0.01*(time-13)), 0.5+(0.01*(time-13))

[State 3300, ?????]
type = ModifyExplod
trigger1 = time >= 17
ID = 3510
scale = 0.5+0.05*(time-17), 0.5+0.05*(time-17)
pos = 0, time*2
postype = p1

[State 3300, ?????]
type = ModifyExplod
trigger1 = time >= 22
ID = 3510
scale = 0.5+0.1*(time-22), 0.5+0.1*(time-22)
pos = 0, time*2
postype = p1

[State 3300, ???]
type = PlaySnd
trigger1 = time = 3
trigger1 = anim = 3200
value = 3000,0


[State 1200, ???]
type = PlaySnd
trigger1 = AnimElem = 8
channel = 0
value = 1200,var(13)

[State 1200, ???]
type = PlaySnd
trigger1 = AnimElem = 8
channel = 1
value = 3200,var(13)

[State 1200, ???]
type = PlaySnd
trigger1 = AnimElem = 9
value = 190,2

[State 1200, ?]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ????]
type = PlayerPush
trigger1 = animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ?????]
type = HitDef
trigger1 = 1
trigger1 = movecontact = 0
attr = S, HA
animtype  = hard
priority = 6, miss
damage    = 1,1
hitflag = MAF
guardflag = M
guard.sparkno = 6
pausetime = 0,0
guard.pausetime = 0,34
getpower = 40,40
sparkno = S904
sparkxy = -10,-70
hitsound   = -1;S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
p2stateno = 3222
p2facing = 1
kill = 0
ID = 3232



[State 1200, ?????]
type = Hitdef
trigger1 = animelem = 12 || animelem = 13
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = back
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 40
pausetime = 3,5
hitsound = S1, 11
guardsound = 1, 0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10,-2
guard.velocity = -8.5
air.velocity = -8, -3
airguard.velocity = -6.67,-1
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 10
givepower = 35, 35               
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5

[State 1200, ???]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 12 || animelem = 13
persistent=0
v = 58
value = ceil(1500*(1-(var(14)*0.1)))



[State 1200, ????]
type = Helper
trigger1 = movehit = 1
trigger1 = p2stateno = 3222
trigger1 = numhelper(1020) = 0
ID = 3222
name = "sissou"
sprpriority = 4
pos = 0,0
postype = back
stateno = 3224
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1200, ??]
type = velset
trigger1 = animelemTime(8) = 0
x = 33


[State 1200, ??]
type = velset
trigger1 = animelem = 11
x = 0

[State 1200, ??????]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, ?????]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1


[State 1200, ??????]
type = Changestate
trigger1 = Animtime = 0
trigger1 = movehit = 0
value = 3201
ctrl = 0

[State 1200, ??????]
type = ChangeState
trigger1 = Animtime = 0
trigger1 = movehit
value = 3234
ctrl = 0

;--------------------------------------
;DT???????
[Statedef 3201]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 1
anim = 3201


[State 1200, ?????]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = AnimElemTime(1) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(2) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(3) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(2) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(3) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, ?????]
type = Explod
trigger1 = animelem = 2
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = animelem = 10
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, ?????]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, ?????]
type = ModifyExplod
trigger1 = time >= 15
ID = 3520
scale = 2-(0.1*(time-15)), 2-(0.1*(time-15))

[State 1200, ?????]
type = Explod
trigger1 = animelem = 7
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 15
value = 3500,5

[State 1200, ??????]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------
;DT???????????2
[Statedef 3234]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 1
anim = 3202


[State 1200, ?????]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = Explod
trigger1 = AnimElemTime(1) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 4
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 7
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 6
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, ?????]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 9
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, ?????]
type = Explod
trigger1 = AnimElemTime(1) = 4
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, ?????]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, ?????]
type = ModifyExplod
trigger1 = time >= 35
ID = 3520
scale = 2-(0.1*(time-35)), 2-(0.1*(time-35))

[State 1200, ?????]
type = Explod
trigger1 = animelem = 7
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 35
value = 3500,5

[State 1200, ??????]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

[Statedef 3224]
type = S
physics = N
anim = 1223
ctrl = 0
velset = 0,0

[State 1224, ???]
type = poweradd
trigger1 = time = 1
trigger2 = time = 9
trigger3 = time = 17
trigger4 = time = 25
trigger5 = time = 33
value = 32

[State 1224, ???????]
type = hitadd
triggerall = p2stateno = 3222
trigger1 = time = 12
trigger2 = time = 25
value = 1

[State 1224, ???]
type = playsnd
triggerall = p2stateno = 3222
trigger1 = time = 12
trigger2 = time = 25
value = S1,11

[State 1224, ???]
type = playsnd
triggerall = p2stateno = 3223
trigger1 = time = 48
value = S1,12

[State 1224, ????????]
type = Explod
trigger1 = time = 16
trigger2 = time = 32
trigger3 = time = 48
anim = F11
scale = 1,1
postype = p2
pos = 0,-80
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1224, ??]
type = destroyself
trigger1 = Time = 50
value = 0


[Statedef 3222]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 1222, ????]
type = turn
trigger1 = p2dist X < 0

[State 1222, ?????]
type = Changeanim2
trigger1 = Time = 0
value = 1222

[State 1222, ????]
type = lifeadd;null
trigger1 = time = 16
value = -78

[State 1222, ??????]
type = ChangeState
trigger1 = AnimTime = -5
value = 3223

;--------------------------------------
;??????????2
[Statedef 3223]
type = A
physics = N
movetype = H
ctrl = 0

[State 1223, ?????]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052) 
value = 5050

[State 1223, ?????]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) 
value = 5052

[State 1223, ????]
type = lifeadd;null;lifeadd
trigger1 = time = 2
value = -78

[State 1223, ??]
type = velset
trigger1 = time = 0
trigger1 = p2dist x <= 0
x = 13
y = -4

[State 1223, ??]
type = velset
trigger1 = time = 0
trigger1 = p2dist x > 0
x = -13
y = -4

[State 1223, ??]
type = VelAdd
trigger1 = Time > 4
y = 1.2

[State 1223, ????????]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;?????????????
[Statedef 3224]
type = S
physics = N
anim = 1223
ctrl = 0
velset = 0,0

[State 1224, ???]
type = poweradd
trigger1 = time = 1
trigger2 = time = 9
trigger3 = time = 17
trigger4 = time = 25
trigger5 = time = 33
value = 32

[State 1224, ???????]
type = hitadd
triggerall = p2stateno = 3222
trigger1 = time = 12
trigger2 = time = 25
value = 1

[State 1224, ???]
type = playsnd
triggerall = p2stateno = 3222
trigger1 = time = 12
trigger2 = time = 25
value = S1,11

[State 1224, ???]
type = playsnd
triggerall = p2stateno = 3223
trigger1 = time = 48
value = S1,12

[State 1224, ????????]
type = Explod
trigger1 = time = 16
trigger2 = time = 32
trigger3 = time = 48
anim = F11
scale = 1,1
postype = p2
pos = 0,-80
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1224, ??]
type = destroyself
trigger1 = Time = 50
value = 0
;--------

 

[Statedef 990]
type = s
movetype = I
physics = s
velset = 0,0
anim = 990
ctrl = 0
sprpriority = 1

[State 990, PowerAdd]
type = PowerAdd
triggerall = anim = 990 && power < powermax
trigger1 = command = "holdb" && command = "holdy"
;trigger2= AIlevel
value = 2 + ifelse(time < 60, 0, (time -60) / 10)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,1
volumescale = 255
channel = 1


[State 0, EnvShake]
type = EnvShake
trigger1 =timemod=4,0
time = 3
ampl = Ifelse(var(1),5,3)
ignorehitpause =1

[State 990, flash]
type = palfx
trigger1 = 1
time = 1
add =70+ceil(sin(time/8.0*pi)*70),20+ceil(sin(time/8.0*pi)*20),0

[State 990]
type=helper
trigger1= !numhelper(500)
helpertype=normal
stateno=999
ID=500
name="Charging Scale"
postype=p1
pausemovetime=9000
supermovetime=9000
ownpal=1
persistent = 0

[State 740, Anim]
type = changeanim
triggerall = anim != 991
trigger1 = (command != "holdb" || command != "holdy")
trigger2 = power >= const(data.power) || power >= powermax || roundstate != 2
;trigger3 = (inguarddist || p2movetype = A || p2dist x < 160)
value = 991
[State 740, End]
type = changestate
trigger1 = anim = 991 && !animtime
value = 0
ctrl = 1

[Statedef 991]
type = s
movetype = I
physics = s
velset = 0,0
anim = 991
ctrl =0
sprpriority = 5

[State 991, StopSnd]
type = StopSnd
trigger1 = animelem = 1
channel = 2

[State 991, ChangeState]
type = ChangeState
trigger1 = !animtime
value =0
ctrl = 1

[Statedef 999]
type = S
anim = 12345
velset = 0,0
ctrl = 0

[State 999]
type = bindtoroot
trigger1 = (root,stateno=990)
pos = 0,5

[State 999, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3000,3000
volume = 150
channel = 6

[State 990, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1050,0
volume = 250
channel = 7

[State 999, StopSnd]
type = StopSnd
trigger1 = root,stateno!=990
channel = 6

[State 999, StopSnd]
type = StopSnd
trigger1 = root,stateno!=990
channel = 7

[State 999]
type = explod
trigger1 = !numexplod(992)
ID = 992
anim = 992
sprpriority = 4
postype = p1
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1
pos = 7,7.5
scale = .7,.7
ownpal = 1

[State 999, Dust]
type = explod
trigger1 = !(time%6)
anim = 993
sprpriority = -3
postype = p1
pos = 0,-floor(pos y)
scale =.7,.7
pos = 7,0
pausemovetime = -1
supermovetime = -1
ownpal = 1


[State 999]
type=modifyexplod
trigger1= numexplod(992) && (root,power<3000)
ID=992
scale=.6,.6*(root,power/3000.0)


[State 999, fx]
type=modifyexplod
trigger1= numexplod(992) && (root,power>=3000)
ID=992
scale=.5,.5

[State 999]
type = assertspecial
trigger1 = 1
flag = noshadow


[State 999, end]
type=removeexplod
trigger1 = (root,stateno!=990) || (root,movetype=H)


[State 999, end]
type=destroyself
trigger1 = (root,stateno!=990) || (root,movetype=H)


[Statedef 3050]
type    = A
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1500
ctrl = 0
sprpriority = 2



[State 1000, 8]
type = varset
trigger1 = time = 0
v = 13
value = 1

[State 1000, ゲージ消費]
type = PowerAdd
trigger1 = time = 0
value = -1000


[State 3050, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(16) < 0
value = 5,0

[State 3000, superchargehelper]
type=helper
trigger1= time = 5
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 4100, superchargepause]
type=superpause
trigger1= time = 5
time=30
movetime = 5
anim=-1
sound=s3000,0
p2defmul=1
darken = 0


[State 3050, 残像]
type = AfterImage
trigger1 = time = 1
time = 999
length = 10
palbright = 1,1,30
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = 1,1,1
timegap = 2
framegap = 4
trans = add1

[State 3050, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 6

[State 1000, 8]
type = PlaySnd
trigger1 = time = 16
value = 1500,0


[State 1000, 8]
type = velset
trigger1 = time = 19
x = 18
Y = 18

[State 3001, Explod]
type = Explod
trigger1 = time = 18
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
damage = 40
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = -0, -3
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1
p1stateno = 3051

[State 3000, ChangeState]
type = ChangeState
triggerall = NumPartner
triggerall = RoundState = 2
triggerall = Partner, life > 0
triggerall = power >= 1000
triggerall=  power < 3000
triggerall = Partner, StateNo = [1251112,1251114]
triggerall = Partner, Time > 2 && Time > 45
triggerall = prevstateno!= 1251125
trigger1 = command = "sheoun"
value = 1251127

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1510



[Statedef 3051]
type = A
movetype = A
physics = N
anim = 1501
ctrl = 0
velset = 0,0
juggle = 8



[State 1000, 8]
type = varadd
trigger1 = time = 1
v = 13
value = 1

[State 1000, 8]
type = velset
trigger1 = time = 0
x = -10
Y = -18

[State 1000, 8]
type = velset
trigger1 = time = 2
trigger2 = P2BodyDist y >= 125
x = 0
Y = 0

[State 1000, 8]
type = PlaySnd
trigger1 = time = 10
value = 1500,1

[State 1000, 8]
type = velset
trigger1 = time = 14
trigger1 = P2BodyDist y > 125
x = 22
Y = 27

[State 1000, 8]
type = velset
trigger1 = time = 14
trigger1 = P2BodyDist y = [60,125]
x = 25
Y = 22

[State 1000, 8]
type = velset
trigger1 = time = 14
trigger1 = P2BodyDist y < 60
x = 25
Y = 15

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = var(13) < 6
attr = A, SA
damage = 20
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = 0, -4.3
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1
p1stateno = 3051



[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = var(13) >= 6
attr = A, SA
damage = 30
animtype = diagup
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 12,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8, -5.5
guard.velocity = -8
air.velocity = -8, -2
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 0, スタポ]
type = Varadd
trigger1 = time = 0
trigger1 = var(13) = [1,5]
v = 58
value = ceil(600*(1-(var(14)*0.1)))

[State 3001, Explod]
type = Explod
trigger1 = time = 13
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 3000, ChangeState]
type = ChangeState
triggerall = NumPartner
triggerall = RoundState = 2
triggerall = Partner, life > 0
triggerall = power >= 1000
triggerall=  power < 3000
triggerall = Partner, StateNo = [1251112,1251114]
triggerall = Partner, Time > 2 && Time > 45
triggerall = prevstateno!= 1251125
trigger1 = command = "sheoun"
value = 1251127

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1510


[Statedef 7500]
physics=N
velset=0,0
anim=9741
sprpriority=5

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=40
invertall=1
add=100,100,100
sinadd=-710,-710,-450,160

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=40
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=48
invertall=1
add=100,100,100
sinadd=-710,-710,-450,192

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=48
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=55
invertall=1
add=100,100,100
sinadd=-710,-710,-450,220

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=55
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, portrait]
type=helper
trigger1= !time
helpertype=normal
stateno=7510
ID=7510
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1


[State 7500, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7500, end]
type=destroyself
trigger1= time>=46

[Statedef 7501]
physics=N
velset=0,0
anim=9741
sprpriority=5

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=40
invertall=1
add=100,100,100
sinadd=-710,-710,-450,160

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=40
trigger1= root,stateno != 3200
trigger2= time=20
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=48
invertall=1
add=100,100,100
sinadd=-710,-710,-450,192

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=48
trigger1= root,stateno != 3200
trigger2= time=28
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=55
invertall=1
add=100,100,100
sinadd=-710,-710,-450,220

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=55
trigger1= root,stateno != 3200
trigger2= time=35
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, portrait]
type=helper
trigger1= !time
trigger1= root,stateno != 3200
helpertype=normal
stateno=7520
ID=7520
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1

[State 7500, portrait]
type=helper
trigger1= !time
trigger1= root,stateno = 3200
helpertype=normal
stateno=7521
ID=7521
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1


[State 7500, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7500, end]
type=destroyself
trigger1= time>=46
trigger1= root,stateno != 3200
trigger2= time>=26
trigger2= root,stateno = 3200


[Statedef 1510]
type    = S
physics = S
ctrl = 0
anim = 1510
velset = 0,0

[State 1510, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1510, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1503
ID = 1503
pos = 20, -30
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = animtime = 0
time = 0

[State 1510, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;ST9

; ----- Uno Tag System ver. 3.2.1 by UnoShe -----
;                    " Uno Tag type-R "
;
; - PLEASE GIVE CREDIT IF MODIFYING THIS..

; - Entering the screen
[Statedef 1251101]
type = A
movetype = I
physics = N
SprPriority = 5
anim = ifelse(SelfAnimExist(45),45,42)
ctrl = 0

[State 1251101, Turn]
type = Turn
trigger1 = (IsHelper(1251101) || IsHelper(1251102))
trigger1 = Time = [0,1]
trigger1 = facing != Root, facing

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251112, pos]
type = PosSet
triggerall = Time = 0
triggerall = !(IsHelper(1251101) || IsHelper(1251102))
trigger1 = (Partner, StateNo = 1251125)
trigger2 = (Partner, prevStateNo = 1251110)
trigger3 = (Partner, StateNo = 1251128)
x = (55 + (GameWidth/2))*(-1*Facing)
y = ((Partner, BackEdgeBodyDist+45)*-1)/2

[State 1251101, Helper_pos]
type = PosSet
trigger1 = (IsHelper(1251101) || IsHelper(1251102))
trigger1 = Time = [0,1]
x = (55 + (GameWidth/2))*(-1*Facing)
y = ((abs(Root, pos y) + Root, BackEdgeBodyDist+20)*-1)/2

[State 1251101, VelSet]
type = VelSet
trigger1 = Partner, sysvar(4) = 1 || Partner, sysvar(4) = 15 || (Partner, sysvar(4) = 2 && Partner, StateNo = 1251125) || Partner, StateNo = 1251109
trigger2 = (IsHelper(1251101) || IsHelper(1251102))
x = ifelse((IsHelper(1251101) || IsHelper(1251102)),((abs(BackEdgeDist)+abs(pos y * 2))/11),(abs(pos x-partner,pos x)*0.1*const(movement.yaccel)*(roundstate=2)*1.4))
y = ifelse((IsHelper(1251101) || IsHelper(1251102)),(abs(Root, BackEdgeBodyDist)/25),(abs(pos y)*0.1*const(movement.yaccel)*1.4))
persistent = 0

[State 1251101, VelSet]
type = VelMul
trigger1 = Partner, StateNo = 1251109
x = ifelse(BackEdgeDist < 0,1.45,1.25)

[State 1251101, invi]
type = NotHitBy
trigger1 = BackEdgeBodyDist <= 0 || (IsHelper(1251101) || IsHelper(1251102))
value = SCA
Time = 2 + ((IsHelper(1251101) || IsHelper(1251102))*99999)

[State 1251101, offME]
type = NotHitBy
trigger1 = Partner, sysvar(4) = 6
trigger2 = Partner, StateNo = 1251128 || Partner, prevStateNo = 1251128
value = SCA
Time = 15

[State 1251101, invi]
type = NotHitBy
trigger1 = Partner, Life <= 0
value = SCA
Time = 6

[State 1251101, sb] 
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1251101, invi]
type = AssertSpecial
trigger1 = !(IsHelper(1251101) || IsHelper(1251102))
trigger1 = Partner, StateNo = 1251110
flag = invisible

[State 1251101, 9]
type = VelSet
trigger1 = Vel Y >= 0
trigger1 = Pos Y > 0
x = 0
y = 0

[State 1251101, 9]
type = VelAdd
trigger1 = Partner, NumHelper(1251114)
x = 0.8
y = 0.2

[State 1251101, typeS]
type = VelMul
trigger1 = Partner, StateNo = 1251109
trigger2 = Partner, StateNo = 1251114
x = 0.75

[State 1251101, Gone]
type = DestroySelf
triggerall = (IsHelper(1251101) || IsHelper(1251102))
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
trigger2 = Root, Facing = 1 && Pos x >= Root, pos x - 10
trigger3 = Root, Facing = -1 && Pos x <= Root, pos x + 10
trigger4 = !Root, Life

[State 1251101, 10]
type = ChangeState
triggerall = !(IsHelper(1251101) || IsHelper(1251102))
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 1251121


; - Tag Aerial Attack(CA)
[Statedef 1251102]
type = A
movetype = A 
physics = N
SprPriority = 2
anim = ifelse(SelfAnimExist(45),45,42)
ctrl = 0

[state 0]
type = PlaySnd
trigger1 = time = 0
value = 3000,3001

; Define this if necessary...
[State 1251102, Aerial Attack Anim]
type = ChangeAnim
trigger1 = Time > 1
trigger1 = p2bodydist x = [0,140]
value = 640
persistent = 0

[State -2, def]
type = VarSet
trigger1 = 1
sysvar(4) = 15

[State 1251102, pos2]
type = PosSet
trigger1 = Time = [0,1]
x = (50 + (GameWidth/2))*(-1*Facing)
y = ((abs(ifelse((EnemyNear, facing = facing),(EnemyNear, BackEdgeDist),(EnemyNear, FrontEdgeDist)) + 15)/2.5) + Cond((EnemyNear, statetype = A),abs(EnemyNear, pos y * 1.6),abs(EnemyNear, pos y * 1.2)))*-1

[State 1251102, pos2]
type = PosSet
trigger1 = Time > 1 && NumEnemy && p2bodydist x > 30 && EnemyNear, StateType = A && EnemyNear, Pos Y < -50
trigger1 =!numTarget
y = (EnemyNear, Pos Y-15)

[State 1251102, vel]
type = VelSet
trigger1 = FrontEdgeDist >= 0
x = (19 + abs(BackEdgeBodyDist) + abs(pos y *2.25))/ifelse((Enemynear, Pos Y < -10),29,16.2)
y = (abs(pos y + 5)/20)
persistent = 0

[State 1251102, inv]
type = NotHitBy
trigger1 = BackEdgeBodyDist <= 0
value = SCA
Time = 2

[State 1251102, inv]
type = NotHitBy
trigger1 = Partner, Life <= 0
value = SCA
Time = 6

[State 1251102, sb] 
type = ScreenBound
trigger1 = 1
value = ifelse(BackEdgeBodyDist > 0,1,0)

[State 1251102, hit]
type 					= HitDef
trigger1 				= !MoveContact && !(NumTarget)
attr                    = A, SA
damage                  = 5, 1
animtype                = heavy
air.animtype 			= back
fall.animtype			= diagup
guardflag               = HA
hitflag                 = MAFD
priority                = 5, Hit
pauseTime               = 8, ifelse((EnemyNear, statetype = A),2,12)
sparkxy                 = -10, -80
hitsound                = 5,2
guardsound              = 6,0
ground.type             = High
ground.slideTime        = 3
ground.hitTime          = 34
guard.hitTime 			= 19
ground.velocity         = -0.25, 0
airguard.velocity       = -3, -2
air.type                = high
air.velocity            = -1.2, ifelse(Pos Y >= -50,-7.5,-6)
air.hitTime             = 8
getpower                = 0
givepower      			= 50
fall                    = 0
fall.recover            = 0
air.fall                = 1
air.recover             = 0
down.bounce 			= 0
down.velocity			= -1.1,-6.2
guard.kill = 0

[State 1251102, Anim2]
type = ChangeAnim
triggerall = (Anim != [42,45]) && AnimTime = 0
trigger1 = NumTarget = 0
trigger1 = FrontEdgeBodyDist <= 35
trigger2 = MoveContact
value = ifelse(SelfAnimExist(45),45,44)
persistent = 0

[State 1251102, pause]
type = Superpause
trigger1 = MoveContact
anim = -1
Time = ifelse(MoveHit, 4, 6)
moveTime = 0
p2defmul = 1
darken = 0
persistent = 0
ignorehitpause = 1

[State 0, Shake]
type = EnvShake
trigger1 = MoveHit
Time = ifelse((Numtarget && Target, Statetype = A), 10, 6)
persistent = 0
ignorehitpause = 1

[State 1251102, NoJC]     
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck
ignorehitpause = 1

[State -1, follow]
type = ChangeState
triggerall = StateNo = 1251102
triggerall = NumTarget && MoveContact && Target, Time = [1,2]
triggerall = Target, Statetype = A
trigger1 = command = "holdup"
value = 1251123
ignorehitpause = 1

[State 1251102, Ctrl]
type = CtrlSet
triggerall = BackEdgeBodyDist >=0
trigger1 = NumTarget
trigger1 = MoveContact
trigger1 = Target, Time > 2
value = 1
ignorehitpause = 1

[State 1251102, VelMul]
type = VelMul
triggerall = BackEdgeBodyDist > 0
trigger1 = MoveContact
trigger1 = p2bodydist x <= 45
trigger2 = FrontEdgeBodyDist <= 35
trigger3 = p2bodydist x = [0,20]
x = ifelse(FrontEdgeBodyDist <= 35,0.4,ifelse((NumTarget && Target, statetype=A),0.73,0.85))
y = 0.89

[State 1251102, VelMul]
type = VelMul
trigger1 = EnemyNear, Pos Y < 0
x = 1.15
persistent = 0

[State 1251102, Bigat]
type = Gravity
trigger1 = NumTarget
trigger1 = Target, Statetype = A
trigger2 = !NumTarget || !MoveContact
trigger2 = FrontEdgeBodyDist <= 30
trigger3 = !MoveContact
trigger3 = p2BodyDist x = [-20,20]

[State 1251102, VelAdd]
type = PlayerPush
trigger1 = Movetype = A
trigger1 = MoveContact
value = 1

[State 1251102, 8]
type = StateTypeSet
trigger1 = MoveContact
type = A
physics = A
persistent = 0

[State 1251102, 9]
type = VelSet
trigger1 = Vel Y >= 0
trigger1 = AnimElem = 2, >= 0
trigger1 = Pos Y >= 0
x = 0
y = 0

[State 1251102, 10]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = AnimElem = 2, >= 0
trigger1 = Pos Y >= 0
value = 1251121


; Standby Position (Helper)
[Statedef 1251103]
type = S
movetype = I
physics = N
anim = 1251199
velset = 0,0
ctrl = 0

[State 1251103, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251103, inv]
type = PlayerPush
trigger1 = 1
value = 0

[State 1251103, pos]
type = PosSet
trigger1 = Time = 0
trigger2 = Root, StateNo = 1251131
x = Root, pos x
y = ifelse((Root, StateNo = 1251131),(Root, pos y),0)

[State 1251103, pos]
type = PosSet
trigger1 = Root, StateNo = 1251120 && Root, BackEdgeBodyDist > 70
x = Root, pos x
y = 0

[State 1251103, pos]
type = PosFreeze
trigger1 = Root, StateNo != 1251120

[State 1251103, inv]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

[state 1251103, Hide]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
time = 10
ignorehitpause = 1

[State 1251103, end]
type = DestroySelf
triggerall = IsHelper(1251103)
triggerall = !(Root, Movetype = A && Root, Time < 3)
triggerall = Root, StateTime > 8
trigger1 = Root, MoveType = H
trigger2 = Root, prevStateNo = 1251121
trigger3 = Root, StateNo != [1251101,1251135]
trigger4 = Root, StateNo = 1251112 || Root, StateNo = 1251114
trigger4 = Root, Time > 16

[State 1251103, end]
type = DestroySelf
triggerall = IsHelper(1251125)
trigger1 = Root, StateNo = [1251101,1251135]

[State 1251103, end]
type = DestroySelf
trigger1 = !Root, Life


; Partner Assist (Pasok)
[Statedef 1251104]
type = A
movetype = I
physics = N
anim = ifelse(SelfAnimExist(45),45,42)
SprPriority = 5
ctrl = 0

[State -2, def]
type = VarSet
trigger1 = 1
sysvar(4) = 8

[State 1251104, Turn]
type = Turn
triggerall = Time = [0,1]
triggerall = NumPartner && NumEnemy && EnemyNear, StateNo != [1251112,1251114]
trigger1 = Facing = -1 && ((EnemyNear, Pos X -95) >= Partner, Pos X)
trigger2 = Facing = 1 && ((EnemyNear, Pos X +95) <= Partner, Pos X)
trigger3 = Facing != Partner, Facing

[State 1251104, InitPos]  ;error
type = NULL ;PosSet
trigger1 = Time = [0,1]
x = (partner,pos x)+(partner,backedgebodydist+90)*(-facing)
y = -(partner,screenpos y)-10 ;;(-180)

[State 1251104, Vel]	;error
type = NULL ;VelSet
trigger1 = Partner, sysvar(4) = 1 || Partner, sysvar(4) = 15
trigger2 = Time = [1,2]
x = abs(pos x-partner,pos x)*0.1*const(movement.yaccel)*(roundstate=2)*1.4
y = abs(pos y)*0.1*const(movement.yaccel)*1.4
persistent = 0

[State 1251104, InitPos]
type = PosSet
trigger1 = Time = [0,1]
x = (50 + (GameWidth/2))*(-1*Facing)
y = (ifelse((Facing = Partner, Facing),(Partner, BackEdgeBodyDist+20),(Partner, FrontEdgeBodyDist+20))*-1)/2

[State 1251104, Vel]
type = VelSet
trigger1 = Partner, sysvar(4)  = 1 || Partner, sysvar(4)  = 15
trigger2 = Time = [1,2]
x = (abs(BackEdgeDist)+abs(pos y * 2))/13
y = (abs(pos y )/12)
persistent = 0

[State 1251104, VelAdd]
type = VelAdd
trigger1 = vel y < 1
y = 0.5

[State 1251104, inv]
type = NotHitBy
trigger1 = 1
value = SCA
Time = 2

[State 1251104, sb] 
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1251104, 9]
type = VelSet
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
x = 0
y = 0

[State 1251104, End]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 1251121


; --- "UNO MODE" ACTIVATE ---
[Statedef 1251106]
type = S
movetype = I
physics = S
anim = 195
SprPriority = 5
velset = 0,0
ctrl = 0

[State 1251106, voice]	; <---| Define taunt voice here
type = PlaySnd
trigger1 = NumPartner
trigger1 = Partner, StateNo = [5131,5150]
value = 195,0
channel = 0
pan = (Time*0.5)
persistent = 0

[State 1251106, ctrl]
type = CtrlSet
trigger1 = 1
value = 0

[State 1251106, pos]
type = PosSet
trigger1 = 1
x = Partner, Pos x
y = 0

[State 1251106, invi]
type = AssertSpecial
trigger1 = NumPartner && Partner, StateNo != [5131,5150]
flag = invisible
flag2 = noshadow
ignorehitpause = 1

[State 1251106, noai]
type = AfterImageTime
trigger1 = NumPartner && Partner, StateNo != [5131,5150]
Time = 0

[State 1251106, fr]
type = PosFreeze
trigger1 = Time > 1
value = 1

[State 1251107, draw]
type = AngleDraw
trigger1 = Time = [0,45]
scale = ifelse(Time <= 40,1.95 - (Time*0.023),1.03), ifelse(Time <= 40,1.95 - (Time*0.023),1.03)

[State 1251106, prior]
type = SprPriority
trigger1 = Time > 35
value = -1

[State 1251106, Helper]
type = Helper
trigger1 = Time = [0,2]
Helpertype = Normal
ID = 1251107
StateNo = 1251107
name = "Sabog"
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State 1251106, stopTime]
type = AssertSpecial
trigger1 = NumHelper(1251107)
flag = Timerfreeze

[State 1251106, PartnerPause]
type = Superpause
trigger1 =NumPartner && !Partner, Life
Time = 10
anim = -1
sound = -1
moveTime = 10
darken = 1
p2defmul = 0.5
unhittable = 1
pausebg = 1

[State -2, def]
type = VarSet
trigger1 = NumHelper(1251107)
trigger1 = NumPartner && Partner, StateNo = [5131,5150]
sysvar(4) = 7

[state 1251106, LIFE]
type = LifeAdd
trigger1 = Time = [0,1]
value = LifeMax

[State 1251106, Labo]
type=Trans
trigger1= 1
Trans=add
alpha = 8*(gameTime%32), 256 - 8*(gameTime%32)
ignorehitpause=1

[State 1251106, fx]
type = PalFx
trigger1 = 1
Time = 10
color = 256 - Time

[State 1251106, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251106, End]
type = SelfState
trigger1 =  Time = [120,150]
trigger2 = AnimTime = 0
trigger3 = Time >= (3*tickspersecond)
value =5300
anim = 5300
ctrl = 1


; --- UNO Mode: Alter Nega Ego ---
[Statedef 1251107] 
type = S
movetype = I
physics = S
anim = 5300
SprPriority = -4
velset = 0,0
ctrl = 0

[State 1251107, pos]
type = PosSet
trigger1 = 1
x = Root, pos x
y = 0

[State 1251107, Still]
type = PosFreeze
trigger1 = Time > 1
value = 1

[State 1251107, fx]
type = PalFx
trigger1 = 1
Time = 10
color = 0
invertall = 1
mul = 90, 90, 90

[state 1251107, disa]
type = Trans
trigger1 = !Root, NumHelper(1251124)
Trans = add
alpha = 256,128

[State 1251107, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251107, ghost] 
type = PlayerPush
trigger1 = 1
value = 0

[State 1251107, end]
type = DestroySelf
trigger1 = Root, StateNo != 1251106


; Leaving Taunt
[Statedef 1251110]
type = S
movetype = I
physics = S
anim = 40
SprPriority = -2
velset = 0,0
facep2 = 1
ctrl = 0

[state 0]
type = PlaySnd
trigger1 = time = 0
value = 3000,3002

[State 1251110, Taunt]
type = ChangeAnim
trigger1 = Time = [0,1]
value = 182
persistent = 0

[State 1251110, pos]
type = PosSet
trigger1 = 1
y = 0

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251110, Safe]
type = NotHitBy
trigger1 = (sysvar(4) = [8,9]) && Time > 12
trigger2 = Time > 14
value = SCA

[State 1251110, ghost] 
type = PlayerPush
trigger1 = 1
value = ifelse((sysvar(4) = [8,9]),0,1)

[State 1251110, sb]
type = ScreenBound
trigger1 = 1
value = ifelse((sysvar(4) = [8,9]),0,1)
movecamera = ifelse((sysvar(4) = [8,9]),0,1),0

[State 1251110, Helper]
type = Helper
trigger1 = !NumHelper(1251103)
trigger1 = sysvar(4)!=[5,9]
trigger1 = sysvar(4)!=15
Helpertype = Normal
ID = 1251103
StateNo = 1251103
name = "AbangTag"
pos =0,0
postype = p1
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State 1251110, end]
type = SelfState
triggerall = RoundState > 1
trigger1 = Time = [26,27] 
trigger2 = AnimTime = 0
trigger3 = sysvar(4) = 5
trigger4 = Time > 30
value = 1251111

[State 1251110, end]
type = ChangeState
trigger1 = RoundState > 2 || !Partner, Life
value = 0
ctrl = 1


; Leave the stage
[Statedef 1251111]
type = S
movetype = I
physics = N
velset = 0,0
SprPriority = -2
ctrl = 0

[State -2, VarSet]
type = VarSet
trigger1 = sysvar(4) = 5
sysvar(4) = 1

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251111, Anim]
type = ChangeAnim
trigger1 = Anim != [40,47]
value = ifelse(sysvar(4) = 4,42,ifelse(Statetype = A && SelfAnimExist(44), 44, ifelse(SelfAnimExist(40),40,42)))
persistent = 0

[State 1251111, anim]
type = ChangeAnim
triggerall = Anim = [40,47]
trigger1 = AnimTime = 0
trigger2 = BackEdgeDist < -10
value = ifelse(!SelfAnimExist(42),41,42)
persistent = 0

[State 1251111, Turn]
type = Turn
triggerall = Facing = Partner, Facing && (sysvar(4) != [8,9])
trigger1 = Anim = 42 && AnimElem = 1
trigger2 = Anim = 41 && AnimElem = 1
trigger3 = Anim = 40
persistent = 0

[State 1251111, T2]
type = Turn
trigger1 = (sysvar(4) = [8,9]) && AnimElem = 1 && ((Facing = -1 && EnemyNear, Pos X <= Pos X) || (Facing = 1 && EnemyNear, Pos X >= Pos X))
;trigger1 = EnemyNear, StateNo != [1251112,1251114]
persistent = 0

[State 1251111, jumpvel]
type = VelSet
trigger1 = Anim = 42 && AnimElem = 1
trigger2 = Anim = 41 && AnimElem = 1
x = 11.5
y = -6.25

[State 1251111, velAdd]
type = VelAdd
trigger1 = sysvar(4) = 4
x = 0.7
y = 0.2

[State 1251111, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251111, ghost]
type = PlayerPush
trigger1 = 1
value = 0

[State 1251111, drop]
type = TargetBind
trigger1 = Numtarget
time = 0

[State 1251111, sb]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State -3, -]
type = AssertSpecial
trigger1 = PrevStateNo = 7828
flag = invisible
flag2 = noshadow

[State 1251111, wait outside]
type = ChangeState
trigger1 = BackEdgeBodyDist < 5 && Time > 12
trigger2 = FrontEdgeBodyDist < 5 && Time > 12
trigger3 = Time >= 35
value = 1251112


; Standby (offscreen)
[Statedef 1251112]
type = A
movetype = I
physics = N
anim = 1251199
velset = 0,0
ctrl = 0

[State -2, def]
type = VarSet
trigger1 = Time = [0,1]
sysvar(4) = 1

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[state 1251112, Hide]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State 1251112, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251112, ghost]
type = PlayerPush
trigger1 = 1
value = 0

[State 1251112, sb] 
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0, 0

[State 1251112, lifeAdd] ; Gains life (opt)
type = LifeAdd
triggerall = RoundState = 2 && Life > 0
trigger1 = (gameTime%10) = 0
value = 1

[State 1251112, Turn]
type = Turn
trigger1 = Partner, movetype = H
trigger1 = facing = Partner, facing
trigger2 = Partner, movetype != H
trigger2 = facing != Partner, facing

[State 1251112, pos]
type = PosSet
trigger1 = Partner, StateNo = 1251126
x = (50 + (GameWidth/2))*(-1*Facing)
y = ((abs(EnemyNear, FrontEdgeDist + 20)/2.5) + abs(EnemyNear, pos y * 1.05))*-1

[State 1251112, pos]
type = PosSet
trigger1 = Partner, StateNo != 1251110
trigger1 = (Partner, StateNo != [1251125,251127])
x = (Partner, pos x) ;- 10000*facing
y = (Partner, pos y)	;-150

[State 1251112, pos_S]
type = PosSet
trigger1 =(Partner, StateNo = 1251110)
x = (50 + (GameWidth/2))*(-1*Facing)
y = (Partner, BackEdgeDist)*-1/2

[State 1251112, Striker]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Partner, sysvar(4) = 10
value = 1251104

[State 1251112, diz]
type = ChangeState
trigger1 = Partner, StateNo = [1251128,1251129]
value = 1251106
persistent = 0

[State 1251112, diz]
type = ChangeState
trigger1 = (Partner, StateNo = [1251111,1251114]) && Partner, Time > 0
value = 1251101

; Appear into the screen (Delayed Hyper)
[State 1251112, enterTheScreen]
type = ChangeState
trigger1 = NumPartner
trigger1 = Life && Partner, sysvar(4) = 4
value = 1251131

[State 1251112, debug]
type = ChangeState
triggerall = RoundState >= 2
trigger1 = !Partner, Life || !Life
trigger2 = Partner, StateNo = 1251112
trigger2 = Life > Partner, Life
value = 1251113
persistent = 0


; Standby (Partner Dead)
[Statedef 1251113]
type = A
movetype = I
physics = N
anim = 1251199
velset = 0,0
ctrl = 0

[state 1251113, Hide]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
ignorehitpause = 1

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251113, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251113, ghost]
type = PlayerPush
trigger1 = 1
value = 0

[State 1251113, sb] 
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1251113, Turn]
type = Turn
triggerall = Partner, Alive
trigger1 = Partner, movetype = H
trigger1 = facing = Partner, facing
trigger2 = Partner, movetype != H
trigger2 = facing != Partner, facing

[State 1251113, face]
type = Turn
triggerall = !Partner, Alive
trigger1 = Facing = Enemynear, Facing

[State 1251113, Helper]
type = Helper
trigger1 = NumPartner && RoundState = 2
trigger1 = !NumHelper(1251103)
trigger1 = Partner, StateNo = [5110,5955]
Helpertype = Normal
ID = 1251103
StateNo = 1251103
name = "AbangPartnerDead"
pos =0,0
postype = p1
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State 1251113, pos]
type = PosSet
trigger1 = NumPartner
trigger1 = Partner, StateNo != 1251110
trigger1 = Partner, StateNo != 1251126
trigger1 = Partner, StateNo != 1251129
;trigger1 = !NumHelper(1251103)
x = (Partner, pos x)  ;- 10000*facing
y = (Partner, pos y)	;-150

[State 1251113, ent3r]
type = ChangeState
Triggerall = NumPartner && Life && !(Partner, Life)
Trigger1 = (Partner, Time >= 32 && Partner, StateNo = [5110,5150]) || Partner, PrevStateNo = 5950
trigger2 = Partner, StateNo = 1251113
value = 1251120
persistent = 0

[State 1251113, end]
type = SelfState
triggerall = NumPartner
trigger1 = RoundState > 2
trigger2 = Partner, StateNo = [1251112,1251114]
trigger3 = !Partner, Alive && Time >= (6 * TicksPerSecond)
value = ifelse(!Life,5150,1251120)

[State 1251113, deb]
type = SelfState
triggerall = RoundState = 2
trigger1 = Partner, StateNo != 1251112
Trigger1 = Partner, Life && Life
value = 1251112
persistent = 0


; - Target State
[Statedef 1251117]
type = S
movetype = H
physics = S
SprPriority = 2
velset = 0,0
movehitpersist = 1
hitcountpersist = 1
ctrl = 0

[State 1251117, anim]
type = ChangeAnim
trigger1 = Time <= 23
value = ifelse((Anim=[5100,5170]),Anim,ifelse((Anim=[5020,5027]),5021,ifelse((Anim=[5000,5007]),5001,5011)))
persistent = ifelse((Anim=[5100,5170]),0,1)

[State 1251117, lie]
type = StateTypeSet
trigger1 = Anim = 5110
statetype = C
movetype = H
physics = C

[state 1251117, Pos]
type = PosSet
trigger1 = 1
y = 0 

[State 1251117, 1]
type = HitVelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1251117, 4]
type = VelSet
trigger1 = HitOver
x = 0
y = 0

[state 1251117, recov]
type = ChangeAnim
trigger1 = Time >= 25 && AnimTime = 0
value = ifelse((Anim=[5100,5170]),5110,(Anim+5))
persistent = 0

[state 1251117, end]
type = SelfState
trigger1 = AnimTime = 0
trigger1 = Time > 50
trigger2 = Time > 55
trigger3 = (sysvar(4) = [8,9]) && AnimTime = 0
value = ifelse(Anim=5110,5110,0)
ctrl = ifelse(Anim=5110,0,1)


; - Target State * On Air
[Statedef 1251119]
type = A
movetype = H
physics = A
anim = 5160
SprPriority = 2
ctrl = 0

[State 1251119, 1]
type = VelMul
trigger1 = 1
x = 0.15

[State 1251119, 2]
type = VelSet
trigger1 = Numenemy && Time = [0,1]
trigger1 = Enemynear, StateNo != 1251125
y = ifelse(Pos Y > -50,-6.5,-3)

[State 1251119, 3]
type = Explod
trigger1 = Time = 0 && PrevStateNo=5100
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = 10

[state 1251119, end]
type = SelfState
trigger1 = AnimTime = 0
trigger2 = Time = [1,2]
value = 5050


; Jumping in
[Statedef 1251120]
type = A
movetype = I
physics = N
anim = 42
SprPriority = 2
ctrl = 0

[State 1251120, Turn]
type = Turn
triggerall = RoundState >= 2 && NumPartner
trigger1 = Partner, Alive &&  Facing != Partner, Facing
trigger2 = !(Partner, Alive) && Facing = 1 && EnemyNear, Pos X < Partner, Pos X
trigger3 = !(Partner, Alive) && Facing = -1 && EnemyNear, Pos X > Partner, Pos X
persistent = 0

[State 1251120, 0]
type = PosSet
trigger1 = NumPartner
trigger1 = AnimElem = 2, < 0
trigger2 = time = 0
x = (50 + (GameWidth/2))*(-1*Facing)
y = 0
persistent = 0

[State 1251120, 1]
type = VelSet
trigger1 = AnimElem = 2, = 0
trigger2 = time = 0
x = 3.2
y = -8.4
persistent = 0

[State 1251120, 2]
type = NotHitBy
trigger1 = 1
value = SCA
Time = 6

[State 1251120, 3]
type = ScreenBound
trigger1 = 1
value = ifelse((Time > 15),1,0)

[State 1251120, 8]
type = Gravity
trigger1 = AnimElem = 2, >= 0
trigger2 = Time > 20
trigger2 = RoundState > 2 || Pos Y < 0

[State 1251120, 9]
type = VelSet
trigger1 = Vel Y >= 0
trigger1 = Pos Y > 0
trigger1 = AnimElem = 2, >= 0
x = 0
y = 0

[State 1251120, 10]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y > 0
trigger1 = AnimElem = 2, >= 0
trigger2 = Pos Y > 0
value = 1251121

[State 1251120, 11]
type = ChangeState
trigger1 = Time > 120 && BackEdgeBodyDist < 0
value = 1251121


; --- Landing ---
[Statedef 1251121]
type = S
movetype = I
physics = C
anim = 47
velset = 0,0
SprPriority = 2
ctrl = 0

[State 1251121, 0]
type = PosSet
trigger1 = 1
y = 0

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251121, 1]
type = ChangeAnim
trigger1 = BackEdgeBodyDist <= 0
value = 100

[State 1251121, 2]
type = VelSet
trigger1 = Anim != 47
trigger2 = BackEdgeBodyDist <= 0
x = 7

[State 1251121, 3]
type =PosFreeze
trigger1 = BackEdgeBodyDist > 0

[State 1251121, 4]
type = NotHitBy
trigger1 = BackEdgeBodyDist <= 0
value = SCA
Time = 4

[State 1251121, 5]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

; Partner ASSIST :
[State 1251121, Strike!] 
type = ChangeState
triggerall = Partner, life > 0
triggerall = Pos y >= 0      
triggerall = !Win && !Lose
triggerall = BackEdgeBodyDist >= 0
trigger1 = prevStateNo = 1251104
trigger2 = sysvar(4) = 8
value = 1251133

[State 1251121, interrupt]
type = ChangeState
triggerall = Partner, sysvar(4)= 2
trigger1 = Partner, StateNo != [2000,1251133]
value = 1251132
ctrl = 0

[State 1251121, inv]
type = NotHitBy
trigger1 = sysvar(4) != 8
trigger2 = Partner, sysvar(4) = 6
value = SCA
Time = 6

[State 1251121, end]
type = ChangeState
triggerall = sysvar(4) != 8
trigger1 = Anim = 100
trigger1 = BackEdgeBodyDist >= 0
trigger2 = Anim != 100
trigger2 = AnimTime >= 0
value = 0
ctrl = 1


; FOLLOW 
[Statedef 1251123]
type = A
movetype = A
physics = A
SprPriority = 2
anim = ifelse(SelfAnimExist(44),44,41)
ctrl = 0
velset = 5,-2.5
hitdefpersist = 1
movehitpersist = 1
hitcountpersist = 1

[State 1251123, 1]
type = NULL
trigger1 = Numtarget=1 && Target, Pos Y < -25
y = (Target, Pos Y-25)

[State 1251123, 2]
type = VarSet
trigger1 = Time = [0,1]
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback",-1,0))

[State 1251123, 3]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x)+1, const(velocity.airjump.back.x)-1))
y = -4.5

[State 1251123, 4]
type = VelAdd
trigger1 = Vel X > 0 && p2BodyDist X > 60
x = 0.5

[State 1251123, 4]
type = VelAdd
trigger1 = Pos Y > -30
trigger1 = Time = [0,5]
y = -1.2

[State 1251123, 5]
type = PlayerPush
trigger1 = 1
value = 1

[State 1251123, ctrl]
type = CtrlSet
trigger1 = Time > 2
value = 1

[State 1251123, 5]
type = VelSet
trigger1 = Vel Y >= 0
trigger1 = Pos Y > 0
trigger1 = AnimElem = 2, >= 0
x = 0
y = 0

[State 1251123, 6]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y > 0
trigger1 = AnimElem = 2, >= 0
value = 1251121


; -- Aura
[Statedef 1251124]
type=A
physics=N
anim=9741
ctrl=0

[State 1251124,1]
type=NotHitBy
trigger1= 1
value=SCA
Time=-1
ignorehitpause=1

[State 1251124, 2]
type=AssertSpecial
trigger1= 1
flag=noshadow

[State 1251124, b]
type=bindtoroot
trigger1= 1
pos= -1+(random%2), ceil(.312511*(gameTime%32))-1+(random%2)
facing=1

[State 1251124, b]
type=bindtoroot
trigger1= root,StateNo=4010
pos= -4+(random%8), ceil(1.25*(gameTime%32))-4+(random%8)
facing=1

[State 1251124, t]
type=AngleDraw
trigger1= 1
scale= 1 + .01*(gameTime%32), 1 + .01*(gameTime%32)

[State 1251124, t]
type=Trans
trigger1= 1
Trans=addalpha
alpha= 256 - 8*(gameTime%32), 8*(gameTime%32)
ignorehitpause=1

[State 1251124, a]
type=ChangeAnim
trigger1= SelfAnimExist(root,anim)
value=(root,anim)
elem=(root,animelemno(0))

[State 1251124, h]
type=AssertSpecial
trigger1= !SelfAnimExist(root,anim)
trigger2 = Root, PrevStateNo != [1251101,1251133]
trigger2 = Root, Movetype = A || Root, Movetype = H
flag=invisible

[State 1251124, s]
type=SprPriority
trigger1= 1
value=-3

[State 1251124, end]
type=DestroySelf
triggerall = Root, PrevStateNo != [1251101,1251133]
trigger1= RoundState > 2
trigger2= Root, StateNo = 5150
trigger3= Root, StateNo = 5131
trigger4 = Root, Movetype = A || Root, Movetype = H
trigger4 = Root, StateNo != [1251101,1251133]
trigger5 = Root, Life > (LifeMax*.2)


; Activate Team Hyper Combo - Standby (onscreen)
[Statedef 1251125]
type = S
movetype = U
physics = S
SprPriority = -2
velset = 0,0
hitdefpersist = 1
hitcountpersist = 1
ctrl = 0

[State 1251125, Taunt]
type = ChangeAnim
trigger1 = Time = 1
value = 182
persistent = 0

[State 1251125, def]
type = VarSet
trigger1 = Time = [0,1]
sysvar(4) = 2

[State 1251125, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251125, ghost] 
type = PlayerPush
trigger1 = 1
value = 1

[State 1251125, 1]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

[State 1251125, 2]
type =PosFreeze
trigger1 = 1

[State 1251125, Helper]
type = Helper
trigger1 = !NumHelper(1251125) && Time = [0,2]
Helpertype = Normal
ID = 1251125
StateNo = 1251103
name = "Cross"
pos =0,0
postype = p1
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State 1251125, UnoLoveSheForever]
type = ChangeState
trigger1 = Partner, Movetype = H
trigger2 = Partner, prevStateNo = [1251131,1251132]
trigger3 = Partner, StateNo = 0
value = 1251131
ctrl = 0

[State 1251125, end]
type = SelfState
trigger1 = Partner, prevStateNo = [1251132,1251131]
trigger2 = Partner, prevStateNo = 1251101
trigger3 = !Partner, prevStateNo = 1251101
trigger3 = animTime = 0
value = 1251111

[State 1251125, end]
type = SelfState
trigger1 = NumPartner
trigger1 = (Partner, StateNo = [1251112,1251114]) && Time > 80
value = 0
ctrl = 1


; Activate Change Attack
[Statedef 1251126] 
type = U
movetype = U
physics = U
SprPriority = -3
velset = 0,0
ctrl = 0
poweradd = ifelse(((ID < Partner,ID && PowerMax <= 1000) || (ID > Partner,ID && Partner, PowerMax <= 1000)),ifelse(sysvar(4)=15,-500,-250),ifelse(sysvar(4)=15,-1000,-500))
hitdefpersist = 1
movehitpersist = 1
hitcountpersist = 1

[State -2, def]
type = VarSet
trigger1 = Time = [0,1]
sysvar(4) = 3

[State 1251126, Helper]
type = Helper
trigger1 = !NumHelper(1251103)
trigger1 = sysvar(4) != [5,9]
Helpertype = Normal
ID = 1251103
StateNo = 1251103
name = "AbangCA"
pos =0,0
postype = p1
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State 1251126, T_T]
type = TargetVelSet
trigger1 = NumTarget = 1 && Target, Vel Y > 0
y = 0

[State -3, cancelfx2r]
type = PalFx
trigger1 = Time = [0,1]
Time = 4
add = 50,50,256
mul = 0,0,256

[State -3, cancelBG]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255
Time = 9
under = 1

[State -3, snd]
type = PlaySnd
trigger1 = Time = 1
value = F7, 1
freqmul = 1.2
pan = (1+Time*2)

[State 1251126, PPause]
type = Superpause
trigger1 = Time = [1,2]
anim = -1
Time = 3
moveTime = 2
p2defmul = 1
darken = 0

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251126, R]
type = RemoveExplod
trigger1 = 1

[State 1251126, S]
type = ScreenBound
trigger1 = 1
value = 1

[State 1251126, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251126, ghost] 
type = PlayerPush
trigger1 = 1
value = 0

[State 1251126, STS]
type = StateTypeSet
trigger1 = Partner, StateNo = 1251101
trigger1 = Partner, BackEdgeBodyDist >= 0
movetype = I
physics = N
persistent = 1

[State 1251126, SprPrior]
type = SprPriority
trigger1 = Partner, StateNo = 1251101
value = -3

[State 1251126, endround]
type = ChangeState
trigger1 = RoundState > 2
value = 0

[State 1251126, end]
type = ChangeState
triggerall = RoundState = 2
triggerall = Time > 1
trigger1 = Partner, pos x = [pos x-15*facing,pos x+500*facing]
trigger2 = AnimTime = 0 || Partner, prevStateNo = 1251102
trigger3 = (Partner, StateNo = [1251115,1251116]) || (Partner, PrevStateNo = [1251115,1251116])
value = 1251111
ignorehitpause = 1

[State 1251126, End]
type = SelfState
trigger1 = RoundState > 2
value = 5030


; Tag Hyper Cancel
[Statedef 1251127]
type = U
movetype = A
physics = U
SprPriority = -3
velset = 0,0
ctrl = 0
hitdefpersist = 1
movehitpersist = 1
hitcountpersist = 1

[State -2, def]
type = VarSet
trigger1 = Time = [0,1]
sysvar(4) = 4

[State 1251127, Ov]
type = TargetState
triggerall = Time = [0,1]
triggerall = NumTarget && Target, StateNo != 5110 && Partner, StateNo = [1251101,1251133]
triggerall = !(Target, StateNo = [120,152]) && !(Target, Anim = [120,152]) && !(Target, StateNo = [1251109,1251119])
triggerall = Target, Pos Y > -12
trigger1 =  P2Dist X <= 55 && (Target, Statetype = A || Target, statetype = L || Target, Anim = [5000,5950])
trigger2 = Target, StateNo != [5000,5950]
value = 1251117
ignorehitpause = 1

[State 1251127, Ov2]
type = TargetState
triggerall = Time = 0
triggerall = NumTarget
trigger1 = !(Target, StateNo = [120,152]) && !(Target, Anim = [120,152]) && !(Target, StateNo = [1251109,1251119])
trigger1 = Target, Pos Y <= -12
trigger1 = Target, StateNo != [5000,5500]
value = 1251119
ignorehitpause = 1

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251127, R]
type = RemoveExplod
trigger1 = 1

[state 1251127, labo]
type = Trans
trigger1 = 1
Trans = add
alpha = 150,120

[State 1251127, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251127, ghost] 
type = PlayerPush
trigger1 = 1
value = 0

[State 1251127, ghost] 
type = PosFreeze
trigger1 = 1

[State 1251127, sb] 
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1251127, TVelOnAir]
type = TargetVelAdd
triggerall = NumTarget = 1
triggerall = (Target, StateNo != [1251116,1251118]) && (Target, PrevStateNo != [1251116,1251118])
trigger1 = Target, Statetype = A
trigger1 = Target, MoveType = H
trigger1 = Target, Pos Y < -15 && Target, GetHitVar(yvel) < -0.7
y = 0.7

[State 1251127, SprPrior]
type = SprPriority
trigger1 = Partner, StateNo = 1251131
trigger2 = Partner, StateNo = 1251101
value = -3

[State 1251127, VelSet]
type = VelSet
trigger1 = Partner, StateNo = 1251131
trigger2 = Partner, StateNo = 1251101
x = 0
y = 0

[State 1251127, End]
type = ChangeState
triggerall = RoundState = 2
trigger1 = Partner, prevStateNo = 1251131 && Time > 1
trigger2 = Time > 115
value = 1251111

[State 1251127, End]
type = SelfState
trigger1 = RoundState > 2
value = 5030


; --- Uno Mode: Initialize ---
[Statedef 1251128] 
type = S
movetype = I
physics = S
anim = 5300
SprPriority = 5
velset = 0,0
ctrl = 0

[State 1251128, inv]
type = NotHitBy
trigger1 = 1
value = SCA
Time = 2

[State 1251128, ghost] 
type = PlayerPush
trigger1 = 1
value = 0

[State 1251128, 0]
type = PosFreeze
trigger1 = 1
value = 1

[State 1251128, end]
type = SelfState
trigger1 = NumPartner && Time = [3,4]
value = 1251129


; --- Uno Mode: Harakiri ---
[Statedef 1251129] 
type = S
movetype = I
physics = S
SprPriority = 5
velset = 0,0
poweradd = -(power)
ctrl = 0

[State 1251129, Helper]
type = Helper
trigger1 = Time = [0,1]
Helpertype = Normal
ID = 1251130
StateNo = 1251130
name = "Tigok"
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State 1251129, SuperPause]
type = SuperPause
trigger1 = Partner, StateNo = 1251106
Time = 10
sound = 20, 0
moveTime = 10
darken = 1
p2defmul = 0
unhittable = 1
pausebg = 1

[State 1251129, End]
type = SelfState
trigger1 = NumPartner && Time > 0
trigger1 = Partner, StateNo = 1251106
value = ifelse(SelfAnimExist(5130),5130,5950)


; -- Uno Mode: From Dark --
[Statedef 1251130] 
type = S
movetype = I
physics = S
anim = 1251199
velset = 0,0
ctrl = 0

[State 1251130, 0]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow
ignorehitpause = 1

[State 1251130, dark]
type = BgPalFx
trigger1 = IsHelper(1251139)
Time = 9
add = -16 -ceil(cos(gameTime / 60.0 * pi) * 16), -16 -ceil(cos(gameTime / 60.0 * pi) * 16), -16 -ceil(cos(gameTime / 60.0 * pi) * 16)
mul = Time,Time,Time

[State 1251130, sb]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1251130, inv]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251139, End]
type = DestroySelf 
trigger1 = IsHelper(1251139)
trigger1 = Time >= 256

[State 1251130, End]
type = DestroySelf 
trigger1 = IsHelper(1251130)
trigger1 = Root, StateNo = [5131,5150]




; **************************
; ** user-defined section **
; **************************


; Tag Hyper Cancel Move selection
[Statedef 1251131]
type = S
movetype = A
physics = S
anim = 40
SprPriority = 2
ctrl = 0
facep2 = ifelse((Partner, StateNo = 1251125),0,1)

[State 1251131, Helper]
type = Helper
trigger1 = !NumHelper(1251103)
Helpertype = Normal
ID = 1251103
StateNo = 1251103
name = "AbangDH"
pos =0,0
postype = p1
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
persistent = 0

[State -3, _]
type = AfterImageTime
trigger1 = 1
Time = 0

[State 1251131, 0]
type = PosSet
trigger1 = sysvar(4) != 2 && Time = 0
x = 0
y = 0

[State 1251131, pos]
type = PosSet
triggerall = NumPartner &&  sysvar(4) != 2
trigger1 = Time = [1,2]
x = ifelse((Partner, StateNo = 1251125 || (Partner, StateNo != 1251125 && !Partner, NumTarget && !(Partner, BackEdgeBodyDist < 0 || Partner, FrontEdgeBodyDist < 0 ))),(Partner, pos x),(EnemyNear, pos x - (60*facing)))
y = 0

[State 1251131, pos]
type = PosFreeze
trigger1 = Time > 1
value = 1

[State 1251131, Safe]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1251131, sb] 
type = ScreenBound
trigger1 = 1
value = 0

[State 1251131, X]
type = Helper
trigger1 = sysvar(4) != 2
trigger1 = Time = 1
Helpertype = Normal
ID = ifelse((Partner,StateNo=1251125),1251102,1251101)
StateNo = 1251101
name = "X"
ownpal = 0
supermoveTime = ifelse((Partner,StateNo=1251125),1,9999)
pausemoveTime = ifelse((Partner,StateNo=1251125),1,9999)

[State 1251131, Assert]
type = AssertSpecial
triggerall = sysvar(4) != 2
trigger1 = Time <= 2
trigger2 = NumHelper(1251101) && Helper(1251101), Pos X != [Pos X-12,Pos X+12]
trigger3 = NumHelper(1251102) && Helper(1251102), Pos X != [Pos X-12,Pos X+12]
flag = invisible
flag2 = noshadow
ignorehitpause = 1

[State 1251131, pause]
type = Superpause
triggerall = NumPartner
trigger1 = NumHelper(1251102) && Partner, StateNo = 1251125 ; && Time = [0,5]
anim = -1
Time = 1
moveTime = 4
p2defmul = 1
darken = 0
ignorehitpause = 1

[State 1251131, RockEnRoll]
type = SelfState
triggerall = NumPartner
trigger1 = !NumHelper(1251102) && (Partner, sysvar(4) = 2) && Time > 0
trigger1 = Partner, life > 0
trigger1 = Pos y >= 0       
trigger1 = !Win && !Lose
value = 1251132

; - Define this one!
[State 1251131, Anti-Air_HyperMove]
type = ChangeState
triggerall = !NumHelper(1251101) && !NumHelper(1251102)
triggerall = PrevStateNo != 1251125
trigger1 = EnemyNear, Pos Y <= -25 || EnemyNear, statetype = A
trigger1 = P2Dist x = [0,100]
trigger1 = Time > 1
;trigger1 = SelfAnimExist(3000)	; <---| change this..
value = 3300

; - Define this one!
[State 1251131, HyperMove]
type = ChangeState
triggerall = !NumHelper(1251101) && !NumHelper(1251102)
trigger1 = PrevStateNo = 1251125 || Time > 1
;trigger1 = SelfAnimExist(3000)	; <---| change this..
value = 3300

[State 1251131, End]
type = ChangeState
trigger1 = !NumHelper(1251101) && !NumHelper(1251102)
trigger1 = PrevStateNo = 1251125 || Time > 2
value = 0
ctrl = 1


; Team Hyper Attack Move selection
[Statedef 1251132]
type = S
movetype = A
physics = S
anim = 40
SprPriority = 2
ctrl = 0

[State 1251132, pos]
type = PosFreeze
trigger1 = 1
value = 1

; - Define this one!
[State 1251132, LV3_HyperMove]
type = ChangeState
trigger1 = Time = [0,1]
value = 2900

[State 1251132, End]
type = ChangeState
trigger1 = Time = [0,1]
value = 0
ctrl = 1


; Partner Assist Moves
[Statedef 1251133]
type = S
movetype = A
physics = N
SprPriority = 2
velset = 5,0
ctrl = 0

[State 1251133, EnterAgain]
type = ChangeAnim
trigger1 = BackEdgeBodyDist <= 0
value = 100
persistent = 0

[State 1251133, vel]
type = VelAdd
trigger1 = Anim = 100
x = 8

[State 1251133, sb] 
type = ScreenBound
trigger1 = 1
value = 1

[State 1251133, pp] 
type = PlayerPush
trigger1 = 1
value = 0

; - Define this one!
[State 1251133, Anti-Air SpecialMove] 
type = ChangeState
triggerall = BackEdgeBodyDist >= 0
trigger1 = P2Dist Y <= -19 ;|| EnemyNear, statetype = A
trigger1 = P2Dist x = [-50,70]
;trigger1 = SelfAnimExist(1100)	; <---| change this..
value = 1000

; - Define this one!
[State 1251133, SpecialMove] 
type = ChangeState
trigger1 = BackEdgeBodyDist >= 0
;trigger1 = SelfAnimExist(1000)	; <---| change this..
value = 1000

[State 1251133, End]
type = ChangeState
trigger1 = BackEdgeBodyDist >= 0 && Time = [0,1]
value = ifelse((Partner, Alive), 1251110, 0)
ctrl = ifelse((Partner, Alive), 0, 1)

; - Mabuhay ang Pinoy!!


;NEG2


;NEG3

;
;




; Common state file for M.U.G.E.N beta 2002.04.14
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.

; The following states have special handling within MUGEN, and should be
; overridden with caution:
; Jump Start (40): airjumping bookkeeping at time = 0
; All guard states (120-155): guard handling throughout state
; Hit_trip, shaking (5070): defence increases at time = 0
; Hit_bounce (5100): defence increases at time = 0, player becomes
;                    invincible if within 10 ticks of getting up
; Hit_liedown (5110): player changes to get-up state (5120) when ready
; Hit_getup (5120): player's defence is restored to normal at time = 0
; Hitfall_recover (5200): player's defence is restored at time = 0
; Hitfall_airrecover (5210): player's defence is restored at time = 0

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
 

[State 0, 1]
type = ctrlset
triggerall = var(59)
trigger1 = roundstate = 2 || roundstate = 4
value = var(0)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != var(10) && Anim != 5+var(10)
trigger2 = Anim = 5+var(10) && AnimTime = 0 ;Turn anim over
value = var(10)

[State 0, 1]
type = ChangeAnim
triggerall = Anim != 5
triggerall = Anim != 10000
trigger1 = var(10) = 10000
trigger2 = numhelper(1401) > 0
value = 10000

[state 1100, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 0
elem = animelemno(0)

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0


[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 2]
type = posSet
trigger1 = pos y != 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10+var(10)

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 0, 2]
type = posSet
trigger1 = pos y != 0
y = 0

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11+var(10)
sprpriority = 0
 
[state 1100, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10011
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 11
elem = animelemno(0)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 6 && Anim != 11 && anim != 10006 && anim != 10011
trigger2 = Anim = 6+var(10) && AnimTime = 0
value = 11+var(10)

[State 0, 2]
type = posSet
trigger1 = pos y != 0
y = 0

[State 0, 4]
type = ChangeAnim
triggerall = var(10) = 10000
trigger1 = Anim = 6
value = 6+var(10)

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12+var(10)

[State 0, 2]
type = posSet
trigger1 = pos y != 0
y = 0

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0
 
 

[State 0, 2]
type = posSet
trigger1 = pos y != 0
y = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x) * (1 + (.4*numhelper(3803)))

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x) * (1 + (.4*numhelper(3803)))

[state 1100, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10020
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 20
elem = animelemno(0)

[state 1100, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10021
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 21
elem = animelemno(0)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5  && Anim != 10020 && Anim != 10005
trigger2 = Anim = 5+var(10) && AnimTime = 0
value = 20+var(10)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5  && Anim != 10021 && Anim != 10005
trigger2 = Anim = 5+var(10) && AnimTime = 0
value = 21+var(10)

[state 50, 2]
type = changeanim
triggerall = var(10) = 10000
trigger1 = anim = 5
value = 10005

; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State -3, エフェクト]
type = Explod
trigger1 = NumExplod(6010) = 0
anim = 6010
pos = 0,-10
postype = p1
id = 6010
ignorehitpause = 1
persistent = 0
sprpriority = 6
ownpal = 1
ontop = 1
scale = 0.5,0.5
 
[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1
;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 1
anim = 47+var(10)
 
[state 50, 2]
type = changeanim
triggerall = var(10) = 10000
trigger1 = anim = 5
value = 10005

[State 47, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 47,0


[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0 

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = S
physics = S
anim = 1251200
sprpriority = 1
ctrl = 0
 
 

[State 105, 1]
type = VelSet
trigger1 = numhelper(3800)=0
trigger1 = animelem = 2
x = -16

[State 105, 1]
type = VelSet
trigger1 = numhelper(3800)=1
trigger1 = animelem = 2
x = -24

[State 105, 1]
type = VelSet
trigger1 = animelem = 6
x = 0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 190, 1]
type = PlaySnd
trigger1 = Time = 1
value = 2,2

[State 105, 3]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 48+var(10)

[State 106, 4]
type = Ctrlset
trigger1 = animelem = 4
value = 1

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2+var(10)

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59) = 0
Trigger1 = command != "holddown"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType=A
Trigger2 = Random <= var(59)*20||var(59)>9
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
Trigger1 = var(59) = 0
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

[State 120, 5]
type = ChangeState
trigger1 = var(52)
trigger1=statetype = C || statetype = S
value = 4100
ctrl = 0
;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130+var(10)

[State 130, Hi to Lo]
type = ChangeState
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 120, 5]
type = ChangeState
trigger1 = var(52)
value = 4100
ctrl = 0
;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 120, 5]
type = ChangeState
trigger1 = var(52)
value = 4100
ctrl = 0

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131+var(10)

[State 131, Lo to Hi]
type = ChangeState
Trigger1 = var(59) = 0
Trigger1 = command != "holddown"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType=A
Trigger2 = Random <= var(59)*20||var(59)>9
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132+var(10)
value = 132+var(10)

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + ((statetype = A)*2)+var(10)

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 140, 5] ;Implemented within engine
type = ChangeState
trigger1 = AnimTime = 0
value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150+var(10)

[State 150, 2]
type = ChangeState
trigger1= !ishelper
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59) = 0,(command = "holddown"),(fvar(38)=1))

[State 150, Hi to Lo]
type = StateTypeSet
trigger1= !ishelper
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1= !ishelper
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150+var(10)

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151+var(10)

[State 152, 3]
type = ChangeState
trigger1= !ishelper
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1= !ishelper
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1= !ishelper
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151+var(10)

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152+var(10)

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152+var(10)

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175+var(10)

[state 1100, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10175
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 175
elem = animelemno(0)

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+var(10),5010+var(10)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(10)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047+var(10) + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+var(10)
trigger2 = anim = 5010+var(10)
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+var(10)
trigger2 = anim = 5011+var(10)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+var(10)
trigger2 = anim = 5002+var(10)
trigger3 = anim = 5030+var(10)
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005+var(10) + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
triggerall = var(52) = 0
trigger1 = HitOver
value = 0
ctrl = 1

[State 5001, 6]
type = ChangeState
triggerall = var(52)
trigger1 = HitOver
value = 4100
ctrl = 0

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020+var(10) + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(10)

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047+var(10) + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020+var(10)
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021+var(10)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022+var(10)
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025+var(10) + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000+var(10),5010+var(10)) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+var(10)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047+var(10) + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000+var(10)
trigger2 = anim = 5010+var(10)
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001+var(10)
trigger2 = anim = 5011+var(10)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012+var(10)
trigger2 = anim = 5002+var(10)
trigger3 = anim = 5030+var(10)
trigger4 = anim = [5051+var(10),5059+var(10)]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051+var(10),5059+var(10)] ;Not if in hit up anim
trigger1 = Anim != 5090+var(10) ;Not if hit off ground anim
value = 5035+var(10)

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040+var(10)
trigger2 = Time = 0
trigger2 = Anim != 5035+var(10)
value = 5040+var(10)

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035+var(10)
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035+var(10)
trigger2 = (Anim != [5051+var(10), 5059+var(10)]) && (Anim != [5061+var(10), 5069+var(10)])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050+var(10)

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050+var(10),5059+var(10)]
trigger1 = Vel Y >= ifelse(anim = 5050+var(10), 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10+var(10)
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051+var(10),5059+var(10)]) || (anim = [5061+var(10),5069+var(10)]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070+var(10)

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)+var(10)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051+var(10),5059+var(10)]) && (anim != [5061+var(10),5069+var(10)])
trigger2 = !SelfAnimExist(5100+var(10) + (anim % 10))
value = 5100+var(10)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051+var(10),5059+var(10)]) || (anim = [5061+var(10),5069+var(10)])
trigger1 = SelfAnimExist(5100+var(10) + (anim % 10))
value = 5100+var(10) + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101+var(10),5109+var(10)]
trigger2 = !SelfAnimExist(5160+var(10) + (anim % 10))
value = 5160+var(10)

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101+var(10),5109+var(10)]
trigger1 = SelfAnimExist(5160+var(10) + (anim % 10))
value = 5160+var(10) + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081+var(10),5089+var(10)]
value = 5110+var(10) + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110+var(10),5119+var(10)] ;Not already changed anim
trigger1 = anim != [5161+var(10),5169+var(10)]
trigger2 = !SelfAnimExist(5170+var(10) + (anim % 10))
value = 5170+var(10)

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110+var(10),5119+var(10)] ;Not already changed anim
trigger1 = anim = [5161+var(10),5169+var(10)]
trigger1 = SelfAnimExist(5170+var(10) + (anim % 10))
value = 5170+var(10) + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171+var(10),5179+var(10)]
triggerall = SelfAnimExist(5110+var(10) + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110+var(10) + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111+var(10),5119+var(10)]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110+var(10)

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110+var(10),5119+var(10)]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111+var(10),5119+var(10)]
trigger2 = !SelfAnimExist(5120+var(10) + (anim % 10))
value = 5120+var(10)

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111+var(10),5119+var(10)]
trigger1 = SelfAnimExist(5120+var(10) + (anim % 10))
value = 5120+var(10) + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 0] ; Sneak Roll Backwards for Back
type = ChangeState
triggerall = time = 0
triggerall = anim != 5111
trigger1 = command = "holdback"
value = 5122

[State 5120, 1] ; Sneak Roll Forwards for Back
type = ChangeState
triggerall = time = 0
triggerall = anim != 5111
trigger1 = command = "holdfwd"
value = 5123

[State 5120, 7]
type = ChangeState
triggerall = var(52) = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 5120, 7]
type = ChangeState
triggerall = var(52)
trigger1 = AnimTime = 0
value = 4100
ctrl = 0

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140+var(10))
trigger1 = (anim != [5111+var(10),5119+var(10)]) && (anim != [5171+var(10),5179+var(10)])
trigger2 = !SelfAnimExist(5140+var(10) + (anim % 10))
value = 5140+var(10)

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111+var(10),5119+var(10)]) || (anim = [5171+var(10),5179+var(10)])
trigger1 = SelfAnimExist(5140+var(10) + (anim % 10))
value = 5140+var(10) + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140+var(10),5149+var(10)]
trigger1 = SelfAnimExist(anim+10+var(10))
value = anim+10+var(10)

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140+var(10),5159+var(10)]
trigger1 = Anim != [5110+var(10),5119+var(10)]
value = 5110+var(10)

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N


[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035+var(10)
trigger1 = AnimTime = 0
value = 5050+var(10)

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200+var(10)

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210+var(10)
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300+var(10)
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 0]
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[Statedef 5085]
type= A
physics= N
movetype= H
velset= 0, 0
facep2= 1

[State 5085, P]
type = null;pause 
trigger1 = time = 0
time = 120

[State 5025, HFS]; Resets the fall parameter, so that the opponent will not fall on his back
type= hitfallset
trigger1= 1
value= 0

[State 5085, CS]
type = changestate
trigger1 = pos y
value = 5086

[State 5025, End]; Sends opponent back to his own states
type= selfstate
trigger1= pos y = 0
value= 5000;ifelse(pos y, 5020, 5000)

;---------------------------------------------------------------------------
; CUSTOM AIR-HIT (shaking) (Modified)
[Statedef 5086] ;Modified 5020
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5087;5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Air get-hit (knocked away)
[Statedef 5087];5030
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = ChangeAnim
trigger1 = Anim != [5000, 5199]
trigger1 = SelfAnimExist(5030)
value = 5030

[State 5030, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5089;40 ;HITA_RECOV

[State 5030, 5]
type = selfState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5050 ;HITA_FALL

[State 5030, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 5088;5035 ;Air get-hit (transition)

;---------------------------------------------------------------------------
; Air get-hit (transition)
[Statedef 5088]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, CA]
type = changeanim
triggerall = anim!=5040
triggerall = !hitfall
trigger1 = anim=5035 && animtime=0
trigger2 = time=0 && anim!=5035
value = 5040

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5089 ;Air get-hit (recovering in air, not falling)

[State 5035, 4]
type = SelfState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= Const(movement.air.gethit.groundlevel)
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;Air get-hit (falling)

;---------------------------------------------------------------------------
; Air get-hit (recovering in air, not falling)
[Statedef 5089] ;Modified 5040
type    = A
movetype= H
physics = N

[State 5040, 1]
type = selfState
trigger1 = !Alive
value = 5050
ctrl = 0

[State 5070, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035 && anim!=5040
value = 5040

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

[Statedef 6215]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = ChangeAnim
trigger1 = Anim != 5030 && anim!=6215;[5000, 5199]
trigger1 = SelfAnimExist(5030)
value = 5030

[State 5030, 1]
type = ChangeAnim2
trigger1 = Anim != 5030 && anim!=6215;[5000, 5199]
trigger1 = !SelfAnimExist(5030)
value = 6215

[State 5030, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 6]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = time>=5
value = 6216 ;Air get-hit (transition)

[State 5210, 3]
type = null;NotHitBy
trigger1 = vel y > 0 ;Peak of Launch
trigger1 = alive
value2 = SCA
time = 21

[State 5035, 3]
type = SelfState
;triggerall = !HitFall
trigger1 = vel y > 0 ;Peak of Launch
value = cond(alive=0,5050,5210)

;---------------------------------------------------------------------------
; Launcher State
[Statedef 6216]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
trigger1 = anim != 6215
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5210, 3]
type = null;NotHitBy
trigger1 = vel y >= 0 ;Peak of Launch
trigger1 = alive
value2 = SCA
time = 21

[State 5035, 3]
type = SelfState
;triggerall = !HitFall
trigger1 = vel y >= 0 ;Peak of Launch
value = cond(alive=0,5050,5210);value = 5210 ;Air get-hit (recovering in air, not falling)

[statedef 5122 - Recovery Roll (Back)]
type    = L
movetype= I
physics = N
ctrl = 0
velset = 0,0

[state 5120]
type = playerpush
trigger1 = 1
value = 0

[state 5120, 1]
type = changeanim
trigger1 = time = 0
value = 5122

[state 5121, 2]
type = veladd
trigger1 = time = 0
x = -5

[state 5121, 3]
type = nothitby
trigger1 = time >= 0
value = sca
time = 1

[state 5121, 5]
type = hitfallset
trigger1 = animtime = 0
value = 1

[state 5121, 6]
type = nothitby
trigger1 = animtime = 0
value = sca, nt,st,ht
time = 12

[state 5121, 6] 
type = nothitby
trigger1 = animtime = 0
value2 = sca
time = 3

[state 5121, 7]
type = changestate
trigger1 = anim = 5122
trigger1 = animtime = 0
value = 0
ctrl = 1

[statedef 5123 - Recovery Roll (Forward)]
type    = l
movetype= i
physics = n
ctrl = 0
velset = 0,0

[state 5120]
type = playerpush
trigger1 = 1
value = 0

[state 5120, 1]
type = changeanim
trigger1 = time = 0
value = 5123

[state 5122, 2]
type = veladd
trigger1 = time = 0
x = 5

[state 5122, 3]
type = nothitby
trigger1 = time = 0
value = sca
time = 1

[state 5122, 5]
type = hitfallset
trigger1 = animtime = 0
value = 1

[state 5122, 6] ;can't be thrown right after getting Up
type = nothitby
trigger1 = animtime = 0
value = sca, nt,st,ht
time = 12

[state 5122, 6] ;can't be hit right after getting Up (short time)
type = nothitby
trigger1 = animtime = 0
value2 = sca
time = 3

[state 5121, 7]
type = changestate
trigger1 = anim = 5123
trigger1 = animtime = 0
value = 0
ctrl = 1


