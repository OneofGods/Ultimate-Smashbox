;#ADD004BASIC PIEs#

;===============================================================================
;==============================<COMMAND FILE>===================================
;===============================================================================
;===================<ULTRA MOTIONS>==================================

[Command]
name = "CORE"
command = ~D, DF, F, c+z
Time = 12


;---------------
;Ultra Bakuryu
[Command]
name = "Ultra_Bakuryu"
command = ~D, DF, F, a+b+c
Time = 22

;---------------
;Ultra_Jumonji
[Command]
name = "Ultra_Jumonji"
command = ~D, DF, F, x+y+z
Time = 22

;===================<MYSTIC MOTIONS>===================
;Mystic Break
[Command]
name = "Mystic_Break"
command = F, D, DF,x+y
time = 32

[Command]
name = "Mystic_Break"
command = F, D, DF,y+z
time = 32

[Command]
name = "Mystic_Break"
command = F, D, DF,x+z
time = 32

;====================<HYPER MOTIONS>===================
;Homura
[Command]
name = "Homura"
command = B, D, DB,x+y
time = 32

[Command]
name = "Homura"
command = B, D, DB,y+z
time = 32

[Command]
name = "Homura"
command = B, D, DB,x+z
time = 32

;---------------
;Mystic Ice
[Command]
name = "MysticIce"
command = F, D, DF,x+y
time = 32

[Command]
name = "MysticIce"
command = F, D, DF,y+z
time = 32

[Command]
name = "MysticIce"
command = F, D, DF,x+z
time = 32

;---------------
;Mystic Thunder
[Command]
name = "MysticThunder"
command = B, D, DB,a+b
time = 32

[Command]
name = "MysticThunder"
command = B, D, DB,b+c
time = 32

[Command]
name = "MysticThunder"
command = B, D, DB,a+c
time = 32

;---------------
;Mystic Wind
[Command]
name = "MysticWind"
command = F, D, DF,a+b
time = 32

[Command]
name = "MysticWind"
command = F, D, DF,b+c
time = 32

[Command]
name = "MysticWind"
command = F, D, DF,a+c
time = 32

;---------------
;Mystic Earth
[Command]
name = "MysticEarth"
command = D, D,x+y
time = 32

[Command]
name = "MysticEarth"
command = D, D,y+z
time = 32

[Command]
name = "MysticEarth"
command = D, D,x+z
time = 32

;---------------
;Mystic Poison
[Command]
name = "MysticPoison"
command = D, D,a+b
time = 32

[Command]
name = "MysticPoison"
command = D, D,b+c
time = 32

[Command]
name = "MysticPoison"
command = D, D,a+c
time = 32

;---------------
;Rasetsujin
[Command]
name = "Rasetsujin"
command = ~D, DB, B, x+y
time = 32

[Command]
name = "Rasetsujin"
command = ~D, DB, B, y+z
time = 32

[Command]
name = "Rasetsujin"
command = ~D, DB, B, x+z
time = 32

;---------------
;Jumonji
[Command]
name = "Jumonji"
command = D, DF, F, x+y
time = 32

[Command]
name = "Jumonji"
command = D, DF, F, y+z
time = 32

;---------------
;Jumonji Level 1
[Command]
name = "Jumonji_2"
command = D, DF, F, x+z
time = 32

;---------------
;Utsusemi
[Command]
name = "HyperUtsusemi"
command = D, DB, B, a+b
time = 32

[Command]
name = "HyperUtsusemi"
command = D, DB, B, b+c
time = 32

[Command]
name = "HyperUtsusemi"
command = D, DB, B, a+c
time = 32

;---------------
;Bakuryu Level 1
[Command]
name = "Bakuryu_1"
command = D, DF, F, a+b
time = 32

[Command]
name = "Bakuryu_1"
command = D, DF, F, b+c
time = 32

;---------------
;Bakuryu Level 2
[Command]
name = "Bakuryu_2"
command = D, DF, F, a+c
time = 32

;====================<SUPER MOTIONS>===================
;Enryusho
[Command]
name = "Enryusho"
command = ~F, D, DF, a
time = 16

[Command]
name = "Enryusho"
command = ~F, D, DF, b
time = 16

[Command]
name = "Enryusho"
command = ~F, D, DF, c
time = 16

[Command]
name = "Enryusho"
command = ~F, D, DF, ~a
time = 16

[Command]
name = "Enryusho"
command = ~F, D, DF, ~b
time = 16

[Command]
name = "Enryusho"
command = ~F, D, DF, ~c
time = 16

;--------------------
;Utsusemi
[Command]
name = "Utsusemi"
command = ~B, D, DB, a
time = 20

[Command]
name = "Utsusemi"
command = ~B, D, DB, b
time = 20

[Command]
name = "Utsusemi"
command = ~B, D, DB, c
time = 20

[Command]
name = "Utsusemi"
command = ~B, D, DB, ~a
time = 20

[Command]
name = "Utsusemi"
command = ~B, D, DB, ~b
time = 20

[Command]
name = "Utsusemi"
command = ~B, D, DB, ~c
time = 20

;--------------------
;Ichimonji
[Command]
name = "Ichimonji"
command = ~D, DF, F, x
time = 16

[Command]
name = "Ichimonji"
command = ~D, DF, F, y
time = 16

[Command]
name = "Ichimonji"
command = ~D, DF, F, z
time = 16

[Command]
name = "Ichimonji"
command = ~D, DF, F, ~x
time = 16

[Command]
name = "Ichimonji"
command = ~D, DF, F, ~y
time = 16

[Command]
name = "Ichimonji"
command = ~D, DF, F, ~z
time = 16

;--------------------
;Tsumuji
[Command]
name = "Tsumuji"
command = ~B, D, DB, x
time = 20

[Command]
name = "Tsumuji"
command = ~B, D, DB, y
time = 20

[Command]
name = "Tsumuji"
command = ~B, D, DB, z
time = 20

[Command]
name = "Tsumuji"
command = ~B, D, DB, ~x
time = 20

[Command]
name = "Tsumuji"
command = ~B, D, DB, ~y
time = 20

[Command]
name = "Tsumuji"
command = ~B, D, DB, ~z
time = 20

;--------------------
;Rasetsujin
[Command]
name = "Rasetsujin_X"
command = D, DB, B, x
time = 10

[Command]
name = "Rasetsujin_Y"
command = D, DB, B, y
time = 10

[Command]
name = "Rasetsujin_Z"
command = D, DB, B, z
time = 10

;--------------------
;Rasen Kyaku
[Command]
name = "Rasen_KyakuA"
command = ~D, DB, B, a
time = 20

[Command]
name = "Rasen_KyakuB"
command = ~D, DB, B, b
time = 20

[Command]
name = "Rasen_KyakuC"
command = ~D, DB, B, c
time = 20

;--------------------
;Kagero
[Command]
name = "Kagero_a"
command = ~D, DF, F, a
Time = 12

[Command]
name = "Kagero_b"
command = ~D, DF, F, b
Time = 12

[Command]
name = "Kagero_c"
command = ~D, DF, F, c
Time = 12

;---------------------
;Ultimate Guard
[Command]
name = "Ultimate_Guard_a"
command = ~B,F, a
Time = 12

[Command]
name = "Ultimate_Guard_b"
command = ~B,F, b
Time = 12

[Command]
name = "Ultimate_Guard_c"
command = ~B,F, c
Time = 12

;---------------------
[Command]
name = "EXSpecial1"
command = ~D, DF, F, x+y
time = 16

[Command]
name = "EXSpecial1"
command = ~D, DF, F, y+z
time = 16

[Command]
name = "EXSpecial1"
command = ~D, DF, F, x+z
time = 16




[Command]
name = "EXSpecial2"
command = ~F, D, DF, x+y
time = 16

[Command]
name = "EXSpecial2"
command = ~F, D, DF, y+z
time = 16

[Command]
name = "EXSpecial2"
command = ~F, D, DF, x+z
time = 16




[Command]
name = "EXSpecial3"
command = ~B, D, DB, x+y
time = 20

[Command]
name = "EXSpecial3"
command = ~B, D, DB, y+z
time = 20

[Command]
name = "EXSpecial3"
command = ~B, D, DB, x+z
time = 20




[Command]
name = "EXSpecial4"
command = ~B, DB, D, DF, F, a+b
time = 20

[Command]
name = "EXSpecial4"
command = ~B, DB, D, DF, F, b+c
time = 20

[Command]
name = "EXSpecial4"
command = ~B, DB, D, DF, F, a+c
time = 20



[Command]
name = "Special5"
command = ~D, DB, B, ~c
time = 20


[Command]
name = "EXSpecial5"
command = ~D, DB, B, a+b
time = 20

[Command]
name = "EXSpecial5"
command = ~D, DB, B, b+c
time = 20

[Command]
name = "EXSpecial5"
command = ~D, DB, B, a+c
time = 20




[Command]
name = "EXSpecial7"
command = ~F, D, DF, a+b
time = 20

[Command]
name = "EXSpecial7"
command = ~F, D, DF, b+c
time = 20

[Command]
name = "EXSpecial7"
command = ~F, D, DF, a+c
time = 20

;-----------------------------
[Command]
name = "412p"
command = ~$D,DF,F, x
time = 16

[Command]
name = "412p"
command = ~$D,DF,F, y
time = 16

[Command]
name = "412p"
command = ~$D,DF,F, z
time = 16

[Command]
name = "412p"
command = ~$D,DF,F,~x
time = 16

[Command]
name = "412p"
command = ~$D,DF,F, ~y
time = 16

[Command]
name = "412p"
command = ~$D,DF,F, ~z
time = 16


[Command]
name = "412k"
command = ~$D,DF,F, a
time = 16

[Command]
name = "412k"
command = ~$D,DF,F, b
time = 16

[Command]
name=  "412k"
command = ~$D,DF,F, c
time = 16

[Command]
name = "412k"
command = ~$D,DF,F, ~a
time = 16

[Command]
name = "412k"
command = ~$D,DF,F, ~b
time = 16

[Command]
name = "412k"
command = ~$D,DF,F, ~c
time = 16




;======================<OTHER>=======================

[Command]
name = "highjump"
command = $D, $U
time = 15



;====================<DOUBLE TAP>====================

[Command]
name = "FF"
command = F, F
time = 10

[Command]
name = "BB"
command = B, B
time = 10



;=================<2/3 BUTTON COMBINATION>============

[Command]
name = "recovery"
command = x+y
time = 1

[Command]
name = "recovery"
command = x+z
time = 1

[Command]
name = "recovery"
command = y+z
time = 1

[Command]
name = "recovery"
command = a+x
time = 1

;---------------------------
; Guard Puch
[Command]
name = "guardpush"
command = x+y
time = 1

[Command]
name = "guardpush"
command = y+z
time = 1

[Command]
name = "guardpush"
command = x+z
time = 1

;---------------------------
[Command]
name = "pp"
command = z
time = 1

[Command]
name = "pp"
command = y
time = 1


[Command]
name = "kk"
command = b
time = 1

[Command]
name = "kk"
command = c
time = 1


;---------------------------
[Command]
name = "a+x"
command = a+x
time=1

[Command]
name = "b+y"
command = b+y
time = 1

[Command]
name = "c+z"
command = c+z
time = 1

;====================<BUTTON REMAPPING>====================

[Remap]
x = x
y = y
z = z
a = a
b = b
c = c
s = s


;====================<DEFAULT VALUES>====================

[Defaults]
command.time = 15
command.buffer.time = 1



;====================<SINGLE BUTTON>====================

[Command]
name = "a"
command = a
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "s"
command = s
time = 1



;==================<HOLD DIRECTION>==================

[Command]
name = "holdfwd"
command=/$F
time=1

[Command]
name = "holdback"
command = /$B
time = 1

[Command]
name = "holdup"
command = /$U
time=1

[Command]
name = "holddown"
command = /$D
time = 1


;====================<HOLD BUTTON>====================

[Command]
name = "holda"
command = /a
time = 1

[Command]
name = "holdb"
command = /b
time = 1

[Command]
name = "holdc"
command = /c
time = 1

[Command]
name = "holdx"
command = /x
time = 1

[Command]
name = "holdy"
command = /y
time = 1

[Command]
name = "holdz"
command = /z
time = 1

[Command]
name = "holdstart"
command = /s
time = 1

;-| Hold 2/3 Button Combination |-----------------------------------------------
[Command]
name = "hold_xy"
command = /x+y
time = 1

[Command]
name = "hold_xy"
command = /y+z
time = 1

[Command]
name = "hold_xy"
command = /x+z
time = 1

[Command]
name = "hold_ab"
command = /a+b
time = 1

[Command]
name = "hold_ab"
command = /b+c
time = 1

[Command]
name = "hold_ab"
command = /a+c
time = 1

;====================<DIRECTION>====================

[Command]
name = "fwd"
command = F
time = 1

[Command]
name = "back"
command = B
time = 1

[Command]
name = "up"
command = U
time = 1

[Command]
name = "down"
command = D
time = 1



;====================<RELEASE DIR>====================

[Command]
name = "rlsfwd"
command = ~$F
time = 1

[Command]
name = "rlsback"
command = ~$B
time = 1

[Command]
name = "rlsup"
command = ~$U
time = 1

[Command]
name = "rlsdown"
command = ~$D
time = 1



;====================<RELEASE BUTTON>====================

[Command]
name = "rlsx"
command = ~x
time = 1

[Command]
name = "rlsy"
command = ~y
time = 1

[Command]
name = "rlsz"
command = ~z
time = 1

[Command]
name = "rlsa"
command = ~a
time = 1

[Command]
name = "rlsb"
command = ~b
time = 1

[Command]
name = "rlsc"
command = ~c
time = 1

;==============================================================================================
;========================================<-1 STATES>===========================================
;==============================================================================================
[StateDef -1]

;##[a4b_-1_start.v20200523]##
;//==========================
;// add004-1-sctrls-start
;//==========================
;--- partner_standby
[state 0]
	type=selfstate
	value=190190
	ctrl=0
	trigger1=ctrl && numpartner && !ishelper && roundstate=2 && pos y=0
	trigger1=(sysfvar(4)>0) && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && (playerid(floor(sysfvar(0))),var(22)=4)
	ignorehitpause=1
;##Add.List01##
;//==========================
;// add004-1-sctrls-end
;//==========================
;##[a4b_-1_end]##




;===============================================================================
;================================< A.I >========================================
;===============================================================================

[State -1, AI Fall Recovery (Air)]
type = ChangeState
value = 5210
trigger1 = AILevel && NumEnemy
trigger1 = RoundState = 2 && Alive
trigger1 = StateNo = 5050 && CanRecover
trigger1 = vel y > 0 && pos y < -10
trigger1 = Random < (25 * (AILevel ** 2 / 64.0))

[State -1, AI Fall Recovery (Ground)]
type = ChangeState
value = 5200
trigger1 = AILevel && NumEnemy
trigger1 = RoundState = 2 && Alive
trigger1 = StateNo = 5050 && GetHitVar(fall.recover)
trigger1 = vel y > 0 && pos y >= -10
trigger1 = Random < (100 * (AILevel ** 2 / 64.0))

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
[State -1, AI Jump]
type = ChangeState
value = 40
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
trigger1 = StateType != A && ctrl
trigger1 = EnemyNear, MoveType = A && P2BodyDist x < 160 && EnemyNear, HitDefAttr = SC, AT

;-------------------------------------------------------------------------------
[State -1, AI Run]
type = ChangeState
value = IfElse(random <= 400,100,102)
triggerall = !Win
trigger1 = AILevel && NumEnemy
trigger1 = RoundState = 2 && StateType = S
trigger1 = ctrl && (StateNo != [100,106])
trigger1 = (EnemyNear, MoveType != A) && P2BodyDist x >= 160 && Random < (25 * (AILevel ** 2 / 64.0))

; Run Fwd
[State -1, AI Run Fwd]
type = ChangeState
value = IfElse(random <= 400,100,102)
triggerall = !Win
triggerall = AILevel
triggerall = statetype != A
triggerall = (!enemynear, NumProj) && (!enemynear, NumHelper)
triggerall = stateno != [100, 106]
triggerall = ctrl && random<300
trigger1 = FrontEdgeDist > 100
trigger1 = p2bodydist x >=50
trigger2 = P2MoveType != A
trigger3 = P2bodydist X > 200
trigger3 = P2MoveType = I
trigger3 = numtarget
trigger4 = enemynear,movetype!=A && p2bodydist x > 110
trigger5 = ctrl && (StateNo != [100,106])
trigger5 = (EnemyNear, MoveType != A) && P2BodyDist x >= 160 && Random < (25 * (AILevel ** 2 / 64.0))

; Run Fwd
[State -1, AI Run Fwd]
type = ChangeState
value = IfElse(random <= 400,100,20)
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = stateno !=[100,107]
triggerall = prevstateno !=[100,106]
triggerall = statetype != A
triggerall = ctrl
trigger1 = p2movetype != A
trigger1 = random <400
trigger1 = (p2bodydist x >= 120)
trigger2 = ctrl && random <200
trigger2 = p2bodydist x <=20
trigger2 = p2movetype = H

[State -1, AI Dash Backward]
type = ChangeState
value = IfElse(random <= 399,105,20)
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerAll = StateType = S
triggerAll = ctrl && (StateNo != [100,106]) && var(20) <= 150 && !var(26)
trigger1 = (EnemyNear, MoveType = A) && BackEdgeDist >= 80 && (P2BodyDist x = [80,120]) && (EnemyNear, vel x)
trigger1 = Random < (ifElse((EnemyNear, HitDefAttr = SC, AT), 150, 50) * (AILevel ** 2 / 64.0))
trigger2 = (P2BodyDist x = [0,80]) && BackEdgeBodyDist >= 80
trigger2 = EnemyNear, StateNo = 5120 && EnemyNear, AnimTime = -4 && Random < (750 * (AILevel ** 2 / 64.0))


;===========================================================================
; AI Guard
;===========================================================================
;--|-AI Defense-|-----------------------------------------------------------
[State -1, AI Guard]
type = changestate
value = 120
trigger1 = AIlevel && numenemy
trigger1 = roundstate = 2 && inguarddist
trigger1 = ctrl && (stateno != [120, 155])
trigger1 = !(enemynear, hitdefattr = SCA, AT) && (enemynear, time < 120)
trigger1 = statetype != A || p2statetype = A
trigger1 = random < (ifelse((p2stateno = [200, 699]), 300, ifelse((p2stateno = [1000, 2999]), 500, 1000)) * (AIlevel ** 2 / 64.0))

[State -1, AI Guard]
type = ChangeState
value = 120
triggerall = AILevel && numenemy&& (StateNo!=[120,155]) && !(enemynear,ctrl) && random < (450 * (AIlevel ** 2 / 64.0))
triggerall = Ctrl||stateno = 21
triggerall =enemynear,Movetype=A && !(enemynear,hitdefattr=SCA,AT)
trigger1 = inguarddist

;---------------------------------------------------------------------------
;AI Guard (Standing)
[State -1, AI Guard (Standing)]
type = ChangeState
value = 130
triggerall = !Win
triggerall = AILevel ;&& numenemy
triggerall = roundstate = 2
triggerall = p2statetype != C
triggerall = InGuardDist && Random < (200 * (AILevel ** 2 / 64.0))
triggerall = (ctrl && statetype != A) || (stateno = [100,102]) || (stateno = 105)
trigger1 = (enemynear, NumProj) && (enemynear, NumHelper)
trigger2 = enemynear,HitDefAttr = SCA, NA,SA,HA

;---------------------------------------------------------------------------
;AI Guard (Crouching)
[State -1, AI Guard (Crouching)]
type = ChangeState
value = 131
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = p2statetype = C
triggerall = inguarddist && Random < (200 * (AILevel ** 2 / 64.0))
triggerall = (ctrl && statetype != A) || (stateno = [100,102]) || (stateno = 105)
trigger1 = (enemynear, NumProj) && (enemynear, NumHelper)
trigger2 = enemynear,HitDefAttr = SCA, NA,SA,HA
;---------------------------------------------------------------------------
;AI Guard (Air)
[State -1, AI Guard (Air)]
type = ChangeState
value = 132
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = InGuardDist
triggerall = ctrl && Random < (200 * (AILevel ** 2 / 64.0))
triggerall = statetype = A
trigger1 = (enemynear, NumProj) && (enemynear, NumHelper)
trigger2 = enemynear,HitDefAttr = SCA, NA,SA,HA

;---------------------------------------------------------------------------
[State -1, AI Defence from projectiles] ; Defence from projectiles
type = ChangeState
value = 130
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = (StateType != L)
triggerall = (enemy, NumProj >= 1) && (enemy, NumHelper >= 1)
triggerall = statetype != C
triggerall = statetype = S
triggerall = statetype != A
triggerall = StateNo != 40
triggerall = inguarddist
trigger1 = ctrl && Random < (600 * (AILevel ** 2 / 64.0))


[State -1, AI Crouch Defence]
type = ChangeState
value = 131
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = (enemy, NumProj >= 1) && (enemy, NumHelper >= 1)
triggerall = statetype = C
triggerall = statetype != S
triggerall = statetype != A
triggerall = inguarddist
trigger1 = ctrl && Random < (600 * (AILevel ** 2 / 64.0))


[State -1, AI Jump Defence]
type = ChangeState
value = 132
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = inguarddist
triggerall = (enemy, NumProj >= 1) && (enemy, NumHelper >= 1)
triggerall = statetype != C
triggerall = statetype != S
triggerall = statetype = A
trigger1 = ctrl && Random < (600 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
[State -1, AI Taunt]
type = ChangeState
value = 195
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = StateType != A && Life >= 0.5 * LifeMax
triggerall = (EnemyNear, Life) <= 0.5 * (EnemyNear, LifeMax)
trigger1 = ctrl
trigger1 = P2Dist x >= 160 && !(EnemyNear, ctrl)
trigger1 = (EnemyNear, MoveType = H) && (EnemyNear, HitFall) && Random < (50 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Push Guard Stand
[State -1, AI Guard Push stand]
type = ChangeState
value = 160
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = statetype = S
triggerall = p2bodydist x =[0,45]
trigger1 = stateno = [150,153]
trigger1 = random<575

;---------------------------------------------------------------------------
[State -1, AI Guard Push crouch]
type = ChangeState
value = 161
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = statetype = C
triggerall = p2bodydist x =[0,45]
trigger1 = stateno = [150,153]
trigger1 = random<675

;---------------------------------------------------------------------------
[State -1, AI Guard Push aerial]
type = ChangeState
value = 162
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = statetype = A
triggerall = p2bodydist x =[0,45]
trigger1 = stateno = [154,155]
trigger1 = random<575

;---------------------------------------------------------------------------
[State -1, AI Roll Forward]
type = ChangeState
value = 710
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
trigger1 = StateType != A
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger1 = (ctrl || (StateNo = [100,101])) ;&& var(20) <= 164 && !var(26)
trigger1 = (EnemyNear, MoveType = A) && !(EnemyNear, HitDefAttr = SCA, AT) && (P2BodyDist x = [92,122])

;---------------------------------------------------------------------------
[State -1, AI Dodge]
type = ChangeState
value = 700
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = StateType != A
triggerall = P2StateType != L
triggerall = stateno != [120,159]
triggerall = stateno != [4000,4199]
triggerall = prevstateno != [800,830]
triggerall = prevstateno != [150,159]
triggerall = prevstateno != [4000,4199]
triggerall = prevstateno != [5000,5199]
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
trigger1 = P2bodydist X <= 50
trigger1 = P2MoveType = I
trigger1 = ctrl || stateno = 21 || (stateno = 100 && animelemtime(2) > 1) || stateno = 101
trigger1 = Random <= 40
trigger2 = P2bodydist X <= 50
trigger2 = P2MoveType = A
trigger2 = ctrl || stateno = 21 || (stateno = 100 && animelemtime(2) > 1) || stateno = 101
trigger2 = Random <= 250
trigger3 = (enemy, NumProj >= 1) && (enemy, NumHelper >= 1)
trigger3 = ctrl && Pos X <= 50 && random <=250
trigger4 = Random < (50 * (AIlevel ** 2 / 64.0))
trigger4 = (ctrl || (StateNo = [100,101])) && var(20) <= 164 && !var(26)
trigger4 = (EnemyNear, MoveType = A) && !(EnemyNear, HitDefAttr = SCA, AT) && (P2BodyDist x = [0,60])
ignorehitpause = 0

;---------------------------------------------------------------------------
[State -1, AI Zero Counter]
type = ChangeState
value = 750
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
trigger1 = StateNo = 150 || StateNo = 152
trigger1 = RoundState = 2 && StateType != A
trigger1 = Power >= 500 ;&& var(20) <= 60
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger1 = (P2BodyDist x = [0,50]) ;&& (Life < 0.5 * LifeMax)

[State -1, AI Air Zero Counter]
type = ChangeState
value = 751
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
trigger1 = StateNo = 153
trigger1 = RoundState = 2 && StateType = A
trigger1 = Power >= 500 ;&& var(20) <= 60
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger1 = (P2BodyDist x = [0,50]) ;&& (Life < 0.5 * LifeMax)

;-------------------------------------------------------------------------------
[State -1, AI Power Charge]
type = ChangeState
value = 730
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
trigger1 = Power < const(data.power) && !var(20)
trigger1 = ctrl && Power < const(data.power) && Power < PowerMax && !var(20) && PrevStateNo != 5120
trigger1 = !InGuardDist && P2BodyDist x >= 160 && Random < (50 * (AILevel ** 2 / 64.0))
trigger1 = enemynear,movetype!=A && p2dist x>=220 && !inguarddist
trigger1 = (!enemy, NumProj)&&(!enemy, NumHelper)

;-------------------------------------------------------------------------------
[State -1, AI Throw - Tomoe Nage]
type = ChangeState
value = ifelse(random<333,800,ifelse(random<500,810,820))
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = stateno!=100
triggerall = P2StateType != A && P2StateType != L && P2MoveType != H
triggerall = (P2BodyDist x = [-5,10])&& (p2bodydist y=[-65,5])
trigger1 = ctrl && Random < (125 * (AIlevel ** 2 / 64.0))
trigger2 = ctrl && (P2StateNo = [120,140]) && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = ctrl && (p2stateno!=[120,155]) && random<500
trigger4 = ctrl && enemynear,moveguarded && random<200


[State -1, AI Air Throw - Shoten]
type = ChangeState
value = 850
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = (StateType = A) && (MoveType != H) && (p2stateno != [800,899])
triggerall = (p2life != 0) && (p2MoveType != H)
triggerall = (p2BodyDist X <= 12) && (p2BodyDist Y = [-10,10]) && (ctrl = 1) && (random >= 500)
trigger1 = P2Statetype = A

;-------------------------------------------------------------------------------

[State -1, AI Follow Up]
type = ChangeState
value = 7000
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
trigger1 = statetype != A
trigger1 = stateno = 240 && movehit && P2statetype = A
trigger2 = stateno = 245 && movehit
trigger3 = statetype != A
trigger3 = stateno = 445 && movehit

[State -1, AI Sjump]
type = ChangeState
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = (StateType != A) && Ctrl && (Random <= 5) && (enemynear, numproj = 0)
trigger1 = (P2bodydist X >= 130)
value = IfElse(random <= 399,7000,40)

[State -1, AI Super Jump 2]
type = ChangeState
value = IfElse(random <= 399,7000,40)
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = statetype != A
triggerall = Ctrl && random <= 20
triggerall = stateno != 100 && pos y = 0 && ctrl
triggerall = (p2bodydist y = [-300,-70])
trigger1 = enemy,vel y < -1
trigger1 = p2bodydist x = [ 20, 50]
trigger1 = p2movetype != A
trigger1 = p2statetype = S
trigger2 = enemy,vel y < -1
trigger2 = p2movetype = H && (p2stateno = 5040 || p2stateno = 5200 || p2stateno = 5210)
trigger2 = p2bodydist x <= 30
trigger3 = P2MoveType != H
trigger3 = P2BodyDist Y < -90
trigger3 = enemy,vel y <= 0

[State -1,AI Veladd]
type = null;Veladd
triggerall = !Win
triggerall = AILevel
triggerall = roundstate = 2 && numenemy
triggerall = prevstateno = 7000 ; the superjumo state
trigger1 = enemy,vel y < -1
trigger1 = p2bodydist x = [0,150]
trigger1 = random <= 1000 && p2movetype != A
trigger2 = p2statetype = A
trigger2 = random < 1000; jump state
x = .4 ; maybe you need to modify these valu

;---------------------------------------------------------------------------
;Stand Light Punch
[State -1, AI Standing Light Punch]
Type = ChangeState
Value = 200
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != C
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = P2bodydist X = [-5,50]
triggerall = p2bodydist y = [-95,5]
triggerall = (enemynear,const(size.head.pos.y)<=-75)
trigger1 = ctrl && random <= 450
trigger2 = stateno = 230 && movehit && random <= 700
trigger3 = stateno = 430 && movehit && random <= 700
trigger4 = random <= 450
trigger4 = ctrl && (stateno = 100 && animelemtime(2) >1)
trigger4 = P2StateType = S
trigger5 = ctrl || (StateNo = [100,103])&& Random < (100 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Lights Kiks
[State -1, AI Lights Kiks]
type = ChangeState
value = ifelse(random<400,ifelse((enemynear,const(size.head.pos.y)<=-20),230,430),430)
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
;triggerall = enemynear,statetype != A
triggerall = !(enemynear,hitfall)
triggerall = P2bodydist Y = [-35,5]
trigger1 = P2bodydist X = [-5,65]
trigger1 = ctrl && random  <= 650
trigger2 = random <= 150 && (stateno = 100 && animelemtime(2) >1)
trigger2 = P2bodydist X = [0,60]
trigger2 = P2StateType = S
trigger2 = numtarget
trigger2 = Random = [350,620]
trigger3 = p2bodydist X <= 55
trigger3 = ctrl || (StateNo = [100,103])&& Random < (350 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Crouching Light Punch
[State -1, AI Crouching Light Punch]
Type = ChangeState
Value = 400
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != A
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = (p2bodydist X = [0,60]);&&((enemynear,pos y+enemynear,const(size.head.pos.y))=[enemynear,const(size.head.pos.y),5])
;triggerall = p2bodydist y = [-95,5]
triggerall = (enemynear,const(size.head.pos.y)<=-20)
trigger1 = ctrl && random <= 650
trigger2 = stateno = 230 && movehit && random <= 400
trigger3 = stateno = 430 && movehit && random <= 400
trigger4 = random <= 750
trigger4 = ctrl && (stateno = 100 && animelemtime(2) >1)
trigger4 = P2bodydist X = [0,65]
trigger4 = P2StateType = S
trigger5 = ctrl || (StateNo = [100,103])&& Random < (150 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Standing Medium Punch
[State -1, AI Standing Medium Punch]
type = ChangeState
value = 210
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != C
triggerall = enemynear,statetype != L
triggerall = (p2bodydist x <=65) && (p2bodydist y = [-95,5])
triggerall = (enemynear,const(size.head.pos.y)<=-50)
trigger1 = ctrl && random <= 50
trigger2 = stateno = 200 && movehit && random <= 500
trigger3 = stateno = 400 && movehit && random <= 500
trigger4 = stateno = 230 && movehit && random <= 600 && P2movetype != A

;---------------------------------------------------------------------------
;Standing Medium Punch - Foward
[State -1, AI Standing Medium Punch - Forward]
type = ChangeState
value = 215
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != C
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X = [50,80]
triggerall = p2bodydist y = [-90,5]
triggerall = (enemynear,const(size.head.pos.y)<=-65)
trigger1 = ctrl && random <= 50
trigger2 = stateno = 210 && movehit && Random < (500 * (AILevel ** 2 / 64.0))
trigger3 = stateno = 240 && movehit && Random < (450 * (AILevel ** 2 / 64.0)) && P2movetype != A

;---------------------------------------------------------------------------
;Hard Punch Far
[State -1, AI Standing Strong Punch]
type = ChangeState
value = 220
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X = [100,150]
triggerall = p2bodydist y = [-70,5]
triggerall = (enemynear,const(size.head.pos.y)<=-50)
trigger1 = ctrl && Random < (80 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 210) && movecontact && random <= 500
trigger3 = (stateno = 410) && movehit && random <= 500 && P2movetype != A

;---------------------------------------------------------------------------
;Standing Hard Punch
[State -1, AI Standing Strong Punch Close]
Type = ChangeState
Value = 225
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != A
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X <=78
triggerall = p2bodydist y = [-70,5]
triggerall = (enemynear,const(size.head.pos.y)<=-30)
trigger1 = ctrl && Random < (50 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 210) && movehit && random <= 500
trigger3 = (stateno = 440) && movehit && random <= 200 && P2movetype != A
trigger4 = (stateno = 410) && movehit && random <= 500

;---------------------------------------------------------------------------
;Standing Medium Kick
[State -1, AI Standing Medium Kick]
Type = ChangeState
Value = 240
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = p2bodydist X = [-5,55]
triggerall = p2bodydist y = [-110,5]
triggerall = (enemynear,const(size.head.pos.y)<=-60)
trigger1 = ctrl && Random < ifelse(P2statetype = A,(250 * (AILevel ** 2 / 64.0)),(50 * (AILevel ** 2 / 64.0)))
trigger2 = stateno = 200 && movehit && Random < (350 * (AILevel ** 2 / 64.0))
trigger3 = stateno = 230 && movehit && Random < (350 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Standing Medium Kick
[State -1, AI Standing Medium Kick 2]
Type = ChangeState
Value = 245
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != C
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X =[20,70]
triggerall = p2bodydist y = [-115,5]
triggerall = (enemynear,const(size.head.pos.y)<=-75)
trigger1 = ctrl && Random < ifelse(P2statetype = A,(250 * (AILevel ** 2 / 64.0)),(50 * (AILevel ** 2 / 64.0)))
trigger2 = stateno = 240 && movehit && Random < (450 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Standing Gun
[State -1, AI Standing Strong Kik]
Type = ChangeState
Value = 250
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X =[40,100]
triggerall = p2bodydist y = [-95,5]
triggerall = (enemynear,const(size.head.pos.y)<=-40)
trigger1 = ctrl && Random < (100 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 210) && movehit && random <= 500
trigger3 = stateno = 240 && movehit && Random < (450 * (AILevel ** 2 / 64.0)) && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 500
trigger5 = (stateno = 440) && movehit && random <= 500

;---------------------------------------------------------------------------
 ;Crouching Medium Punch
[State -1, AI Crouching Medium Punch]
Type = ChangeState
Value =  410
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != A
triggerall = enemynear,statetype != L
triggerall = p2bodydist X = [0,70]
triggerall = p2bodydist y = [-95,5]
;triggerall = (enemynear,const(size.head.pos.y)<=-20)
trigger1 = enemynear,statetype = S
trigger1 = ctrl && random <= 100
trigger2 = stateno = 400 && movehit && random <= 600
trigger3 = stateno = 430 && movehit && random > 600
trigger4 = stateno = 200 && movecontact && random <= 600
trigger5 = stateno = 230 && movehit && random > 600
trigger6 = stateno = 200 && moveguarded && random <= 300

;---------------------------------------------------------------------------
 ;Crouching Hard Punch
[State -1, AI Crouching Hard Punch]
Type = ChangeState
Value = 420
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != A
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
;&&((enemynear,pos y+enemynear,const(size.head.pos.y))=[enemynear,const(size.head.pos.y),5])
triggerall = p2bodydist y = [-50,5]
trigger1 = (p2bodydist X = [50,140])
trigger1 = enemynear,statetype = S
trigger1 = ctrl && random <= 40
trigger2 = (stateno = 210) && movehit && random <= 600
trigger3 = (stateno = 440) && movehit && random <= 600 && P2movetype != A
trigger4 = (stateno = 410) && movehit && random <ifelse(hitcount>1,300,600)

;---------------------------------------------------------------------------
;Crouching Medium Kick
[State -1, AI Crouching Medium Kick]
Type = ChangeState
Value =  440
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = p2bodydist y = [-45,5]
trigger1 = (p2bodydist X <=65);&&((enemynear,pos y+enemynear,const(size.head.pos.y))=[enemynear,const(size.head.pos.y),5])
trigger1 = ctrl && random <= 50
trigger2 = stateno = 400 && movehit && random > 600
trigger3 = stateno = 430 && movehit && random <= 600
trigger4 = stateno = 230 && movecontact && random <= 600
trigger5 = stateno = 230 && moveguarded && random <= 300

;---------------------------------------------------------------------------
;Kidachi Harai
[State -1, AI Crouch Medium Kik - Kidachi Harai]
Type = ChangeState
Value = 445
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != C
triggerall = enemynear,statetype != L
triggerall = (p2bodydist X = [-10,40])
triggerall = p2bodydist y = [-90,5]
triggerall = (enemynear,const(size.head.pos.y)<=-45)
trigger1 = ctrl && Random < ifelse(P2statetype = A,(250 * (AILevel ** 2 / 64.0)),(50 * (AILevel ** 2 / 64.0)))
trigger2 = stateno = 200 && movehit && random <= 600
trigger3 = stateno = 230 && movehit && random <= 600
trigger4 = stateno = 400 && movehit && random <= 600
trigger5 = ctrl || (StateNo = [100,103])&& Random < (50 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Crouching Gun
[State -1, AI Crouching Strong Kik]
Type = ChangeState
Value = 450
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != A
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X = [40,110]
triggerall = p2bodydist y = [-35,5]
;triggerall = (enemynear,const(size.head.pos.y)<=-20)
trigger1 = ctrl && Random < (80 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 210) && movehit && Random < (ifElse(P2Dist x < 0, 250, 50) * (AILevel ** 2 / 64.0))
trigger3 = (stateno = 440) && movehit && random <= 400 && P2movetype != A
trigger4 = (stateno = 410) && movehit && random <ifelse(hitcount>1,300,600)


;---------------------------------------------------------------------------
;Jumping Light Punch
[State -1, AI Jumping Light Punch]
type = ChangeState
value = 600
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = p2bodydist X <= 45
triggerall = p2bodydist y = [-50,5]
trigger1 = ctrl && Random < 300
trigger2 = prevstateno = 1600 && Random < (250 * (AILevel ** 2 / 64.0))
;trigger2 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))

[State -1, AI Jumping Light Punch]
type = ChangeState
value = 605
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = p2bodydist X <= 45
triggerall = p2bodydist y = [-70,-5]
trigger1 = ctrl && Random < 300
trigger2 = prevstateno = 1600 && Random < (250 * (AILevel ** 2 / 64.0))
;trigger2 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Jumping Medium Punch
[State -1, AI Jump Medium Punch]
type = ChangeState
value = 610
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
trigger1 = p2bodydist X <= 70
trigger1 = p2bodydist y = [-80,30]
trigger1 = ctrl && random <= 50
trigger2 = (stateno = [600,605]) && movehit && Random >= 850
trigger3 = (stateno = 645) && movehit && Random < 850

;---------------------------------------------------------------------------
;Jumping Hard Punch
[State -1, AI Jumping Strong Punch]
type = ChangeState
value = 620
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = pos y <-50
trigger1 = (p2bodydist X = [30,140]) && (p2bodydist y = [-30,5])
trigger1 = ctrl && Random < (ifElse(Vel x > 0, 200, 50) * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 610) && movehit && Random < 350 * (AILevel ** 2 / 64.0)
trigger3 = (stateno = 640) && movehit && Random < 350 * (AILevel ** 2 / 64.0)
trigger4 = (p2bodydist X = [30,140]) && (p2bodydist y = [-30,5])
trigger4 = prevstateno = 1600 && Random < (250 * (AILevel ** 2 / 64.0))
;trigger4 = ctrl && Random < (250 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Jump Light Kick
[State -1, AI Jumping Light Kick]
type = ChangeState
value = 630
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = p2bodydist X <= 40
triggerall = p2bodydist y = [-45,10]
trigger1 = ctrl && Random < (ifElse(Vel x > 0, 400, 250) * (AILevel ** 2 / 64.0))
trigger2 = prevstateno = 1600 && time>2 && Random < (250 * (AILevel ** 2 / 64.0))
;trigger2 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Jump Medium Kick
[State -1, AI Jumping Medium Kick]
type = ChangeState
value = 640
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = p2bodydist X <= 50
trigger1 = p2bodydist y = [-65,5]
trigger1 = ctrl && random <= 50
trigger2 = (stateno = 600) && movehit && Random < 850
trigger3 = (stateno = 630) && movehit && Random < 850

;---------------------------------------------------------------------------
;Jump Axe Kick
[State -1, AI Jumping Medium Kick]
type = ChangeState
value = 645
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = p2bodydist X <= 50
triggerall = p2bodydist y = [-95,-60]
trigger1 = ctrl && random <= 50
trigger2 = (stateno = 605) && movehit && Random < 650 * (AILevel ** 2 / 64.0)
trigger3 = (stateno = 630) && movehit && Random < 150 * (AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
;Air Gun - Diagonal
[State -1, AI Air Gun - Diagonal]
type = ChangeState
value = 650
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = pos Y <-65
triggerall = p2bodydist X <= 100
triggerall = p2bodydist y = [-9,60]
trigger1 = ctrl && Random < (ifElse(Vel x > 0, 100, 50) * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [610,615]) && movehit && Random < 300 * (AILevel ** 2 / 64.0)
trigger3 = (stateno = 640) && movehit && Random < 550 * (AILevel ** 2 / 64.0)
trigger4 = prevstateno = 1600
trigger4 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Air Gun - Down
[State -1, AI Air Gun - Down]
type = ChangeState
value = 652
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = p2bodydist X = [-60,-10]
triggerall = p2bodydist y = [50,100]
triggerall = pos Y <-65
trigger1 = ctrl && Random < 450 * (AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
;Air Gun - Straight
[State -1, AI Air Gun - Straight]
type = ChangeState
value = 653
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = p2statetype != L
triggerall = enemynear,statetype = A
triggerall = pos Y <-65
triggerall = p2bodydist X <= 120
triggerall = p2bodydist y = [-65,-10]
trigger1 = ctrl && Random < 100 * (AILevel ** 2 / 64.0)
trigger2 = (stateno = 610) && movehit && Random < 650 * (AILevel ** 2 / 64.0)
trigger3 = (stateno = 645) && movehit && Random < 650 * (AILevel ** 2 / 64.0)
trigger4 = prevstateno = 1600 && Random < (250 * (AILevel ** 2 / 64.0))
;trigger4 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Ultimate_Guard
[State -1, AI Ultimate_Guard]
type = ChangeState
value = IfElse(random <= 499,1700,IfElse(random <= 499,1710,1720))
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X <=75
trigger1 = P2MoveType = I
trigger1 = ctrl || stateno = 21 || (stateno = 100 && animelemtime(2) > 1) || stateno = 101
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger2 = P2MoveType = A
trigger2 = ctrl || stateno = 21 || (stateno = 100 && animelemtime(2) > 1) || stateno = 101
trigger2 = Random < (300 * (AILevel ** 2 / 64.0))
;trigger3 = (enemy, NumProj >= 1) && (enemy, NumHelper >= 1)
;trigger3 = ctrl && Pos X <= 50 && random <=250
ignorehitpause = 0

;---------------------------------------------------------------------------
;Ichimonji
[State -1, AI Ichimonji]
type = ChangeState
value = 1000
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = helper(1005),stateno != 1005
triggerall = p2bodydist X >70
triggerall = p2bodydist y = [-85,5]
triggerall = (enemynear,const(size.head.pos.y)<=-40)
trigger1 = (ctrl || StateNo = 52 || (StateNo = [100,101])) && Random < (25 * (AILevel ** 2 / 64.0))
trigger2 = (ctrl || StateNo = 52 || (StateNo = [100,101]))
trigger2 = EnemyNear, StateNo = 195 && Random < (50 * (AILevel ** 2 / 64.0))
trigger3 = (stateno = 210) && movehit && Random < (50 * (AILevel ** 2 / 64.0))
trigger4 = (stateno = 410) && movehit && Random < (50 * (AILevel ** 2 / 64.0))
trigger5 = (stateno = 440) && movehit && Random < (50 * (AILevel ** 2 / 64.0))
trigger6 = (enemynear,stateno = [1215,1217]) ;&& NumHelper(1210) = 0
trigger6 = Ctrl && Random < (100 * (AILevel ** 2 / 64.0))
trigger7 = (stateno = [220,224]) && movecontact && Time>8 && Random < (30 * (AILevel ** 2 / 64.0))
trigger8 = (stateno = 420) && movehit && Time>6&& Random < (30 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Ichimonji - Midair
[State -1, AI Air Ichimonji]
type = ChangeState
value = 1050
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype = A && roundstate = 2
triggerall = Numhelper(1060)= 0
triggerall = pos Y <-100
trigger1 = p2bodydist X >-35
trigger1 = p2bodydist y >-55
trigger1 = ctrl && Random < (250 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 610) && movehit && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = (stateno = 640) && movehit && Random < (350 * (AILevel ** 2 / 64.0))
trigger4 = prevstateno = 1600 && Random < (250 * (AILevel ** 2 / 64.0))
;trigger4 = ctrl && Random < (250 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Enryusho
[State -1, AI Enryusho]
type = ChangeState
value = 1100
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = (p2bodydist x = [95,110])||(p2bodydist x = [180,190])||(p2bodydist x = [255,275])
triggerall = (enemy,name!="Gill")
triggerall = (enemy,name!="Ghost Rider")
triggerall = (enemy,name!="Pyron")
trigger1 = Ctrl && Random < (300 * (AILevel ** 2 / 64.0))
trigger2 = enemynear, movetype = H
trigger2 = Ctrl && Random < (150 * (AILevel ** 2 / 64.0))
trigger3 = (enemynear,stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = Ctrl && Random < (200 * (AILevel ** 2 / 64.0))
trigger4 = (stateno = [220,224]) && movecontact && Time>8 && Random < (30 * (AILevel ** 2 / 64.0))
trigger5 = (stateno = 420) && movehit && Time>6&& Random < (30 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Tsumuji
[State -1, AI Tsumuji]
type = ChangeState
value = 1200
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = p2stateno !=1205
triggerall = enemynear,statetype != L
;triggerall = !(enemynear,hitfall)
triggerall = (enemynear,stateno != [1215,1217])
triggerall = (P2BodyDist x = [10,120])&&(p2bodydist y = [-85,5])
triggerall = (enemynear,const(size.head.pos.y)<=-40)
trigger1 = (ctrl || StateNo = 52 || (StateNo = [100,101]))
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 210) && movehit && Random < (50 * (AILevel ** 2 / 64.0))
trigger3 = (stateno = 410) && movehit && Random < (50 * (AILevel ** 2 / 64.0))
trigger4 = (stateno = 440) && movehit && Random < (50 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Rasetsujin
[State -1, AI Rasetsujin]
type = ChangeState
value = 1300
triggerall = var(10) = 0 || var(10) = 1
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X = [30,120]
triggerall = p2bodydist y = [-110,50]
trigger1 = ctrl && Random < (ifelse((enemynear,Movetype = A),300,100) * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [210,215]) && movehit && random <= 50
trigger3 = (stateno = [240,245]) && movehit && random <= 50
trigger4 = (stateno = [410,415]) && movehit && random <= 50
trigger5 = (stateno = [440,445]) && movehit && random <= 50
trigger6 = stateno = 440 || stateno = 210
trigger6 = movecontact
trigger6 = random >= ifelse((enemynear,Movetype = A),99,999);ifelse((var(59)<4&&life<300),899,999))
trigger7 = stateno = 410 && time >= 18
trigger7 = movecontact >= 2
trigger7 = random >= ifelse((life<300),99,999);ifelse((var(59)<4&&life<300),399,999))
trigger8 = (Ctrl)
trigger8 = (enemynear, stateno = [2010,2012]) && enemynear, movetype = H
trigger8 = random >= ifelse((life<300),99,999);ifelse((var(59)<4&&life<300),399,499))
trigger9 = (enemynear,stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger9 = Ctrl && Random < (600 * (AILevel ** 2 / 64.0))
trigger10 = ctrl || (StateNo = [100,103])&& Random < (50 * (AILevel ** 2 / 64.0))

;Rasetsujin z
[State -1, AI Rasetsujin z]
type = ChangeState
value = 1300
triggerall = var(10) = 2
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = p2bodydist X = [50,140]
triggerall = p2bodydist y = [-110,50]
trigger1 = ctrl && Random < (ifelse((enemynear,Movetype = A),300,100) * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [210,215]) && movehit && random <= 50
trigger3 = (stateno = 240) && movehit && random <= 50 && P2movetype != A
trigger4 = (stateno = [410,415]) && movecontact && random <= 50
trigger5 = (stateno = 440) && movehit && random <= 50
trigger6 = stateno = 440 || stateno = 210
trigger6 = movecontact
trigger6 = random >= ifelse((life<300),99,999);ifelse((var(59)<4&&life<300),899,999))
trigger7 = stateno = 410 && time >= 18
trigger7 = movecontact >= 2
trigger7 = random >= ifelse((life<300),99,999);ifelse((var(59)<4&&life<300),399,999))
trigger8 = (Ctrl)
trigger8 = (enemynear, stateno = [2010,2012]) && enemynear, movetype = H
trigger8 = random >= ifelse((life<300),99,999);ifelse((var(59)<4&&life<300),399,499))
trigger9 = (enemynear,stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger9 = Ctrl && Random < (500 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Rasen_Kyaku (Weak)
[State -1, AI Rasen Kyaku]
type = ChangeState
value = 1400
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = roundstate = 2
triggerall = p2statetype != L && !(enemynear,hitfall)
triggerall = p2bodydist X = [-10,100]
triggerall = p2bodydist y = [-100,5]
triggerall = !(enemynear, vel Y <0)
triggerall = (enemynear,const(size.head.pos.y)<=-70)
trigger1 = ctrl && Random < (100 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = 215) && movehit && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = (stateno = 240) && movehit && random <= 100 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 100
trigger5 = (stateno = 440) && movehit && random <= 100
trigger6 = (stateno = 645) && movehit && random <= 100
trigger7 = (stateno = 610) && movehit && Random < (150 * (AILevel ** 2 / 64.0))
trigger8 = prevstateno = 1600 && Random < (150 * (AILevel ** 2 / 64.0))
trigger9 = ctrl || (StateNo = [100,103])&& Random < (50 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------------
;Kagero
[State -1, AI Kagero]
type = ChangeState
value = IfElse(random <= 499,1500,IfElse(random <= 499,1520,1530))
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
triggerall = p2bodydist X = [20,200]
triggerall = P2statetype != L
trigger1 = Ctrl && Random < (50 * (AILevel ** 2 / 64.0))
trigger2 = Ctrl && enemynear, movetype = A && Random < (100 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Utsusemi
[State -1, AI Utsusemi]
type = ChangeState
value = 1600
triggerall = !Win
triggerall = AILevel && numenemy
triggerall = statetype != A && roundstate = 2
trigger1 = Ctrl && Random < (100 * (AILevel ** 2 / 64.0))
trigger1 = p2bodydist x >0
trigger2 = Ctrl && enemynear, movetype = A && Random < (50 * (AILevel ** 2 / 64.0))
trigger2 = p2bodydist x <60

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;CORE
[State -1, AI Core]
type = ChangeState
value = 6000
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = power >= 3000
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = numhelper(6050)=0
triggerall = p2bodydist X >10
triggerall = p2bodydist y = [-90,5]
trigger1 = ctrl && Random < (300 * (AILevel ** 2 / 64.0))
trigger2 = hitdefattr = SC, NA  && random <= 55*(AILevel ** 2 / 64.0)
trigger3 = (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = ctrl && random <= 900*(AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
[State -1, AI Ultra Bakuryusho Level 3]
type = ChangeState
value = 3900
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 3000
triggerall = numhelper(3905) = 0
triggerall = statetype != A
triggerall = (enemy,name!="Gill")
triggerall = (enemy,name!="Ghost Rider")
triggerall = (enemy,name!="Pyron")
triggerall = p2bodydist X >90
trigger1 = ctrl && Random < (200 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [210,215]) && movehit && random <= 50
trigger3 = (stateno = 240) && movehit && random <= 50 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 50
trigger5 = (stateno = 440) && movehit && random <= 50
trigger6 = stateno = 440 || stateno = 210
trigger6 = movehit && random <= 30
trigger7 = stateno = 410 && time >= 18
trigger7 = movehit >= 2 && random <= 30
trigger8 = hitdefattr = SC, NA  && random <= 30
trigger9 = (p2bodydist x = [90,120]) && enemynear, movetype = A && enemynear, statetype = A
trigger9 = ctrl && random <= 30
trigger10 = (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger10 = ctrl && Random < (250 * (AILevel ** 2 / 64.0))
trigger11 = (stateno = [220,224]) && movecontact && Time>8 && Random < (30 * (AILevel ** 2 / 64.0))
trigger12 = (stateno = 420) && movehit && Time>6&& Random < (30 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
[State -1, AI Ultra Jumonji Level 3]
type = ChangeState
value = 3500
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 3000
triggerall = numhelper(3510) = 0
triggerall = (p2bodydist x >120)&&(p2bodydist Y = [160,5])
trigger1 = (ctrl || StateNo = 52 || (StateNo = [100,101])) && Random < (200 * (AILevel ** 2 / 64.0))
trigger2 = stateno = 240 || stateno = 210 && movehit > 0
trigger2 = Random < (150 * (AILevel ** 2 / 64.0))
trigger3 = (enemynear, stateno = [1215,1217]) ;&& NumHelper(1210) = 0
trigger3 = ctrl && Random < (450 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
[State -1, AI Jumonji Level 2]
type = ChangeState
value = 3050
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 2000
triggerall = numhelper(3060) = 0
triggerall = (p2bodydist x >120)
trigger1 = (ctrl || StateNo = 52 || (StateNo = [100,101])) && Random < (100 * (AILevel ** 2 / 64.0))
trigger2 = stateno = 245 || stateno = 215 && movehit > 0
trigger2 = Random < (150 * (AILevel ** 2 / 64.0))
trigger3 = (enemynear, stateno = [1215,1216]);&& NumHelper(1210) = 0
trigger3 = ctrl && Random < (250 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
[State -1, AI Rasetsujin]
type = ChangeState
value = 3300
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 1000
triggerall = enemynear,statetype != L
triggerall = !(enemynear,hitfall)
triggerall = (p2bodydist x = [90,150])
triggerall = (p2bodydist y = [-110,5])
trigger1 = (ctrl || StateNo = 52 || (StateNo = [100,101])) && Random < (200 * (AILevel ** 2 / 64.0))
trigger2 = stateno = 245 || stateno = 215 && movehit > 0
trigger2 = Random < (100 * (AILevel ** 2 / 64.0))
trigger3 = (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = ctrl && Random < (250 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
[State -1, AI Jumonji Level 1]
type = ChangeState
value = 3000
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 1000
triggerall = numhelper(3010) = 0
triggerall = (p2bodydist x = [50,180])
trigger1 = (ctrl || StateNo = 52 || (StateNo = [100,101])) && Random < (100 * (AILevel ** 2 / 64.0))
trigger2 = stateno = 245 || stateno = 215 && movehit > 0
trigger2 = Random < (100 * (AILevel ** 2 / 64.0))
trigger3 = (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = Ctrl && Random < (250 * (AILevel ** 2 / 64.0))


;---------------------------------------------------------------------------
[State -1, AI Bakuryusho Level 2]
type = ChangeState
value = 3150
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 2000
triggerall = numhelper(3165) = 0
triggerall = statetype != A
triggerall = (enemy,name!="Gill")
triggerall = (enemy,name!="Ghost Rider")
triggerall = (enemy,name!="Pyron")
triggerall = p2bodydist X >90
trigger1 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [210,215]) && movehit && random <= 50
trigger3 = (stateno = 240) && movehit && random <= 50 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 50
trigger5 = (stateno = 440) && movehit && random <= 50
trigger6 = stateno = 440 || stateno = 210
trigger6 = movehit && random <= 30
trigger7 = stateno = 410 && time >= 18
trigger7 = movehit >= 2 && random <= 30
trigger8 = hitdefattr = SC, NA  && random <= 30
trigger9 = (p2bodydist x = [90,130]) && enemynear, movetype = A && enemynear, statetype = A
trigger9 = ctrl && random <= 30
trigger10 = (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger10 = (p2bodydist x = [90,130])
trigger10 = ctrl && random <= 130

;---------------------------------------------------------------------------
[State -1, AI Bakuryusho Level 1]
type = ChangeState
value = 3100
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 1000
triggerall = numhelper(3105) = 0
triggerall = statetype != A
triggerall = (enemy,name!="Gill")
triggerall = (enemy,name!="Ghost Rider")
triggerall = (enemy,name!="Pyron")
triggerall = p2bodydist X >90
trigger1 = ctrl && Random < (100 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [210,215]) && movehit && random <= 50
trigger3 = (stateno = 240) && movehit && random <= 50 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 50
trigger5 = (stateno = 440) && movehit && random <= 50
trigger6 = stateno = 440 || stateno = 210
trigger6 = movehit && random <= 30
trigger7 = stateno = 410 && time >= 18
trigger7 = movehit >= 2 && random <= 30
trigger8 = hitdefattr = SC, NA  && random <= 30
trigger9 = (p2bodydist x = [60,80]) && enemynear, movetype = A && enemynear, statetype = A
trigger9 = ctrl && random <= 30
trigger10 = (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger10 = (p2bodydist x = [60,80])
trigger10 = ctrl && random <= 130
trigger11 = (stateno = [220,224]) && movecontact && Time>8 && Random < (30 * (AILevel ** 2 / 64.0))
trigger12 = (stateno = 420) && movehit && Time>6&& Random < (30 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;Utsusemi
[State -1, AI Utsusemi]
type = ChangeState
value = 3600
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 1000
triggerall = p2bodydist X >100
trigger1 = ctrl && Random < (100 * (AILevel ** 2 / 64.0))
trigger2 = (stateno = [210,215]) && movehit && random <= 10
trigger3 = (stateno = 240) && movehit && random <= 10 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 10
trigger5 = (stateno = 440) && movehit && random <= 10
trigger6 = hitdefattr = SC, NA  && random <= 10

;---------------------------------------------------------------------------
;Homura
[State -1, AI Homura]
type = ChangeState
value = 4000
triggerall = var(22) != 3;Enemy Gill,Ghost Rider,Pyron
triggerall = var(8) != 0
triggerall = var(8) = 1
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = (enemy,name !="Blackheart")
triggerall = power >= 1000
triggerall = p2statetype != L
triggerall = p2bodydist X = [50,200]
triggerall = p2bodydist y = [-110,5]
trigger1 = ctrl && random <= ifelse((var(22)= 1),250,150)*(AILevel ** 2 / 64.0)
trigger2 = (stateno = [210,215]) && movehit && random <= 10
trigger3 = (stateno = 240) && movehit && random <= 10 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 10
trigger5 = (stateno = 440) && movehit && random <= 10
trigger6 = hitdefattr = SC, NA  && random <= 10
trigger7 = ctrl && (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger7 = random <= 300*(AILevel ** 2 / 64.0)
trigger8 = (stateno = [220,224]) && movecontact && Time>8 && Random < (30 * (AILevel ** 2 / 64.0))
trigger9 = (stateno = 420) && movehit && Time>6&& Random < (30 * (AILevel ** 2 / 64.0))

;---------------------------------------------------------------------------
;[State -1, VarSet]
;type = VarSet
;trigger1 = Time%2=0 && AILevel
;var(8) = 2+random%6

;---------------------------------------------------------------------------
[State -1, AI Mystic Break Ice]
type = ChangeState
value = 4050
triggerall = var(24) != 2;Enemy
triggerall = var(24) != 3;Enemy
triggerall = var(8) != 0
triggerall = var(8) = 2
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = power >= 1000
triggerall = p2bodydist X >100
;trigger1 = (abs(p2dist x)/const(size.xscale)**2 + abs(p2dist y)/const(size.yscale)**2)**0.5 > 100
trigger1 = ctrl && random <= ifelse(var(24)= 1,250,150)*(AILevel ** 2 / 64.0)
trigger2 = (stateno = [210,215]) && movehit && random <= 10*(AILevel ** 2 / 64.0)
trigger3 = (stateno = 240) && movehit && random <= 10 && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 10*(AILevel ** 2 / 64.0)
trigger5 = (stateno = 440) && movehit && random <= 10*(AILevel ** 2 / 64.0)
trigger6 = hitdefattr = SC, NA  && random <= 10*(AILevel ** 2 / 64.0)
trigger7 = ctrl && (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger7 = random <= 300*(AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
[State -1, AI Mystic Break Eletric]
type = ChangeState
value = 4050
triggerall = var(23) != 3;Enemy
triggerall = var(23) != 4;Enemy
triggerall = var(8) != 0
triggerall = var(8) = 3
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = power >= 1000
triggerall = p2bodydist X >50
;trigger1 = (abs(p2dist x)/const(size.xscale)**2 + abs(p2dist y)/const(size.yscale)**2)**0.5 > 100
trigger1 = ctrl && random <= ifelse(var(23)=1,250,ifelse(var(23)= 2,350,150))*(AILevel ** 2 / 64.0)
trigger2 = (stateno = [210,215]) && movehit && random <= 10*(AILevel ** 2 / 64.0)
trigger3 = (stateno = 240) && movehit && random <= 10*(AILevel ** 2 / 64.0) && P2movetype != A
trigger4 = (stateno = [410,415]) && movehit && random <= 10*(AILevel ** 2 / 64.0)
trigger5 = (stateno = 440) && movehit && random <= 10*(AILevel ** 2 / 64.0)
trigger6 = hitdefattr = SC, NA  && random <= 10*(AILevel ** 2 / 64.0)
trigger7 = ctrl && (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger7 = random <= 300*(AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
[State -1, AI Mystic Break Wind]
type = ChangeState
value = 4050
triggerall = var(8) != 0
triggerall = var(8) = 4
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = power >= 1000
triggerall = p2bodydist X >80
triggerall = p2bodydist y = [-280,5]
trigger1 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))
trigger2 = hitdefattr = SC, NA  && random <= 15*(AILevel ** 2 / 64.0)
trigger3 = ctrl && (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = random <= 300*(AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
[State -1, AI Mystic Break Earth]
type = ChangeState
value = 4050
triggerall = var(8) != 0
triggerall = var(8) = 5
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = power >= 1000
triggerall = p2bodydist X >100
trigger1 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))
trigger2 = hitdefattr = SC, NA  && random <= 15*(AILevel ** 2 / 64.0)
trigger3 = ctrl && (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = random <= 300*(AILevel ** 2 / 64.0)

;---------------------------------------------------------------------------
[State -1, AI Mystic Break Poison]
type = ChangeState
value = 4050
triggerall = var(25) != 3;Enemy
triggerall = var(8) != 0
triggerall = var(8) = 6
triggerall = !Win
triggerall = AILevel && NumEnemy
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = power >= 1000
triggerall = p2bodydist X =[0,200]
triggerall = p2bodydist y = [-30,5]
trigger1 = ctrl && Random < (150 * (AILevel ** 2 / 64.0))
trigger2 = hitdefattr = SC, NA  && random <= 15*(AILevel ** 2 / 64.0)
trigger3 = ctrl && (enemynear, stateno = [1215,1217]);&& NumHelper(1210) = 0
trigger3 = random <= 300*(AILevel ** 2 / 64.0)
trigger4 = (stateno = 420) && movehit && Time>6&& Random < (30 * (AILevel ** 2 / 64.0))

;-------------------------------------------------------------------------------
;===============================================================================
;-------------------------------------------------------------------------------
[State -1, Roll Forward]
type = ChangeState
value = 710
triggerAll = !AILevel
triggerAll = command = "a+x"
triggerAll = RoundState = 2 && StateType != A
trigger1 = (ctrl || (StateNo = [100,103])) && command = "holdfwd"
trigger2 = var(20) && var(4)

[State -1, Roll Backward]
type = ChangeState
value = 715
triggerAll = !AILevel
triggerAll = command = "a+x"
triggerAll = RoundState = 2 && StateType != A
trigger1 = (ctrl || (StateNo = [100,103])) && command = "holdback"

[State -1, Dodge]
type = ChangeState
value = 700
triggerAll = !AILevel
triggerAll = command = "a+x"
triggerAll = RoundState = 2 && StateType != A
trigger1 = (ctrl || (StateNo = [100,103]))

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;CORE
[State -1, Core]
type = ChangeState
value = 6000
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = power >= 3000
triggerall = command = "CORE"
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,450]) && movecontact

;---------------------------------------------------------------------------
;Homura
[State -1, Homura]
type = ChangeState
value = 4000
triggerall = var(8) = 1
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Mystic_Break";command = "Homura"
triggerall = power >= 1000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
;Mystic Break
[State -1, Mystic Break]
type = ChangeState
value = 4050
triggerall = var(8) = [2,6]
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Mystic_Break";command = "MysticIce"||command = "MysticThunder"||command = "MysticWind"||command = "MysticEarth"||command = "MysticPoison"
triggerall = numhelper(9210)=0
triggerall = numhelper(9215)=0
triggerall = numhelper(9220)=0
triggerall = numhelper(9225)=0
triggerall = numhelper(9230)=0
triggerall = numhelper(9235)=0
triggerall = power >= 1000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
;Ultra Bakuryu
[State -1, Ultra Bakuryusho]
type = ChangeState
value = 3900
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Ultra_Bakuryu"
triggerall = power >= 3000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
[State -1, Ultra Jumonji Level 3]
type = ChangeState
value = 3500
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Ultra_Jumonji"
triggerall = power >= 3000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
[State -1, Rasetsujin]
type = ChangeState
value = 3300
triggerall = !AILevel
triggerall = command = "Rasetsujin"
triggerall = RoundState = 2 && StateType != A
triggerall = power >= 1000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
[State -1, Jumonji Level 2]
type = ChangeState
value = 3050
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Jumonji_2"
triggerall = power >= 2000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact

;---------------------------------------------------------------------------
[State -1, Jumonji Level 1]
type = ChangeState
value = 3000
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Jumonji"
triggerall = power >= 1000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
;Bakuryusho
[State -1, Bakuryusho Level 1]
type = ChangeState
value = 3100
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = power >= 1000
triggerall = command = "Bakuryu_1"
triggerall = power >= 1000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

[State -1, Bakuryusho Level 2]
type = ChangeState
value = 3150
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = power >= 2000
triggerall = command = "Bakuryu_2"
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
[State -1, Hyper Utsusemi]
type = ChangeState
value = 3600
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "HyperUtsusemi"
triggerall = power >= 1000
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Ultimate Guard
[State -1, Ultimate Guard a]
type = ChangeState
value = 1700
triggerall = life
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Ultimate_Guard_a"
trigger1 = ctrl

[State -1, Ultimate Guard b]
type = ChangeState
value = 1710
triggerall = life
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Ultimate_Guard_b"
trigger1 = ctrl

[State -1, Ultimate Guard c]
type = ChangeState
value = 1720
triggerall = life
triggerall = !Win
triggerall = !AILevel
triggerall = statetype != A
triggerall = command = "Ultimate_Guard_c"
trigger1 = ctrl

;---------------------------------------------------------------------------
;Utsusemi
[State -1, Utsusemi]
type = ChangeState
value = 1600
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Utsusemi"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6


[State -1, Enryusho]
type = ChangeState
value = 1100
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "Enryusho"
triggerAll = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
;Ichimonji
[State -1, Ichimonji]
type = ChangeState
value = 1000
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Ichimonji"
triggerall = RoundState = 2 && StateType != A
;triggerall = Numhelper(1005) = 1
triggerall = helper(1005),stateno != 1005
triggerall = !var(39)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
;Ichimonji - Midair
[State -1, Air Ichimonji]
type = ChangeState
value = 1050
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Ichimonji"
triggerall = RoundState = 2 && StateType = A
;triggerall = Numhelper(1060) = 1
triggerall = helper(1060),stateno != 1060
triggerall = !var(39)
trigger1 = ctrl
trigger2 = (stateno = [600,650]) && movecontact

;---------------------------------------------------------------------------
;Tsumuji
[State -1, Tsumuji]
type = ChangeState
value = 1200
triggerall = !Win
triggerall = !AILevel
triggerall = p2stateno !=1205
triggerall = enemynear,stateno != 1215
triggerall = enemynear,stateno != 1216
triggerall = enemynear,stateno != 1217
triggerall = command = "Tsumuji"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
[State -1, Rasetsujin]
type = ChangeState
value = 1300
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Rasetsujin_X"||command = "Rasetsujin_Y"||command = "Rasetsujin_Z"
triggerall = statetype != A
triggerall = RoundState = 2
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [220,224]) && movecontact && Time>8
trigger8 = (stateno = 420) && movecontact && Time>6

;---------------------------------------------------------------------------
[State -1, Rasen Kyaku]
type = ChangeState
value = 1400
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Rasen_KyakuA"||command = "Rasen_KyakuB"||command = "Rasen_KyakuC"
triggerall = RoundState = 2
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact
trigger6 = (stateno = [225,226]) && movecontact
trigger7 = (stateno = [600,610]) && movecontact
trigger8 = (stateno = [630,645]) && movecontact

;---------------------------------------------------------------------------
;Kagero_a
[State -1, Kagero_a]
type = ChangeState
value = 1500
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Kagero_a"
triggerall = statetype != A
triggerall = RoundState = 2
trigger1 = ctrl 

;---------------------------------------------------------------------------
;Kagero_b
[State -1, Kagero_b]
type = ChangeState
value = 1520
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Kagero_b"
triggerall = statetype != A
trigger1 = ctrl 

;---------------------------------------------------------------------------
;Kagero_c
[State -1, Kagero_c]
type = ChangeState
value = 1530
triggerall = !Win
triggerall = !AILevel
triggerall = command = "Kagero_c"
triggerall = statetype != A
trigger1 = ctrl 

;----------------------------------------------------------------------------
[State -1, Zero Counter]
type = ChangeState
value = 750
triggerall = !Win
triggerall = !AILevel
trigger1 = stateno = [150,152]
trigger1 = command = "412p" || command = "412k"
trigger1 = RoundState = 2 && StateType != A
trigger1 = power >= 500 && !var(20)

[State -1, Air Zero Counter]
type = ChangeState
value = 750
triggerall = !Win
triggerall = !AILevel
trigger1 = stateno = [150,152]
trigger1 = command = "412p" || command = "412k"
trigger1 = RoundState = 2 && StateType = A
trigger1 = power >= 500 && !var(20)

[State -1, Custom Combo]
type = null;ChangeState
value = ifElse(StateType = A, 905, 900)
triggerall = !Win
triggerall = !AILevel
trigger1 = command = "c+z"
trigger1 = RoundState = 2
trigger1 = power >= 1000 && !var(20)
trigger1 = ctrl || StateNo = 52 || (StateNo = [100,101])
trigger1 = !var(41)

[State -1, Power Charging]
type = ChangeState
value = 730
triggerall = !Win
triggerall = !AILevel
trigger1 = command = "holdb" && command = "holdy"
trigger1 = RoundState = 2 && StateType != A
trigger1 = power < const(data.power) && power < PowerMax && !var(20)
trigger1 = ctrl || (StateNo = [100,101])

[State -1, Dash Forward/Run]
type = ChangeState
value = 102
triggerall = !Win
triggerall = !AILevel
trigger1 = command = "FF"
trigger1 = roundstate = 2 && StateType = S
trigger1 = ctrl

[State -1, Dash Backward]
type = ChangeState
value = 105
triggerall = !Win
triggerall = !AILevel
trigger1 = command = "BB"
trigger1 = RoundState = 2 && StateType = S
trigger1 = ctrl

;---------------------------------------------------------------------------
;Push Guard Stand
[State -1, Guard Push stand]
type = ChangeState
value = 160
triggerall = !Win
triggerall = !AILevel
triggerall = command = "guardpush" && statetype = S
trigger1 = stateno = [150,153]

[State -1, Guard Push crouch]
type = ChangeState
value = 161
triggerall = !Win
triggerall = !AILevel
triggerall = command = "guardpush" && statetype = C
trigger1 = stateno = [150,153]

[State -1, Guard Push aerial]
type = ChangeState
value = 162
triggerall = !Win
triggerall = !AILevel
triggerall = command = "guardpush" && statetype = A
trigger1 = stateno = [154,155]

;---------------------------------------------------------------------------
[State -1, Taunt]
type = ChangeState
value = 195
triggerall = !Win
triggerall = command = "s"
triggerall = !AILevel&&Roundstate=2&&StateType != A
triggerall = StateNo != [200,699]
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = var(5)

;---------------------------------------------------------------------------
;Yasha Odoshi
[State -1, Yasha Odoshi]
type = ChangeState
value = 820
triggerall = !Win
triggerall = !AILevel
triggerall = command = "z" && command = "holdfwd" || command = "z" && command = "holdback"
triggerall = statetype = S
triggerall = ctrl
triggerall = stateno != 100
trigger1 = p2bodydist X <= 6
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = p2movetype != H

;Shura Fusha
[State -1, Shura Fusha]
type = ChangeState
value = 810
triggerall = !Win
triggerall = !AILevel
triggerall = RoundState = 2
triggerall = statetype = S
triggerall = (p2statetype = S) || (p2statetype = C)
triggerall = p2movetype != H
triggerall = ctrl
triggerall = stateno != 100
trigger1 = command = "c" && command = "holdfwd" || command = "c" && command = "holdback"
trigger1 = p2bodydist X <= 6
trigger2 = command = "b" && command = "holdfwd" || command = "b" && command = "holdback"
trigger2 = p2bodydist X <= 10

;Shura Fusha
[State -1, Shura Fusha]
type = ChangeState
value = 800
triggerall = !Win
triggerall = !AILevel
triggerall = command = "y" && command = "holdfwd" || command = "y" && command = "holdback"
triggerall = statetype = S
triggerall = ctrl
triggerall = stateno != 100
trigger1 = RoundState = 2
trigger1 = p2bodydist X <= 10
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = p2movetype != H

;---------------------------------------------------------------------------
;Shoten
[State -1, Air Throw  Shoten]
type = ChangeState
value = 850
triggerall = !Win
triggerall = !AILevel
triggerall = command = "z" && command = "holdfwd" || command = "z" && command = "holdback"
triggerall = statetype = A
trigger1 = ctrl
trigger1 = (p2BodyDist X <= 25) && (p2BodyDist Y = [-42,5])
trigger1 = p2movetype != H && p2statetype = A

;---------------------------------------------------------------------------
[State -1, Standing Light Punch]
type = ChangeState
value = 200
triggerall = !Win
triggerall = !AILevel
triggerAll = command != "holddown" && command = "x"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])

[State -1, Standing Medium Punch]
type = ChangeState
value = 210
triggerall = !Win
triggerall = !AILevel
triggerall = command = "y"
triggerall = command != "holdfwd"
triggerall = command != "holddown"
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact

;---------------------------------------------------------------------------
;Standing Medium Punch - Foward
[State -1, Stand Medium Punch - Forward]
type = ChangeState
value = 215
triggerall = !Win
triggerall = !AILevel
triggerall = command = "y"
triggerall = command = "holdfwd"
triggerall = command != "holddown"
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact
trigger6 = stateno = 240 && movecontact


[State -1, Standing Far/Close Heavy Punch]
type = ChangeState
value = ifelse(p2bodydist X <= 60,225,220)
triggerall = !Win
triggerall = !AILevel
triggerall = command = "z"
triggerAll = command != "holddown"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact



[State -1, Standing Far/Close Light Kick]
type = ChangeState
value = 230
triggerall = !Win
triggerall = !AILevel
triggerAll = command != "holddown" && command = "a"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (StateNo = 200 || StateNo = 400 || StateNo = 430) && Time >= 5
trigger3 = var(4)


[State -1, Standing Medium Kick]
type = ChangeState
value = 240
triggerall = !Win
triggerall = !AILevel
triggerall = command = "b"
triggerall = command != "holdfwd"
triggerall = command != "holddown"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact

;---------------------------------------------------------------------------
;Standing Medium Kik - Foward
[State -1, Stand Medium Kik - Forward]
type = ChangeState
value = 245
triggerall = !Win
triggerall = !AILevel
triggerall = command = "b"
triggerall = command = "holdfwd"
triggerall = command != "holddown"
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact


[State -1, Standing Heavy Kick]
type = ChangeState
value = 250
triggerall = !Win
triggerall = !AILevel
triggerAll = command != "holddown" && command = "c"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact


[State -1, Crouching Light Punch]
type = ChangeState
value = 400
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "holddown" && command = "x"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (StateNo = 200 || StateNo = 400 || StateNo = 430) && Time >= 5
trigger3 = var(4)

[State -1, Crouching Medium Punch]
type = ChangeState
value = 410
triggerall = !Win
triggerall = !AILevel
triggerAll = command  ="holddown" && command = "y"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact

[State -1, Crouching Heavy Punch]
type = ChangeState
value = 420
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "holddown" && command = "z"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact


[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "holddown" && command = "a"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (StateNo = 200 || StateNo = 400 || StateNo = 430) && Time >= 5
trigger3 = var(4)


[State -1, Crouching Medium Kick]
type = ChangeState
value = 440
triggerall = !Win
triggerall = !AILevel
triggerall = command = "b"
triggerall = command = "holddown"
triggerall = command != "holdfwd"
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact


[State -1, Crouching Heavy Punch]
type = ChangeState
value = 445
triggerall = !Win
triggerall = !AILevel
triggerall = command = "b"
triggerall = command = "holddown"
triggerall = command = "holdfwd"
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 230 && movecontact
trigger4 = stateno = 400 && movecontact
trigger5 = stateno = 430 && movecontact


[State -1, Crouching Heavy Kick]
type = ChangeState
value = 450
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "holddown" && command = "c"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,103])
trigger2 = (stateno = [200,210]) && movecontact
trigger3 = (stateno = [230,240]) && movecontact
trigger4 = (stateno = [400,410]) && movecontact
trigger5 = (stateno = [430,440]) && movecontact

;-------------------------------------------------------------------------------
[State -1, Jumping Light Punch]
type = ChangeState
value = 600
triggerall = !Win
triggerall = !AILevel
triggerall = command = "x"
triggerall = command != "holdup"
triggerall = StateType = A
trigger1 = ctrl

[State -1, Jumping Light Punch Up]
type = ChangeState
value = 605
triggerall = !Win
triggerall = !AILevel
triggerall = command = "x"
triggerall = command = "holdup"
triggerall = StateType = A
trigger1 = ctrl

[State -1, Jumping Medium Punch]
type = ChangeState
value = 610
triggerall = !Win
triggerall = !AILevel
triggerall = command = "y"
triggerall = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,605]) && movecontact
trigger3 = stateno = 630 && movecontact

[State -1, Jumping Heavy Punch]
type = ChangeState
value = 620
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "z"
triggerAll = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,610]) && movecontact
trigger3 = (stateno = [630,645]) && movecontact

[State -1, Jumping Light Kick]
type = ChangeState
value = 630
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "a"
triggerAll = StateType = A
trigger1 = ctrl
trigger2 = var(4)


[State -1, Jumping Medium Kick]
type = ChangeState
value = 640
triggerall = !Win
triggerall = !AILevel
triggerall = command = "b"
triggerall = command != "holdup"
triggerall = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,605]) && movecontact
trigger3 = stateno = 630 && movecontact

[State -1, Jumping Medium Kick]
type = ChangeState
value = 645
triggerAll = !AILevel
triggerAll = command = "b"
triggerall = command = "holdup"
triggerAll = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,605]) && movecontact
trigger3 = stateno = 630 && movecontact

[State -1, Neutral Jumping Heavy Kick]
type = ChangeState
value = 653
triggerall = !Win
triggerall = !AILevel
triggerall = command = "c" && command = "holdup" ;&& command != "holddown"
triggerAll = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,610]) && movecontact
trigger3 = (stateno = [630,645]) && movecontact
trigger4 = (stateno = 215) && movecontact

[State -1, Neutral Jumping Heavy Kick]
type = ChangeState
value = 652
triggerall = !Win
triggerall = !AILevel
triggerall = command = "c" && command = "holddown" ;&& command != "holdfwd" && command !="holdback"
triggerAll = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,610]) && movecontact
trigger3 = (stateno = [630,645]) && movecontact
trigger4 = (stateno = 215) && movecontact

[State -1, Neutral Jumping Heavy Kick]
type = ChangeState
value = 650
triggerall = !Win
triggerall = !AILevel
triggerAll = command = "c"
triggerAll = StateType = A
trigger1 = ctrl
trigger2 = (stateno = [600,610]) && movecontact
trigger3 = (stateno = [630,645]) && movecontact

 ;---------------------------------------------
;High Jump
[State -1, Super Jump]
type = ChangeState
value = 7000
triggerall = !Win
triggerall = !AILevel
triggerall = StateType = S || StateType = C
triggerall = ctrl
trigger1 = Command = "highjump" || Command = "highjump" && Command = "holdfwd" || Command = "highjump" && Command = "holdback"

;---------------------------------------------------------------------------
[State -1, Super Jump]
type = ChangeState
value = 7000
triggerall = !Win
triggerall = !AILevel
triggerall = Command = "holdup"
trigger1 = StateType != A
trigger1 = stateno = 240 && movehit && P2statetype = A
trigger2 = stateno = 245 && movehit
trigger3 = StateType != A
trigger3 = stateno = 445 && movehit



